<html lang="ru" class="preloaderScreen__lock"><head><meta name="watch-user-state" content="0">
          
    <link rel="preload" as="font" type="font/woff" href="/sps/public/assets/themes/default_1680512023/assets/fonts/Golos-UI/golos-text-regular.woff" crossorigin="">
    <link rel="preload" as="font" type="font/woff2" href="/sps/public/assets/themes/default_1680512023/assets/fonts/Golos-UI/golos-text-regular.woff2" crossorigin="">

    <link rel="preload" as="font" type="font/woff" href="/sps/public/assets/themes/default_1680512023/assets/fonts/Golos-UI/golos-text-medium.woff" crossorigin="">
    <link rel="preload" as="font" type="font/woff2" href="/sps/public/assets/themes/default_1680512023/assets/fonts/Golos-UI/golos-text-medium.woff2" crossorigin="">

    <link rel="preload" as="font" type="font/woff" href="/sps/public/assets/themes/default_1680512023/assets/fonts/Golos-UI/golos-text-semibold.woff" crossorigin="">
    <link rel="preload" as="font" type="font/woff2" href="/sps/public/assets/themes/default_1680512023/assets/fonts/Golos-UI/golos-text-semibold.woff2" crossorigin="">

    <link rel="preload" as="font" type="font/woff" href="/sps/public/assets/themes/default_1680512023/assets/fonts/Golos-UI/golos-text-bold.woff" crossorigin="">
    <link rel="preload" as="font" type="font/woff2" href="/sps/public/assets/themes/default_1680512023/assets/fonts/Golos-UI/golos-text-bold.woff2" crossorigin="">

    <link rel="preload" as="font" type="font/woff" href="/sps/public/assets/themes/default_1680512023/assets/fonts/Golos-UI/golos-text-black.woff" crossorigin="">
    <link rel="preload" as="font" type="font/woff2" href="/sps/public/assets/themes/default_1680512023/assets/fonts/Golos-UI/golos-text-black.woff2" crossorigin="">
  
          
    
    
    
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
<title>Войти</title>
<link rel="stylesheet" media="screen" href="/sps/assets/blitz-common/theme/assets/skin/default_skin/css/theme.min.css">
<link rel="stylesheet" media="screen" href="/sps/assets/blitz-common/stylesheets/idp.min.css">

<script type="text/javascript">
    window.blitzInits = [];
    var require = {
        callback: function() {
            requirejs.config({
                "waitSeconds": 20,
                "paths": {
                    "page": '/sps/assets/blitz-common/javascripts/page',
                    "parsley": '/sps/assets/blitz-common/ilib/parsley/parsley',
                    "parsley-lang": '/sps/assets/blitz-common/ilib/parsley/i18n',
                    "theme-utility": '/sps/assets/blitz-common/theme/assets/js/utility/utility',
                    "theme-main": '/sps/assets/blitz-common/theme/assets/js/main',
                    "mustache": '/sps/assets/blitz-common/ilib/mustache/mustache',
                    "jquery": '/sps/assets/blitz-common/theme/vendor/jquery/jquery-1.11.1.min',
                    "jquery-ui":'/sps/assets/blitz-common/theme/vendor/jquery/jquery_ui/jquery-ui.min',
                    "requirejs-domready":'/sps/assets/blitz-common/ilib/domReady/domReady',
                    "fingerprint2": '/sps/assets/blitz-common/ilib/fingerprint2/fingerprint2-1.7.0.min',
                    "plugin-select2": '/sps/assets/blitz-common/theme/vendor/plugins/select2/select2.min',
                    "password-strength": '/sps/assets/blitz-common/javascripts/password_strength',
                    "lang-selector": '/sps/assets/blitz-common/javascripts/lang_selector',
                    "easyQRCode": '/sps/assets/blitz-common/ilib/easyQRCode/easy.qrcode-4.4.3.min',
                    "base64js": '/sps/assets/blitz-common/ilib/base64js/base64js.min',
                    "pOfw": '/sps/assets/blitz-common/javascripts/pOfw',
                    "pOfw_a": '/sps/assets/blitz-common/javascripts/pOfw_a',
                    "pOfw_ie": '/sps/assets/blitz-common/javascripts/pOfw_ie',
                    "pureSha1": '/sps/assets/blitz-common/javascripts/pureSha1'
                },
                "shim": {
                    "parsley" : [ 'jquery', 'jquery-ui', 'page'],
                    "mustache" : ['jquery'],
                    "theme-utility": ['jquery', 'jquery-ui'],
                    "theme-main": ['jquery', 'jquery-ui'],
                    "plugin-select2" : ['jquery']
                }
            });
        },
        config: {
            'page': {
                'lang': 'ru',
                'httpContext': '/sps',
                'portalLangCookie': {},
                'languages': {"ru":"Русский (RU)"}
            }
        }
    };

    msgs=(function(u){var ms={'err.internal':'\u0412\u043D\u0443\u0442\u0440\u0435\u043D\u043D\u044F\u044F \u043E\u0448\u0438\u0431\u043A\u0430'};return function(k){if(typeof k == "object"){for(var i=0;i<k.length&&ms[k[i]]!==u;i++);var m=ms[k[i]]||k[0]}else{m=((ms[k]!==u)?ms[k]:k)}for(i=1;i<arguments.length;i++){m=m.replace('{'+(i-1)+'}',arguments[i])}return m}})()
</script>


    <link rel="stylesheet" media="screen" href="/sps/login/assets/stylesheets/login.min.css">
    
    <link rel="stylesheet" media="screen" href="/sps/login/assets/stylesheets/mus.min.css">


    <script type="text/javascript">
        var customPasswordStrength = "{}";
    </script>      
     <link rel="icon" type="image/png" href="/sps/public/assets/themes/default_1680512023/assets/img/favicon.png"> 
    
    <script>
      var agent = navigator.userAgent.indexOf('Trident/7.0')
      if (agent >= 0) console.warn("[SCALA]", "IE 11 detected! "); 
    </script>
    
     <link rel="stylesheet" media="screen" href="/sps/public/assets/themes/default_1680512023/assets/css/cross-browser.185437.css"> 
     <link rel="stylesheet" media="screen" href="/sps/public/assets/themes/default_1680512023/assets/css/fonts.185437.css"> 
     <link rel="stylesheet" media="screen" href="/sps/public/assets/themes/default_1680512023/assets/css/custom-theme.185437.css"> 
     
    
     
    
    
  
    
    <style>
      
       /* stylelint-disable property-no-vendor-prefix */
       /* stylelint-disable selector-id-pattern */
       /* stylelint-disable selector-class-pattern */

       /**
       * system
       * */
       .system__layout {
         display: grid;
         grid-auto-flow: column;
         align-items: stretch;
         justify-content: space-between;
         grid-gap: 0;
         grid-auto-columns: 0.41875fr 0.58125fr;
       }
       .system__body {
         display: grid;
         height: 100vh;
         overflow: hidden !important;
         grid: 1fr / 1fr;
       }
       .system__column-row {
         grid-column: 1;
         grid-row: 1;
       }
       .system__scripts {
         display: none;
         font-size: 0;
         padding: 0;
         margin: 0;
       }

       /**
       * system__header
       * */
       .system__header {
         display: grid;
       }

       .system-header__container {
         display: grid;
         grid-auto-flow: row;
         grid-gap: 24px;
         color: var(--color-gray-90, initial);
       }
       .system-header__h1 {
         color: var(--color-gray-90, initial);
         font-family: var(--font-main, sans-serif);
         font-weight: 600;
         font-size: 26px;
         line-height: 32px;
       }
       .system-header__desc {
         font-family: var(--font-main, sans-serif);
         font-weight: 400;
         font-size: 18px;
         line-height: 28px;
       }
       .system-header__logo {
         display: grid;
         width: 55.35px;
         height: auto;
         transition: width 0.234s;
       }
       .system-header__pic {
         object-fit: cover;
         max-height: 100%;
         max-width: 100%;
       }
       .system-header__info {
         display: grid;
         grid-gap: 24px;
       }
       .system-header__space {
         padding: 60px 60px 60px 73px;
         min-height: 520px;
         transition: padding 0.234s;
       }
       
       
       /**
       * system__main
       * */
       .system__main {
         display: grid;
       }

       .system-main__box {
         display: grid;
         justify-content: center;
         align-items: start;
         grid: auto / minmax(auto, 480px);
         max-height: 100vh;
         overflow: auto;
         position: relative;
       }
       .system-main__background {
         background-color: var(--color-white, #fff);
       }
       .system-main__space {
         padding: 88px 32px 32px;
         transition: padding 0.234s, margin 0.234s;
         will-change: padding;
       }
       .system-main__form {
         display: grid;
         margin: unset;
         max-width: unset;
         padding: unset;
       }
       .system-content__disabled {
        display: none;
       }

       /**
       * system__footer
       * */
       .system__footer {
         display: grid;
         grid-auto-flow: row;
         align-items: center;
         justify-content: start;
         position: unset;
         height: unset;
         width: unset;
         text-align: unset;
         box-shadow: unset;
         grid-gap: 0.5rem;
         align-self: end;
       }
       .system-footer__space {
         padding: 32px 73px;
         transition: padding 0.234s;
       }

       .system-back__item-content {
         display: grid;
       }
       .system-back__href {
         display: grid;
         grid-auto-flow: column;
         justify-content: start;
         grid-gap: 4px;
         align-items: baseline;
         color: var(--color-blue-60, #04c);
         width: max-content;
       }
       .system-back__icon {
         width: 13.56px;
         height: auto;
         display: grid;
         align-items: center;
         justify-content: center;
         pointer-events: none;
         user-select: none;
       }
       .system-back__text {
         font-size: 14px;
         font-weight: 400;
         pointer-events: none;
         user-select: none;
       }

       /**
       * system__any
       * */
       .system-link__title {
         color: var(--color-gray-80, initial);
         font-family: var(--font-main, sans-serif);
         font-size: 14px;
         font-weight: 400;
         line-height: 20px;
         margin: unset;
       }
       
       .system-link__title--space {
          margin-top: 32px;
          margin-bottom: 16px;
       }
       
       .system-link__copyright {
         color: var(--color-gray-60, initial);
         font-family: var(--font-main, sans-serif);
         font-weight: 400;
         font-size: 14px;
         line-height: 20px;
       }
       .system-link__href {
         width: max-content;
         color: var(--color-blue-60, #04c);
         font-family: var(--font-main, sans-serif);
         font-size: 14px;
         font-weight: 400;
         line-height: 20px;
         margin: unset;
         text-decoration-line: unset;
         text-underline-position: under;
         text-decoration-color: var(--color-blue-60, #04c);
       }
       .system-link__box {
         display: grid;
         grid-gap: 22px;
       }
       .system-link__list {
         display: grid;
         grid-auto-flow: row;
         grid-gap: 8px;
       }
       .system-link__group {
         display: grid;
         grid-gap: 12px;
       }
       .system-link__alt-group {
         display: grid;
         grid-gap: 24px;
       }

       /**
       * HACK 
       * see code in custom-theme.css
       */
       .formHook__style .text-danger::before {
         background-image: url('/sps/public/assets/themes/default_1680512023/assets/img/svg/errorMsg.svg');
       }
       .formHook__style .text-danger.borderError {
         background-color: var(--color-error-20, initial);
         border-left: 4px solid var(--color-error-60, crimson);
         border-radius: 2px;
         color: #0e0e0f;
         font-family: var(--font-main, sans-serif);
         font-size: 14px;
         font-weight: 400;
         line-height: 20px;
         margin: 24px 0;
         padding: 16px 20px;
       }
       .formHook__style .text-danger.borderError::before {
         content: unset;
       }

       .formHook__style .methods-other a {
         display: grid;
         border: 1px solid var(--color-gray-30, #c4c8d0);
         border-radius: 4px;
         align-items: center;
         justify-content: center;
         font-size: 16px;
         line-height: normal;
         text-transform: none;
         user-select: none;
         text-decoration: none;
         color: var(--color-gray-90, initial);
         padding: 12px 32px;
         margin-top: unset;
         overflow: hidden;
         font-family: var(--font-main, sans-serif);
         font-weight: 400;
         transition: padding 0.123s;
       }
       .formHook__style .methods-other a:hover {
         background-color: var(--color-cursor-hover, initial);
       }
       .formHook__style .methods-other a:active {
         background-color: var(--color-cursor-active, initial);
       }
       .formHook__style .methods-other a:focus {
         box-shadow: 0 0 0 3px var(--color-cursor-focus, initial);
       }
       .formHook__style .incognito-container {
         margin-top: 32px;
         color: var(--color-gray-60, initial);
         font-family: var(--font-main, sans-serif);
         font-weight: 400;
         font-size: 12px;
         line-height: 20px;
         text-align: center;
       }

       @media not all and (min-resolution:.001dpcm) {
         @media {
           .safari_only {
             transition: unset;
           }
         }
       }

       @media screen and (max-width: 1366.99px) {
         .system__layout {
           grid-auto-columns: 0.418741fr 0.581259fr;
         }
         .system-header__logo {
           display: grid;
           height: auto;
           width: 46px;
         }
         .system-header__space {
           padding: 60px 60px 32px 73px;
         }
         .system-footer__space {
           padding: 60px 60px 32px 73px;
         }
       }

       @media screen and (max-width: 1024.99px) {
         .system__layout {
           grid-auto-columns: 0.421875fr 0.578125fr;
         }
         .system-header__logo {
           display: grid;
           width: 46.12px;
           height: auto;
         }
         .system-header__space {
           padding: 60px 32px 32px 40px;
         }
         .system-footer__space {
           padding: 60px 60px 32px 40px;
         }
       }

       /**
       * media at 900 to -> 1025 px 
       * */
       @media screen and (min-width: 870.99px) and (max-width: 1199.99px) {
         .system-header__space {
           min-height: 590px;
         }
       }

       /**
       * media Table 768+ width
       * grid started transform UI after 869px width
       * */
       @media screen and (max-width: 870.99px) {
         .system__layout {
           grid: auto 1fr auto / 1fr;
           grid-gap: 32px;
           grid-auto-rows: max-content;
           align-items: stretch;
         }
         .system__column-row {
           grid-column: unset;
           grid-row: unset;
         }
         .system-main__space {
           padding: 32px;
         }
         .system-main__box {
           border: 1px solid var(--color-gray-20, initial);
           border-radius: 8px;
           max-height: unset;
           overflow: unset;
         }
         .system-header__container {
           grid-gap: 16px;
         }
         .system-header__info {
           grid-gap: 16px;
         }
         .system-header__h1 {
           font-size: 21px;
           line-height: 24px;
         }
         .system-header__desc {
           font-size: 16px;
           line-height: 24px;
         }
         .system-header__logo {
           width: 30.75px;
           height: auto;
         }
         .system-header__pic {
           max-height: 100%;
           max-width: 100%;
         }
         .system__header,
         .system__footer,
         .system__main {
           display: grid;
           grid: max-content / minmax(auto, 524px);
           justify-content: center;
           padding: 0 16px;
         }
         .system-header__space,
         .system-footer__space {
           padding: unset;
         }
         .system-header__space {
           margin-top: 24px;
           min-height: unset;
         }
         .system-footer__space {
           margin-bottom: 24px;
         }
         .system__body {
           overflow: auto !important;
         }
       }

       /**
       * media Mobile 524+ width
       * grid started transform UI after 869px width
       * */
       @media screen and (max-width: 524.99px) {
         .system-main__space {
           padding: 16px;
         }
       }

       /**
       * media Mobile < 500 width
       * grid started transform UI after 869px width
       * */
       @media screen and (max-width: 425.99px) {
         .system-header__container {
           grid: auto / auto 1fr;
         }
         .system-header__h1 {
           font-size: 15px;
           line-height: 18px;
         }
         .system-header__desc {
           grid-column: 1/3;
           font-size: 14px;
           line-height: 20px;
         }
         .system__layout {
           grid-gap: 24px;
         }
       }

       /**
      * WARNING - global static code
      * */
       .formHook__style .text-danger + #resendDiv {
         margin-top: 24px;
       }

       .formHook__style blockquote#errBlock + blockquote.blockquote-danger .text-danger {
         display: grid;
         color: var(--color-gray-90, initial);
         font-family: var(--font-main, sans-serif);
         font-weight: 400;
         font-size: 14px;
       }

       .formHook__style #regFm .form__showme .help-block {
         display: block;
         font-family: var(--font-main, sans-serif);
         font-weight: 400;
         font-size: 16px;
         line-height: 24px;
         color: var(--color-gray-90, initial);
       }

       .formHook__style .blockquote-danger p.text-danger {
         color: var(--color-gray-80, initial);
         font-size: 14px;
         font-family: var(--font-main, sans-serif);
         font-weight: 400;
       }

       .formHook__style #__div_mail > .form__label-desc,
       .formHook__style #__div_ditsecurityquestion > .form__label-desc,
       .formHook__style #__div_mobile > .form__label-desc {
         display: none;
       }
       .formHook__style #regFm .form__item--gap {
         display: grid;
         grid-gap: 24px;
       }

    </style>
   
  
    
    
    
    
    
    <!-- polyfill -->
    
    
    <script>
       (function () {
         /**
          * String.prototype.replaceAll() polyfill
          */
         if (String.prototype.replaceAll === undefined) {
           String.prototype.replaceAll = function (
             searchString,
             replaceString = ""
           ) {
             // If a regex pattern
             if (
               Object.prototype.toString.call(searchString).toLowerCase() ===
               "[object regexp]"
             ) {
               return this.replace(searchString, replaceString);
             }

             // If a string
             return this.replace(new RegExp(searchString, "g"), replaceString);
           };
         }

         /**
          * Node.prototype.replaceChildren() polyfill
          */
         if (Node.prototype.replaceChildren === undefined) {
           Node.prototype.replaceChildren = function (addNodes) {
             while (this.lastChild) {
               this.removeChild(this.lastChild);
             }
             if (addNodes !== undefined) {
               this.append(addNodes);
             }
           };
         }
       })();
    </script>
    
  
    
    
    <!-- components -->
    
    
    <script>
      if (self.location.host === top.location.host) {
          const antiClickjack = document.querySelector("#antiClickjack");
          antiClickjack.parentNode.removeChild(antiClickjack);
      } else {
        top.location = self.location;
      }
    </script>
  
    
    
      
    <script>console.log("[componentKFP]", true, 81541); </script>
       
    
      <script>
        (() => {
          
          /**
           * DISABLED CLICK HANLDER!
           */
          // const handler = {
          //   clickOnlyFormButton(event, { cid, action }) {
          //     setTimeout(async () => {
          //       //  const countErrors = document.querySelectorAll('.has-error');
          //       //  if (countErrors.length) return event.preventDefault();

          //       //  event.preventDefault();

          //       return await runner.kfpStart({ cid, action });
          //     }, 100);
          //   },
          //   clickFormButtonAndWriteKsid(event, { cid, action }) {
          //     setTimeout(async () => {
          //       const countErrors = document.querySelectorAll('.has-error');
          //       if (countErrors.length) return event.preventDefault();

          //       const uuid = await runner.kfpStart({ cid, action });

          //       const formFieldKsid = document.querySelector('input[name="ksid"]');
          //       if (formFieldKsid) formFieldKsid.value = uuid;

          //       return uuid;
          //     }, 100);
          //   },
          // };
          
          
          const promiseScriptLoader = (source = '') => {
            return new Promise((resolve, reject) => {
              // console.log("promiseLoaderSrc");  
              
              const _once = {once: true};
              
              const element = document.createElement("SCRIPT");
              element.className = "system__js-daspp-runner";
              element.src = source;
              element.addEventListener("load", () => resolve("success"), _once);
              element.addEventListener("error", () => reject("fail"), _once);
              return attachElement(element);
            });
          };

          const sleep = (ms) => {
            return new Promise((resolve, reject) => setTimeout(() => resolve(console.log("time", ms)), ms));
          };

          const attachElement = (element) => {
            // console.log("element", element);
            const selector = document.querySelector(".system__scripts");
            if (selector) selector.prepend(element);
          };

          const runner = {
            async kfpStart({ cid, action }) {
                try {
                //  await sleep(2000);
                  await promiseScriptLoader("/js/" + "daspp.obf.js");
                                     
                  if (window['kfp']) {
                    const result = await window['kfp'].login_start(cid, action);
                    // console.log(`[LOG] result`, `<${typeof result}>`, result)
                    
                    return result;
                  }
                } catch (error) {
                  console.warn("state kfpStart script:", error);
                  
                  return error;
                }
            },
            async kfpLogout({ cid, action }) {
                try {                
                  if (window['kfp']) {
                    const result = await window['kfp'].logout(cid, action);
                    // console.log(`[LOG] result`, `<${typeof result}>`, result)
                    
                    return ({result, log: 'logout'});
                  }
                } catch (error) {
                  console.warn("state kfpLogout script:", error);
                  
                  return error;
                }
            },
            
            continueMutation({ MutationRecord, payload }) {
              // console.log(`[continueMutation] MutationRecord`, `<${typeof MutationRecord}>`, MutationRecord)
              const [mutationElement] = [...MutationRecord.addedNodes];
              // console.log(`[LOG] mutationElement`, `<${typeof mutationElement}>`, mutationElement)
              
              if (mutationElement && mutationElement.dataset['js']) {
                const result = mutationElement.dataset['js'];
                if (String(result).includes('logout')) {
                  
                  (async () => {
                    // console.log(`[LOG] result`, `<${typeof result}>`, result)
                    const {cid, action} = payload;

                    const uuid = await runner.kfpStart({ cid, action });
                    // console.log(`[LOG] uuid`, `<${typeof uuid}>`, uuid)
                    
                    const _logout = await runner.kfpLogout({cid, action});
                    // console.log(`[LOG] _logout`, `<${typeof _logout}>`, _logout)
                    
                    return _logout;
                  })();
                }
                
              }
                 
            },
            
            createMutation({target, payload}) {
              // console.log(`[LOG createMutation] target`, `<${typeof target}>`, target)
              const MO = new MutationObserver((mutationsList) => {
                if (Array.isArray(mutationsList) && mutationsList.some(Boolean)) {
                  const MutationRecord = mutationsList.find((f) => [...f.addedNodes].some(Boolean));
                  // console.log(`[LOG] MutationRecord`, `<${typeof MutationRecord}>`, MutationRecord)

                  if (MutationRecord && MutationRecord.addedNodes) {
                   return runner.continueMutation({ MutationRecord, payload });
                  }
                  
                  return console.log("[DEBUG]", "unknown MO"); 
                }
              });

              try {
                const targetMutate = document.querySelector(target);
                // console.log(`[LOG] targetMutate`, `<${typeof targetMutate}>`, targetMutate)

                if (targetMutate) {
                  const moResult = MO.observe(targetMutate, { 
                    attributes: false,
                    subtree: false,
                    childList: true 
                  });
                  
                  // console.log(`[MOobserve LOG] moResult`, `<${typeof moResult}>`, moResult)
                  return moResult;
                }
              } catch (error) {
                console.log(`[LOG] error`, `<${typeof error}>`, error);
                return MO.disconnect();
              }
            },
            
          };

          const myPromise = {
            blockButton({ submitButton }) {
              // eslint-disable-next-line promise/avoid-new
              return new Promise((resolve, reject) => {
                const offAttr = 'disabled';

                submitButton.setAttribute(offAttr, offAttr);
                if (submitButton.hasAttribute(offAttr)) return resolve(offAttr);

                return reject('blockButton');
              });
            },
            async kfcInputInject({ payload: { cid, action } }) {
              const formFieldKsid = document.querySelector('input[name="ksid"]');

              if (formFieldKsid) {
                const uuid = await runner.kfpStart({ cid, action });
                formFieldKsid.value = uuid;

                return uuid;
              }

              return await runner.kfpStart({ cid, action });
            },
            unBlockButton({ submitButton }) {
              // eslint-disable-next-line promise/avoid-new
              return new Promise((resolve, reject) => {
                const offAttr = 'disabled';

                submitButton.removeAttribute(offAttr);
                if (!submitButton.hasAttribute(offAttr)) return resolve(offAttr);

                return reject('unBlockButton');
              });
            },
          };

         

          const tryWaitServerAnswer = async ({ payload, submitButton = undefined }) => {
            try {
              const button = document.querySelector(submitButton);
              if (button) {
                await myPromise.blockButton({ submitButton: button });
                const _ksid = await myPromise.kfcInputInject({ payload });
                await myPromise.unBlockButton({ submitButton: button });

                return _ksid;
              }
              
              return await myPromise.kfcInputInject({ payload });
            } catch (error) {
              console.warn(`[LOG] error`, `<${typeof error}>`, error);
              return error;
            }
          };

          const loopKfpTrigger = ({ payload, list }) => {
            const hasRules = list.some(({ form }) => document.querySelector(form));

            const A = () => {
              for (const f of list) {
                const selector = document.querySelector(f.form);
                if (selector) return tryWaitServerAnswer({ payload, submitButton: f.button });
              }
            };

            const B = () => {
              const selector = document.querySelector('form');
              if (selector) return tryWaitServerAnswer({ payload });
            };

            return hasRules ? A() : B();
          };
          
          
          const initializationKfp = (payload) => {
            /**
              * form login
              * form registration
              * form recovery
              * form select account
              * */

            const rules = [
              { form: '#loginFm', button: '#bind' },
              { form: '#regFm' },
              { form: '#startFm', button: '#startBtn' },
              { form: '#mus-selector' },
              { form: '#cfmFm', button: '#cfmBtn' },
              { form: '#pswdFm', button: '#pswdBtn' },
            ];

            return loopKfpTrigger({ payload, list: rules });
          };
          
          const extraKfp = async (payload) => {
            if (!payload) return;
         
            
            return runner.createMutation({target: '[data-js="append-title-desc"]', payload});
            
            // const list = [
            //     { target: '.rootHook__logout' },
            //   ];
            
            //   for (const f of list) {
            //     const selector = document.querySelector(f.target);
            //     console.log(`[LOG] selector`, `<${typeof selector}>`, selector)
            //     if (selector) {
            //        const uuid = await runner.kfpStart({ cid, action });
            //        console.log(`[LOG] uuid`, `<${typeof uuid}>`, uuid)
            //     }
            //   }
          };
          
          
          const run = () => {
            const payload = { cid: Number('81541'), action: 'login' };
            
            initializationKfp(payload);
            extraKfp(payload);
          };

          document.addEventListener('DOMContentLoaded', () => run());
        })();
    </script>
     
  
    
    
    <style>
       
       /* stylelint-disable property-no-vendor-prefix */
       /* stylelint-disable selector-id-pattern */
       /* stylelint-disable selector-class-pattern */

       .preloaderScreen__lock {
         overflow: hidden !important;
         touch-action: none;
         position: relative;
         height: 100%;
         caret-color: #0000;
         max-height: 100vh;
         min-height: 50vh;
       }
       .preloaderScreen__start {
         display: grid;
         grid: 1fr / 1fr;
         background-color: #fff;
         border: 0;
         border-radius: 8px;
         width: 100%;
         height: 100%;
         min-height: 100%;
         min-width: 100%;
         max-height: 100vh;
         position: absolute;
         top: 0;
         left: 0;
         right: 0;
         bottom: 0;
         overflow: hidden;
         user-select: none;
         scroll-behavior: auto;
         scrollbar-gutter: auto;
         -webkit-box-align: center;
         -ms-flex-align: center;
         align-items: center;
         -webkit-box-pack: center;
         -ms-flex-pack: center;
         justify-content: center;
         transform: translate3d(0, 0, 0);
         touch-action: none;
         z-index: 234;
       }
       .preloaderScreen__progress {
         background-color: var(--color-blue-30, initial);
         height: 4px;
         transition: transform 0.123s ease;
         transform: translateX(-99%);
         width: 150px;
       }
       .preloaderScreen__box {
         display: grid;
         align-items: center;
         justify-content: center;
         grid-gap: 24px;
       }
       .preloaderScreen__logo {
         width: 100%;
         height: auto;
         display: grid;
         align-items: center;
         justify-content: center;
       }

       .preloaderScreen__logo .raf-animation-spinner {
         position: relative;
         display: inline-block;
         height: 48px;
         width: 48px;
         background-color: #0000;
         color: var(--color-gray-90, #ccc);
         border: 5px solid;
         border-radius: 50%;
         border-top-color: #0000;
       }
       .preloaderScreen__container {
         overflow: hidden;
         background-color: var(--color-gray-20, initial);
         border: 0;
         border-radius: 6px;
         margin: 0 1rem;
         display: none;
       }

       @media screen and max-width(870.99px) {
         .preloaderScreen__lock {
           max-height: 85vh;
         }
         .preloaderScreen__start {
           border-radius: 8px;
         }
       }

    </style>
    <script>
        
        const animationLoader = () => {
          const worker = ({ target }) => {
            // console.log('[DEBUG]', '1animationLoader');
            const RAF =
              window.requestAnimationFrame ||
              window.mozRequestAnimationFrame ||
              window.webkitRequestAnimationFrame ||
              window.msRequestAnimationFrame;

            const CAF = window.cancelAnimationFrame || window.mozCancelAnimationFrame;

            const ID = document.querySelector(target);
            // console.log(`[LOG] ID`, `<${typeof ID}>`, ID);
            const speed = 280;

            let activeRAF = 0;
            let startTime = Date.now();

            const converter = ({ start, end }) => {
              const difference = Number(((end - start) / 1000).toFixed(2));
              // console.log('difference', difference);
              const result = Number((difference * speed).toFixed(2));
              // console.log('result1', result);
              return result;
            };

            const mySpinner = () => {
              if (!document.querySelector(target)) return CAF(activeRAF);
              // console.log('1ID', ID);

              const currentTime = Date.now();
              const time = converter({ start: startTime, end: currentTime });
              // console.log('time:', time);
              ID.style.transform = `rotate(${time}deg)`;
              if (time <= 360) {
                activeRAF = RAF(mySpinner);
                return activeRAF;
              }
              startTime = Date.now();
              activeRAF = RAF(mySpinner);
              return activeRAF;
            };

            mySpinner();
          };

          const target = ".preloaderScreen__logo .raf-animation-spinner";
          const animationInterval = setInterval(() => {
            if (document.querySelector(target)) {
              // console.log("[DEBUG]", "clearInterval"); 
              clearInterval(animationInterval);
              return worker({ target });
            }
          }, 123);
        };

        (() => animationLoader())();

    </script>
    
    
    
    <style>
      
      /* stylelint-disable property-no-vendor-prefix */
      /* stylelint-disable selector-id-pattern */
      /* stylelint-disable selector-class-pattern */

      .js-title-desc .page-title {
        color: var(--color-black, #000);
        display: grid;
        font-family: var(--font-main, sans-serif);
        font-size: 32px;
        font-weight: 700;
        justify-content: start;
        line-height: 40px;
        margin-bottom: 0;
      }
      .js-title-desc .page-title + div a {
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        line-height: normal;
        color: var(--color-blue-60, #04c);
      }
      .page__title-desc {
        color: var(--color-gray-90, initial);
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        line-height: 24px;
        margin-bottom: 32px;
      }

      .systemBanner__main {
        display: grid;
        grid: auto / auto 1fr;
        grid-gap: 16px;
        align-items: start;
        justify-content: start;
        background-color: var(--color-yellow-20, initial);
        padding: 20px 16px;
        border: 0;
        border-radius: 2px;
        border-left: 4px solid;
        border-left-color: var(--color-yellow-60, initial);
        line-height: 20px;
        color: #0e0e0f;
        margin: 24px 0;
        margin-bottom: 8px;
      }
      .systemBanner__icon {
        display: grid;
        align-items: center;
        justify-content: center;
        width: 20px;
        height: 20px;
        border-radius: 100%;
      }
      .systemBanner__text {
        font-family: var(--font-main, sans-serif);
        color: var(--color-gray-90, initial);
        font-weight: 400;
        font-size: 14px;
        word-break: break-word;
      }

      @media screen and (max-width: 870.99px) {
        .js-title-desc .page-title {
          font-size: 26px;
          line-height: normal;
          margin-bottom: 0;
          text-align: unset;
        }
        .page__title-desc {
          margin-bottom: 32px;
        }
        .formHook__idLoginFm .page-title {
          font-size: 26px;
          line-height: normal;
          margin-bottom: 16px;
        }
        .formHook__idLoginFm .page__title-desc {
          margin-bottom: 32px;
        }
      }

      @media screen and (max-width: 499.99px) {
        .js-title-desc #recoveryHead {
          display: grid;
          grid: auto / 1fr;
          grid-gap: 12px;
        }
        .js-title-desc #login-link {
          display: grid;
          grid-row: 1;
          justify-content: start;
        }
      }

    </style>
    <script>
    (() => {
      const _fetchText = async (myUrl) => {
        try {
          const { href } = new URL(myUrl);
          const data = await fetch(href);
    
          if (data.status !== 200) throw new Error(`[${data.status}] Invalid server answer!`);
          
          return await data.text();
        } catch (error) {
          // console.warn('[SCALA]', error);
          return false;
        }
      };

      
      const timer = (ms = 100) => {
        return new Promise((resolve, _) => setTimeout(() => resolve(), ms));
      }
      
      const run = async () => {
        const titleDesc = document.querySelector('[data-js=append-title-desc]');
        if (titleDesc) titleDesc.classList.add('js-title-desc');

        const listWhitePages = ["#regFm", "#loginFm", "#startFm"];
        const bool = listWhitePages.some(f => Boolean(document.querySelector(f)));
        const scalaSystemBanner = true;
        
        if (scalaSystemBanner && titleDesc && bool) {
          const url = new URL(`${window.location.origin}/scon/flow`).href;

          await timer(100);
          const text = await _fetchText(url);
          const cleanText = text ? text.trim() : text;

          if (text && cleanText) {
            const template = `
              <div class="systemBanner__main">
                <img class="systemBanner__icon" src="/sps/public/assets/themes/default_1680512023/assets/img/svg/technical-break.svg" alt="Icon">  
                <div class="systemBanner__text">${typeof cleanText !== "string" ? "Wrong response type" : cleanText}</div>
              </div>
            `.trim();
            const attachText = (target) => {
              if (target) return target.insertAdjacentHTML('afterend', template);
            }

            const regPage = document.querySelector('#reg-content');
            if (regPage && titleDesc) return attachText(titleDesc.querySelector('#reg-content div'));

            return attachText(titleDesc.querySelector('div'));
         }
        }
      };

      document.addEventListener('DOMContentLoaded', () => run());
    })();
    </script>
  
   
    
  
    
    <style>
      
      /* stylelint-disable property-no-vendor-prefix */
      /* stylelint-disable selector-id-pattern */
      /* stylelint-disable selector-class-pattern */

      .form-toggle__parent label {
        display: grid;
        grid: auto / auto 1fr;
        grid-gap: 12px;
      }
      .form-toggle__checkbox {
        display: grid;
        cursor: pointer;
        grid: auto / auto 1fr;
        grid-gap: 12px;
        user-select: none;
        align-items: center;
        justify-content: start;
      }
      .form-toggle__checkbox input {
        position: absolute;
        opacity: 0;
        cursor: pointer;
        height: 0;
        width: 0;
      }
      .form-toggle__checkmark {
        display: grid;
        align-items: center;
        background-color: var(--color-white, #fff);
        border-radius: 4px;
        border: 1px solid #c4c8d0;
        grid-row: 1;
        height: 20px;
        justify-content: center;
        position: relative;
        -moz-user-select: none;
        -ms-user-select: none;
        -webkit-user-select: none;
        user-select: none;
        width: 20px;
        transition: border ease 0.123s;
      }
      .form-toggle__checkmark:hover {
        border: 1px solid #68d;
        box-shadow: 0 0 0 3px #68d;
      }
      .form-toggle__checkmark::after {
        content: '';
        display: none;
      }
      .form-toggle__checkbox .form-toggle__checkmark::after {
        width: 5px;
        height: 10px;
        border: solid var(--color-white, #fff);
        border-width: 0 3px 3px 0;
        -webkit-transform: rotate(45deg);
        -ms-transform: rotate(45deg);
        transform: rotate(45deg);
      }
      .form-toggle__checkbox input:checked ~ .form-toggle__checkmark {
        background-color: var(--color-blue-60, #04c);
        border: 1px solid var(--color-blue-60, #04c);
      }
      .form-toggle__checkbox input:checked ~ .form-toggle__checkmark::after {
        display: grid;
      }
      .form-toggle__input {
        visibility: hidden;
      }
      .form-toggle__label {
        font-weight: normal;
        font-size: 16px;
      }
      .form-toggle__checkbox-parent {
        display: grid;
        justify-content: start;
        margin-top: 10px;
      }

      .passwordPolicy__group-item {
        display: grid;
        grid-auto-flow: column;
        grid-auto-columns: 1fr;
      }
      .passwordPolicy__box {
        display: grid;
        margin-top: 24px;
        grid-gap: 24px !important;
      }
      .passwordPolicy__p {
        color: var(--color-gray-80, initial);
        font-family: var(--font-main, sans-serif);
        font-size: 16px;
        font-weight: 400;
        display: grid;
        align-items: center;
      }

      .passwordPolicy__item {
        color: var(--color-gray-80, initial);
        font-family: var(--font-main, sans-serif);
        font-size: 16px;
        font-weight: 400;
        display: grid;
        grid-gap: 8px;
        grid: auto / 12px 1fr;
        align-items: center;
        justify-content: start;
      }
      .passwordPolicy__item::before {
        content: '';
        display: inline-grid;
        width: 12px;
        height: 12px;
        align-items: center;
        justify-content: center;
        background-image: url('/sps/public/assets/themes/default_1680512023/assets/img/svg/password-base.svg');
        background-position: center center;
        background-repeat: no-repeat;
        background-size: auto;
      }
      .passwordPolicy__item.good {
        color: var(--color-success-60, initial);
      }
      .passwordPolicy__item.good::before {
        background-image: url('/sps/public/assets/themes/default_1680512023/assets/img/svg/password-good.svg');
      }
      .passwordPolicy__rules-box {
        grid: auto / 1fr 1fr;
        grid-gap: 8px 32px !important;
        justify-content: space-between;
      }
      .passwordPolicy__hidden {
        display: none !important;
      }
      .passwordPolicy__progress-background {
        display: grid;
        width: 100%;
        height: 5px;
        background-color: #e6e6e6;
      }
      .passwordPolicy__progress {
        background-color: var(--color-progress, initial);
        color: red;
        font-weight: 600;
        font-size: 0;
        width: var(--width-password, 100%);
        transition: width 0.299s;
      }
      .passwordPolicy__progress-grid {
        display: grid;
        align-items: center;
        justify-content: stretch;
        grid: auto / 1fr;
        position: relative;
      }
      .passwordPolicy__progress-box {
        grid-gap: unset;
      }

      .passwordPolicy__group {
        display: grid;
        grid-gap: 8px;
      }
      .passwordPolicy__space {
        display: grid;
        grid-gap: 8px;
      }
      .passwordPolicy__info {
        display: grid;
        position: absolute;
        right: 0;
        bottom: -2rem;
        top: auto;
      }

      .formRecovery__verifyDiv .passwordPolicy__progress-box {
        grid-gap: unset;
        margin-top: 8px;
      }
      .formRecovery__verifyDiv .form-login__label + .form-login__label {
        margin-top: 24px;
      }
      .formHook__idLoginFm .form-toggle__checkbox-parent {
        margin-top: unset;
      }

      @media screen and (max-width: 488.99px) {
        .passwordPolicy__rules-box {
          grid: auto / 1fr;
          grid-gap: 8px 32px !important;
          justify-content: start;
        }
      }

    </style>
    <script>
      (() => {
        class ConstructorPasswordPolicy {
          // stateCountGoodRules: number;
          // stateCountRules: number;
          // statePasswordCalculatePower: undefined | number;
          // statePasswordObject: undefined | Record<string, string>;
          // statePasswordScore: number;
          // statePasswordValue: undefined | string;

          // powerName: { empty: number; easy: number; hard: number; excellent: number };
          // dynamicPowerName: { [x: number]: string };
          // dynamicName: {
          //   hasSize: string;
          //   hasNumber: string;
          //   hasUpper: string;
          //   hasLower: string;
          //   qsPower: string;
          //   qsLength: string;
          //   qsInfo: string;
          //   qsProgress: string;
          // };
          // listHtmlName: { [x: number]: { text: string }}[];

          constructor({ inputHook , passwordPolicy }) {
            this.targetInputHook = inputHook ? inputHook : '#password';
            this.targetAttachPasswordPolicy =  passwordPolicy ? `[data-js="${passwordPolicy}"]` : '[data-js="default-parent-hook"]';


            this.stateCountGoodRules = 0;
            this.stateCountRules = 0;
            this.statePasswordCalculatePower = 0;
            this.statePasswordObject = undefined;
            this.statePasswordScore = 0;
            this.statePasswordValue = undefined;
            
            // see progressBar background in css;
            this.powerColors = {
              empty: "#E60C0E",
              easy: "#FEA908",
              hard: "#9AC154",
              excellent: "#03B301",
            };
            this.powerName = {
              empty: 0,
              easy: 24,
              hard: 30,
              excellent: 36,
            };

            this.dynamicPowerName = {
              // [this.powerName.empty]: 'Введите пароль',
              [this.powerName.empty]: '',
              [this.powerName.easy]: 'Слабый',
              [this.powerName.hard]: 'Сложный',
              [this.powerName.excellent]: 'Отличный',
            };

            this.dynamicName = {
              hasSize: 'passInput__hasSize',
              hasNumber: 'passInput__hasNumber',
              hasUpper: 'passInput__hasUpper',
              hasLower: 'passInput__hasLower',

              qsPower: 'passScore__vPower',
              qsLength: 'passScore__vLength',
              qsInfo: 'passScore__vInfo',
              qsProgress: 'passScore__vProgress',
            };

            this.listHtmlName = [
              { [this.dynamicName.hasSize]: { text: 'Не менее 8 символов' }},
              { [this.dynamicName.hasUpper]: { text: 'Заглавные буквы' }},
              { [this.dynamicName.hasNumber]: { text: 'Цифры' }},
              { [this.dynamicName.hasLower]: { text: 'Строчные буквы' }},
            ];
          }

          addClassIf({ selector, className = "good"}) {
            if (selector) {
              if (selector.classList.contains(className)) return false;

              return selector.classList.add(className);
            }
          };

          removeClassIf({ selector, className = "good" }) {
            if (selector) {
              if (!selector.classList.contains(className)) return false;

              return selector.classList.remove(className);
            }
          };
          
          setColorInRoot({ color = "initial", percent = 0 }) {          
            const rootDocument = document.documentElement.style;
            rootDocument.setProperty('--color-progress', String(color));
            rootDocument.setProperty('--width-password', `${percent}%`);

            return String(percent);
          };

          calculateColorAndText({inputLength, inputString}) {
            const allRules = this.stateCountRules;
            const goodRules = this.stateCountGoodRules;
            const bool = Boolean(goodRules >= allRules);
            
            const score = this.statePasswordScore;
            // console.log(`[score] `, `<${typeof score}>`, score)

            if (score <= this.powerName.empty) {
              this.calculateScoreKey = this.dynamicPowerName[Number(score)];
              this.calculateScoreValue = score;
              
              // console.log(`[LOG] this.calculateScoreValue`, `<${typeof this.calculateScoreValue}>`, this.calculateScoreValue)
                // console.log(`[LOG] this.calculateScoreKey`, `<${typeof this.calculateScoreKey}>`, this.calculateScoreKey)
              return this.powerName.empty;
            }
            
            const B = (power) => this.powerName.easy;
            const A = (power) => {
              // console.log(`[LOG] power`, `<${typeof power}>`, power)
              if (power >= this.powerName.excellent) return this.powerName.excellent;
              if (power >= this.powerName.hard) return this.powerName.hard;
              if (power >= this.powerName.easy) return this.powerName.easy;
              if (power >= this.powerName.empty) return this.powerName.empty;
            }

            const calculate = bool ? A(score) : B(score);
            this.calculateScoreKey = this.dynamicPowerName[Number(calculate)];
            // console.log(`[LOG] this.calculateScoreKey`, `<${typeof this.calculateScoreKey}>`, this.calculateScoreKey)
            
            this.calculateScoreValue = calculate ;
            // console.log(`[LOG] this.calculateScoreValue`, `<${typeof this.calculateScoreValue}>`, this.calculateScoreValue)
            
            return calculate;
          }
          
          
          choicePower({inputLength, inputString}) {
            const passwordString = inputLength;
            const passwordValue = inputString;
            let passwordCounter = 0;

            if (passwordString <= 0) {
              this.statePasswordScore = passwordCounter;
              return 0;
            }

            if (passwordString === 1) passwordCounter = 4;
            else if (passwordString < 9) passwordCounter = 4 + (passwordString - 1) * 2;
            else if (passwordString < 21) passwordCounter = 18 + (passwordString - 8) * 1.5;
            else passwordCounter = 36 + (passwordString - 20) * 1; 
            
            const rule = /[A-ZА-Я].*[\W\d]/gs.test(passwordValue);
            const ruleRevers = /[\W\d].*[A-ZА-Я]/gs.test(passwordValue);
            const bonus = [rule, ruleRevers].some(Boolean);

            
            if (bonus) passwordCounter += 6;

            this.statePasswordScore = passwordCounter;
            return passwordCounter;
          };

          // eslint-disable-next-line sonarjs/cognitive-complexity
          // choiceText = () => this.calculateScoreKey;

          choiceProgress(target) {
            const selector = document.querySelector(`[data-js="${target}"]`);
            if (!selector) return false;
            
            const allRules = this.stateCountRules;
            const goodRules = this.stateCountGoodRules;
            const bool = Boolean(goodRules >= allRules);

            const score = this.calculateScoreValue ? this.calculateScoreValue : 0;
            // console.log(`[statePasswordCalculatePower] score`, `<${typeof score}>`, score)
            
            if (score <= this.powerName.empty) return this.setColorInRoot({ color: this.powerColors.empty, percent: 0 });

            const A = (power) => {
              if (score >= this.powerName.excellent) return this.setColorInRoot({ color: this.powerColors.excellent, percent: 100 });
              if (score >= this.powerName.hard) return this.setColorInRoot({ color: this.powerColors.hard, percent: 75 });
              if (score >= this.powerName.easy) return this.setColorInRoot({ color: this.powerColors.easy, percent: 50 });
            }
            const B = (power) => this.setColorInRoot({ color: this.powerColors.empty, percent: 25 });
            
            const test = Boolean(bool && (score >= this.powerName.easy));
            return test ? A(score) : B(score);
            
          };

          toggleClass({ target, typeRule }) {
            const selector = document.querySelector(target);
            if (selector) typeRule ? this.addClassIf({ selector }) : this.removeClassIf({ selector });
          };

          runnerScore({ target, typeRule }) {
            const selector = document.querySelector(target);
            if (selector) selector.textContent = typeRule;
          };

          controllerTyping(event) {
            if (['Space'].includes(event.code)) return event.preventDefault();
          };

          convertTemplateToString(listTemplate) {
            return listTemplate.reduce((accumulator, { template }) => {
              accumulator += template;
              return accumulator;
            }, '');
          };

          renderHtml(getListTemplateHTml) {
            
            const selector = document.querySelector(this.targetAttachPasswordPolicy);
              if (selector) {
                const _tmp1 = `
                  <div class="passwordPolicy__box">
                    <div class="passwordPolicy__group">
                      <p class="passwordPolicy__p">Пароль должен содержать:</p>
                      <div class="passwordPolicy__group-item passwordPolicy__rules-box">${getListTemplateHTml}</div>
                    </div>
                  </div>`.trim();
                  
                selector.insertAdjacentHTML('afterend', _tmp1);
              }
              
            
            const extraSelector = document.querySelector(this.targetInputHook);
              if (extraSelector) {
                const _tmp2 = `
                  <div class="passwordPolicy__group passwordPolicy__progress-box">
                    <div class="passwordPolicy__group-item passwordPolicy__progress-grid">
                      <div class="passwordPolicy__progress-background"><div class="passwordPolicy__progress" data-js="${this.dynamicName.qsProgress}">__0__</div></div>
                      <div class="passwordPolicy__info" data-js="${this.dynamicName.qsInfo}">${this.dynamicPowerName[0]}</div>
                    </div>
                  </div>`.trim();
                  
                extraSelector.insertAdjacentHTML('afterend', _tmp2);
              }
          };

          templateHtml(enterData) {
            return enterData.reduce((accumulator, f, index) => {
              const _key = Object.keys(f);
              const [_value] = Object.values(f);
              accumulator[index] = {
                ..._value,
                template: `<div class="passwordPolicy__item" data-js="${_key}">${_value.text}</div>`.trim(),
              };

              return accumulator;
            }, []);
          };

          listKeysToTemplate(list) {
            return list.reduce((accumulator, f, index) => {
              const _key = Object.keys(f);
              const [_value] = Object.values(f);
              accumulator[index] = {
                [_key]: {
                  target: `[data-js="${_key}"]`,
                  text: _value.text,
                },
              };
              return accumulator;
            }, []);
          };

          attachRulesToScore(list) {
            return list.map((f) => ({
              ...f,
              target: `[data-js="${f.name}"]`,
            }));
          };

          attachRulesToTemplate({ templateList, templateRules }) {
            return templateList.map((f) => {
              const [_key] = Object.keys(f);
              const [_value] = Object.values(f);

              const { ruleTest } = templateRules.find((g) => g.name === _key) || false;
              return { ..._value, ruleTest };
            });
          };
          
          clearMyPassword(event, pass = '') {
            event.preventDefault();
            
            const clearFirst = pass.trim();
            const clearSecond = clearFirst.replace(/[\n\t\r ]/g, "");

            return clearSecond;
          }
          
          handlerTyping(event, templateList, paste = {}) {
            const enterPassword = paste && paste.pasteValue ? paste.pasteValue : String(event.target.value) || undefined;
            const clearedPass = this.clearMyPassword(event, enterPassword);
            
            const inputString = clearedPass;
            const inputLength = clearedPass && clearedPass.length ? clearedPass.length : 0;

            event.target.value = clearedPass;

    
            // dynamic Code - don't move!
            const templateRules = [
              {
                name: this.dynamicName.hasSize,
                ruleTest: inputString && inputString.length ? inputString.length >= 8 : undefined,
              },
          
              {
                name: this.dynamicName.hasNumber,
                ruleTest: /\d/.test(inputString),
              },
              {
                name: this.dynamicName.hasUpper,
                ruleTest: /[A-ZА-Я]/.test(inputString),
              },
              {
                name: this.dynamicName.hasLower,
                ruleTest: /[a-zа-я]/.test(inputString),
              },
            ];

            const _listDataEnter = this.attachRulesToTemplate({ templateList, templateRules });
            if (_listDataEnter) {
              this.stateCountRules = _listDataEnter.length;
              this.stateCountGoodRules = _listDataEnter.filter((f) => f.ruleTest).length;
            }
            for (const { target, ruleTest } of _listDataEnter) this.toggleClass({ target, typeRule: ruleTest });

            
            
            this.choicePower({inputLength, inputString});
            this.calculateColorAndText({inputLength, inputString});
            
            // dynamic Code - don't move!
            const scoreRules = [
              {
                name: this.dynamicName.qsLength,
                ruleScore: inputLength,
              },
              {
                name: this.dynamicName.qsPower,
                ruleScore:  this.calculateScoreValue,
              },
              {
                name: this.dynamicName.qsInfo,
                ruleScore:  this.calculateScoreKey,
              },
              {
                name: this.dynamicName.qsProgress,
                ruleScore: this.choiceProgress(this.dynamicName.qsProgress),
              },
            ];

            const _listRuleScore = this.attachRulesToScore(scoreRules);
            for (const { target, ruleScore } of _listRuleScore) this.runnerScore({ target, typeRule: ruleScore });
            
            return clearedPass;
          };

          buildFirstRender() {
            const setupEnterData = this.listKeysToTemplate(this.listHtmlName);
            const getListTemplateHTml = this.templateHtml(setupEnterData);
            const stringTemplate = this.convertTemplateToString(getListTemplateHTml);

            this.renderHtml(stringTemplate);
            this.choiceProgress(this.dynamicName.qsProgress);
            return setupEnterData;
          };

          
          pasteClipboard(event, templateList) {
            // console.log(`[event] event`, `<${typeof event}>`, event)
            // console.log(`[clipboardData] event`, `<${typeof event}>`, event.clipboardData)
            // console.log(`[target] event`, `<${typeof event}>`, event.target.value)
            // console.log(`[getData] event`, `<${typeof event}>`, event.clipboardData.getData('text/plain'))
            
            const executeText = event.clipboardData.getData('text/plain');
            
            
            // event.preventDefault();
            return this.handlerTyping(event, templateList, { pasteValue: executeText });
            
          }
          
          attachHandlers(templateList) {
            const input = document.querySelector(this.targetInputHook);
            // console.log(input);
            if (input) {
              input.addEventListener('keydown', (event) => this.controllerTyping(event));
              input.addEventListener('keyup', (event) => this.handlerTyping(event, templateList));
              input.addEventListener('paste', (event) => this.pasteClipboard(event, templateList));
            }
          };

          go() {
            const templateList = this.buildFirstRender();
            this.attachHandlers(templateList);
          }
        }

    

        
        
        
        class PasswordCheckbox {
          // inputPassword: HTMLInputElement;
          // inputPasswordRepeat: HTMLInputElement;
          // iconPassword: HTMLInputElement;
          // iconPasswordRepeat: HTMLInputElement;

          // dataAttrLabelToggle: string;
          // selectorLabelToggle: HTMLElement;
          // dataAttrParentElement: string;
          // selectorParentElement: HTMLElement;

          // labelText: string;
          // fakeID: number;
          // inputType: Record<string, string>;
          // listLabel: string[];
          // boolProgressBar: boolean;

          constructor(init = {}) {
            this.inputPassword = document.querySelector(init.password);
            this.inputPasswordRepeat = document.querySelector(init.passwordRepeat);
            this.iconPassword = document.querySelector(init.iconPassword);
            this.iconPasswordRepeat = document.querySelector(init.iconPasswordRepeat);
            
            this.dataAttrLabelToggle = init.dataAttrLabelToggle ? init.dataAttrLabelToggle : "default-toggle-password";
            this.selectorLabelToggle = undefined; // not created yet
            
            this.dataAttrParentElement = init.dataAttrParentElement ? init.dataAttrParentElement : "default-parent-hook";
            this.selectorParentElement = undefined; // not created yet
            
            this.labelText = 'Показать пароль';
            this.fakeID = new Date().getMilliseconds();
            this.inputType = { A: 'password', B: 'text' };
            this.listLabel = ['LABEL', 'SPAN'];
            
            
            this.boolProgressBar = init.progressBar ? init.progressBar : false;
            this.progressBarID = init.progressBar ? init.progressBarID : false;
          }

          removeIcon({ target, propParent: propertyParent = true }) {
            if (target) propertyParent ? target.parentElement.remove() : target.remove();
          }

          renderCheckbox({ target }) {
            if (target) {
              const template = `
                  <div class="form-toggle__checkbox-parent" data-js="${this.dataAttrParentElement}" >
                    <label class="form-toggle__checkbox form-toggle__label" data-js="${this.dataAttrLabelToggle}" id="id-form-toggle-label-${this.fakeID}">${this.labelText}
                      <input class="form-toggle__input" type="checkbox" name="checkbox-toggle" for="id-form-toggle-label-${this.fakeID}" />
                      <span class="form-toggle__checkmark"></span>
                    </label>
                  </div>`.trim();

              target.parentElement.insertAdjacentHTML('afterend', template);
              this.selectorLabelToggle = document.querySelector(`[data-js=${this.dataAttrLabelToggle}]`);
              this.selectorParentElement = document.querySelector(`[data-js=${this.dataAttrParentElement}]`);
            }
          }

          toggleType({ f, type }) {
            return f.setAttribute('type', type);
          }

          handlerClickCheckbox(event) {
            if (this.listLabel.includes(event.target.tagName)) return;

            const list = [this.inputPassword, this.inputPasswordRepeat];
            for (const f of list) {
              if (f) {
                f.type === this.inputType.A
                  ? this.toggleType({ f, type: this.inputType.B })
                  : this.toggleType({ f, type: this.inputType.A });
              }
            }
          }

          clickCheckbox({ target }) {
            if (target) {
              target.addEventListener('click', (event) => this.handlerClickCheckbox(event));
            }
          }

          enableProgressBar() {
            this.boolProgressBar = true;
          }

          renderProgressBar({target, passwordPolicy}) {
            const conf = { inputHook: target, passwordPolicy };
            const passPolicy = new ConstructorPasswordPolicy(conf);
            passPolicy.go();
          }

          go() {
            for (const f of [this.iconPassword, this.iconPasswordRepeat]) {
              this.removeIcon({ target: f });
            }

            // first render element
            this.renderCheckbox({
              target: this.inputPasswordRepeat ? this.inputPasswordRepeat : this.inputPassword,
            });

            if (this.boolProgressBar) {
              this.renderProgressBar({
                target: this.progressBarID,
                passwordPolicy: this.dataAttrParentElement
              });
            }

            this.clickCheckbox({ target: this.selectorLabelToggle });
          }
        }
        // ---

        const runConstructor = ({ name, validateMe, payload = {}}) => {
          if (validateMe) {
            const page = document.querySelector(validateMe.selector);
            const input = document.querySelector(validateMe.input);
            const bool = [page, input].every(Boolean);

            if (!bool) return false;



            const config = {
              password: '#password',
              passwordRepeat: '#repeat-password',
              iconPassword: '#show_password',
              iconPasswordRepeat: '#repeat-show_password',
              dataAttrLabelToggle: 'form-toggle-password',
              dataAttrParentElement: 'form-toggle-password-parent',
              ...payload,
            };

            const Checkbox = new PasswordCheckbox(config);
            Checkbox.go();
          }
        };

        const run = () => {
          runConstructor({
            name: 'loginFm',
            validateMe: {
              selector: '#loginFm',
              input: '#password',
            },
            payload: {
              password: '#password',
              passwordRepeat: '#repeat-password',
              iconPassword: '#show_password',
              iconPasswordRepeat: '#repeat-show_password',
            },
          });

          runConstructor({
            name: 'regPage',
            validateMe: {
              selector: '#regFm',
              input: '#password',
            },
            payload: {
              progressBar: true,
              password: '#password',
              passwordRepeat: '#repeat-password',
              iconPassword: '#show_password',
              iconPasswordRepeat: '#repeat-show_password',
            },
          });

          runConstructor({
            name: 'altPswdFm',
            validateMe: {
              selector: '#altPswdFm',
              input: '#newPassword',
            },
            payload: {
              progressBar: true,
              progressBarID: '#newPassword',
              password: '#newPassword',
              passwordRepeat: '#newPassword2',
            },
          });
          runConstructor({
            name: 'pswdFm',
            validateMe: {
              selector: '#pswdFm',
              input: '#pswd',
            },
            payload: {
              progressBar: true,
              progressBarID: '#pswd',
              password: '#pswd',
              passwordRepeat: '#repeatPswd',
            },
          });
        };

        document.addEventListener('DOMContentLoaded', () => run());
      })();
    </script>
    
  
    
    <style>
      
      /* stylelint-disable property-no-vendor-prefix */
      /* stylelint-disable selector-id-pattern */
      /* stylelint-disable selector-class-pattern */

      .formHook__idLoginFm .top {
        display: grid;
        grid-auto-flow: column;
        align-items: center;
        justify-content: space-between;
      }
      .formHook__idLoginFm .page-title {
        margin: unset;
        font-family: var(--font-main, sans-serif);
        font-weight: 700;
        font-size: 32px;
        line-height: normal;
        color: var(--color-black, initial);
      }

      .formHook__idLoginFm :where(:not(#processing)) a {
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        line-height: normal;
        color: var(--color-blue-60, #04c);
      }
      .formHook__idLoginFm .incognito-btn {
        text-decoration: none;
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        line-height: normal;
        color: var(--color-blue-60, #04c);
      }
      .formHook__idLoginFm .incognito-btn:hover {
        color: var(--color-blue-60, #04c);
      }

      .formHook__idLoginFm .form-vertical .control-label {
        padding: unset;
      }
      .formHook__idLoginFm .mForm {
        margin-top: 40px;
      }
      .formHook__idLoginFm label {
        font-family: var(--font-main, sans-serif);
        font-weight: 600;
        font-size: 16px;
        line-height: normal;
        color: var(--color-gray-90, initial);
      }
      .formHook__idLoginFm .form-vertical .form-input {
        display: grid;
        margin: unset;
        padding: unset;
      }

      .formHook__idLoginFm input:not([type='checkbox']) {
        background-color: var(--color-null, initial);
        border: 1px solid var(--color-gray-30, #c4c8d0);
        border-radius: 4px;
        color: var(--color-gray-90, initial);
        display: grid;
        font-family: var(--font-main, sans-serif);
        font-size: 16px;
        font-weight: 400;
        height: unset;
        line-height: 24px;
        max-height: 48px;
        padding: 12px 16px;
        width: 100%;
        transition: border-color 0.123s;
      }

      .formHook__idLoginFm input:focus {
        border-color: var(--color-blue-30, initial);
        box-shadow: 0 0 0 3px var(--color-blue-30, initial);
      }
      .formHook__idLoginFm input:hover {
        border-color: var(--color-blue-30, initial);
      }
      .formHook__idLoginFm .methods-sep span {
        background-color: var(--color-white, #fff);
        color: var(--color-gray-60, initial);
        display: grid;
        font-family: var(--font-main, sans-serif);
        font-size: 14px;
        font-weight: 400;
        padding: 0 8px;
        position: relative;
        align-items: center;
        justify-content: center;
        line-height: normal;
        height: auto;
      }
      .formHook__idLoginFm .help-block {
        display: none;
      }
      .formHook__idLoginFm .help-block.filled {
        display: block;
        position: relative;
        margin: 0;
      }
      .formHook__idLoginFm .help-block.filled span {
        color: var(--color-error-60, crimson);
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        line-height: 24px;
      }

      .formHook__idLoginFm ::placeholder {
        color: var(--color-null, initial);
      }
      .formHook__idLoginFm #bind {
        margin: unset;
      }
      .formHook__idLoginFm .form-group__recovery {
        display: grid;
        grid-auto-flow: column;
        align-items: center;
        grid-auto-columns: 1fr;
      }
      .formHook__idLoginFm .form-toggle__checkbox {
        font-weight: 400;
        color: var(--color-gray-90, initial);
      }
      .formHook__idLoginFm .form-login__label {
        display: grid;
        grid-gap: 8px;
      }
      .formHook__idLoginFm #loginDv ~ .form-login__label {
        margin-top: 24px;
      }
      .formHook__idLoginFm .form-group__recovery:has(.form-group) {
        margin-top: 16px;
      }
      .formHook__idLoginFm #recoveryEnter {
        display: grid;
        align-items: center;
        justify-content: end;
      }
      .formHook__idLoginFm .form-login__recovery-space {
        margin-top: 16px;
      }
      .form-toggle__checkbox-parent.form-login__recovery-space {
        margin-top: 8px;
      }
      
        
      .formHook__idLoginFm #processing [role=button],
      .formHook__idLoginFm .form-login__submit {
        align-items: center;
        background-color: var(--color-blue-60, #04c);
        border-color: #0000;
        border-radius: 4px;
        border: 0;
        color: var(--color-white, #fff);
        display: grid;
        font-family: var(--font-main, sans-serif);
        font-size: 16px;
        font-weight: 400;
        justify-content: center;
        line-height: 24px;
        margin-top: 48px;
        opacity: 1;
        padding: 12px 32px;
        user-select: none;
        transition: background-color 0.123s;
        position: relative;
        overflow: hidden;
      }
      .formHook__idLoginFm .form-login__submit:hover {
        background-color: var(--color-blue-70, #04c);
        color: var(--color-white, #fff);
      }
      .formHook__idLoginFm .form-login__submit:focus {
        background-color: var(--color-blue-60, #04c);
        color: var(--color-white, #fff);
      }
      .formHook__idLoginFm .form-login__submit:active {
        background-color: var(--color-blue-80, #04c);
        color: var(--color-white, #fff);
      }

      .formHook__idLoginFm .methods-sep {
        display: grid;
        align-items: center;
        justify-content: center;
        margin: 32px 0 0;
        position: relative;
      }
      .formHook__idLoginFm .methods-sep::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        display: inline-grid;
        width: 100%;
        height: 1px;
        background-color: var(--color-gray-20, initial);
        transform: translate(-50%, -50%);
        border: 0;
      }

      .formHook__idLoginFm .methods-header {
        margin-top: 24px;
        font-family: var(--font-main, sans-serif);
        font-weight: 600;
        font-size: 16px;
        line-height: 20px;
        color: var(--color-gray-90, initial);
      }
      .formHook__idLoginFm .methods-switcher {
        margin-top: 16px;
      }

      /* HACK */
      .formHook__idLoginFm #bind.form-login__submit {
        margin-top: 48px;
        grid-auto-flow: column;
        grid-gap: 1rem;
      }

      /* INPUT */
      .formHook__idLoginFm .has-error .form-control {
        box-shadow: unset;
        border-color: var(--color-error-60, crimson);
      }
      .formHook__idLoginFm .has-success .form-control {
        box-shadow: unset;
        border-color: var(--color-gray-30, #c4c8d0);
      }
      .formHook__idLoginFm .has-success .form-control:focus {
        border-color: var(--color-blue-30, initial);
        box-shadow: 0 0 0 3px var(--color-blue-30, initial);
      }

      .formHook__idLoginFm #htotpFm .form-group input {
        margin-top: 24px;
      }
      .formHook__idLoginFm #htotpFm .form-group input#otp {
        margin-top: unset;
      }

      /* LABEL */
      .formHook__idLoginFm .has-error .control-label {
        color: var(--color-gray-90, initial);
      }
      .formHook__idLoginFm .has-success .control-label {
        color: var(--color-gray-90, initial);
      }

      .formHook__idLoginFm .auth-login {
        display: grid;
        grid-gap: 24px;
      }
      .formHook__idLoginFm #loginFm .formRecovery__warn-info {
        margin-top: 24px;
      }
      

      .formHook__idLoginFm .methods-wrapper__space {
        margin-top: 64px;
        margin-bottom: 24px;
      }

      @media screen and (max-width: 499.99px) {
        .formHook__idLoginFm .page-title {
          font-size: 26px;
          line-height: normal;
        }
        .formHook__idLoginFm #bind.form-login__submit {
          margin-top: 32px;
        }
      }

      @media screen and (max-width: 425.99px) {
        .formHook__idLoginFm .form-group__recovery {
          grid-auto-flow: row;
          grid-gap: 16px;
        }
        .formHook__idLoginFm #recoveryEnter {
          justify-content: start;
        }
        .formHook__idLoginFm .page-title {
          font-size: 26px;
        }
        .formHook__idLoginFm .top {
          align-items: baseline;
        }
      }

    </style>
    <script>
      
      (() => {
        const runner = {
          killClasList({ list = [''] }) {
            if (Array.isArray(list) && list.some(Boolean)) {
              for (const f of list) {
                const items = [...document.querySelectorAll(`.${f}`)];
                return items.find((x) => x.classList.remove(f));
              }
            }
          },
          methodSMS({ hook }) {
            hook.classList.add('formQrCode__qrc-code-active');
            runner.killClasList({ list: ['mb20', 'mt25', 'mb30'] });

            setTimeout(() => {
              const warnInfo = hook.querySelector('.formRecovery__warn-info');
              if (warnInfo) warnInfo.classList.add('space');
            }, 100);
          },

          addStyleTitleDesc({ selector }) {
            // !!! need return boolean answer
            if (selector) selector.classList.add('formHook__style');
            return Boolean(selector);
          },

          removeStaticClassCode({ hook, className }) {
            const list = hook.querySelectorAll(`.${className}`);
            for (const f of list) f.classList.remove(className);
          },

          attachTogglePasswordSelector({ hook }) {
            const list = hook.querySelectorAll('[class^="col-"]');
            for (const f of list) {
              f.className = 'form-group__recovery';
              f.dataset.js = 'form-toggle-password';
            }
          },

          moveTogglePasswordToRecovery({ target, moveMe }) {
            if (target && target.firstChild) return target.firstChild.before(moveMe);
          },

          classListSelectRule({ target, attachToParent = false, className }) {
            if (!target) return;
            
            return attachToParent ? target.parentElement.classList.add(className) : target.classList.add(className);
          },

          addClassToElement(objectProps) {
            const { target } = objectProps;

            if (target instanceof NodeList) {
              for (const f of target) runner.classListSelectRule({ ...objectProps, target: f });
            } else runner.classListSelectRule(objectProps);
          },
        };

        const rippleEffect = () => {
          /** ***************
              * RIPPLE EFFECT 
              * ***************
              * 
              * 
              * const insertStyle = (element, style) => {
                for (const property in style) element.style[property] = style[property];
              };

              const calcPosition = (eventTarget, parentEvent) => {
                const child = eventTarget.querySelector(".ripple");
                const diameter = Math.max(parentEvent.clientWidth, parentEvent.clientHeight);

                const parentLeft = parentEvent.offsetX;
                const parentTop = parentEvent.offsetY;

                const elementHeight = `${diameter}px`;
                const elementWidth = `${diameter}px`;
                const elementLeft = `${parentLeft}px`;
                const elementTop = `${parentTop}px`;


                insertStyle(child, {
                  height: elementHeight,
                  width: elementWidth,
                  left: elementLeft,
                  top: elementTop
                });
              };

              const createRippleElement = (eventTarget, parentEvent) => {
                const ripple = eventTarget.querySelector(".ripple");
                if (ripple) ripple.remove();

                eventTarget.insertAdjacentHTML("beforeend", `<span class="ripple"></span>`);
                calcPosition(eventTarget, parentEvent);
              };

              const createRipple = (event) => {
                const parentEvent = event;
                const eventTarget = event.target;

                if (eventTarget.classList.contains("ripple")) {
                  return createRippleElement(eventTarget.parentElement, parentEvent);
                }
                return createRippleElement(eventTarget, parentEvent);
              };

              const blueButton = document.querySelector('#loginFm #bind');
              console.log(`[LOG] blueButton`, `<${typeof blueButton}>`, blueButton)
              if (blueButton && blueButton.textContent) {
                blueButton.textContent = blueButton.textContent.trim();
                blueButton.addEventListener('click', (event) => createRipple(event));
              }

            */
        };

        const hasFoundLoginForm = () => {
          const selector = {
            titleDesc: document.querySelector('[data-js=append-title-desc]'),
          };

          // create a hook to manipulate the DOM tree
          const hookInstalled = runner.addStyleTitleDesc({ selector: selector.titleDesc });

          if (hookInstalled) {
            const hook = document.querySelector('.formHook__style');

            const staticClassList = ['pb15', 'text-right', 'text-left', 'text-center', 'hide'];
            for (const f of staticClassList) runner.removeStaticClassCode({ hook, className: f });

            const targetSubmitButton = hook.querySelector('#bind');
            if (targetSubmitButton) {
              const _classList = targetSubmitButton.classList;
              _classList.remove(..._classList);
            }

            runner.attachTogglePasswordSelector({ hook });

            runner.moveTogglePasswordToRecovery({
              target: document.querySelector('.form-group__recovery'),
              moveMe: document.querySelector('.form-toggle__checkbox-parent'),
            });

            if (hook.querySelector('#loginFm')) {
              runner.addClassToElement({
                target: hook,
                attachToParent: false,
                className: 'formHook__idLoginFm',
              });
            }

            const listMixClasses = [
              {
                target: hook.querySelectorAll('label:not([data-js])'),
                attachToParent: true,
                className: 'form-login__label',
              },
              {
                target: hook.querySelector('[data-js="form-toggle-password"]'),
                attachToParent: true,
                className: 'form-login__recovery-space',
              },
              {
                target: hook.querySelector('button[type="button"]'),
                className: 'form-login__submit',
              },
            ];
            for (const f of listMixClasses) runner.addClassToElement(f);

            const listQuery = ['#loginFm', '#showOtherMethodsBtn', '.incognito-hide'];
            const stateFindExtraButtons = listQuery.every((f) => hook.querySelector(f));
            if (stateFindExtraButtons) runner.methodSMS({ hook });
          }
        };

        const emptyLoginForm = (target) => {
         const selector = document.querySelector('[data-js=append-title-desc]')
          // create a hook to manipulate the DOM tree
          const hookInstalled = runner.addStyleTitleDesc({ selector });
          
          if (hookInstalled) {
            const hook = document.querySelector('.formHook__style');
            
            runner.addClassToElement({
              target: hook,
              className: 'formHook__idLoginFm',
            });
            
             const prefix = `.formHook__idLoginFm ${target}`;
             const listBlackFields = [
              `${prefix} ~ .mForm`,
              `${prefix} ~ [class^='methods-wrapper'] > .methods-header`,
              `${prefix} ~ [class^='methods-wrapper'] > .methods-sep`,
             ]
             
              for (const f of listBlackFields) {
                const item = document.querySelector(f);
                if (item) item.remove();
              }
              
              runner.addClassToElement({
                target: document.querySelector(`${prefix} ~ [class^='methods-wrapper']`),
                className: "methods-wrapper__space",
              });
             
          }
        };

        const preProtectForm = () => {
          const target = '#secret-form-loginfm'
          const selector = document.querySelector(target);

          if (selector) return emptyLoginForm(target);
          return hasFoundLoginForm();
        };

        const run = () => {
          preProtectForm();
        };

        document.addEventListener('DOMContentLoaded', () => run());
      })();

    </script>
    
  
    
    <style>
      
      /* stylelint-disable property-no-vendor-prefix */
      /* stylelint-disable selector-id-pattern */
      /* stylelint-disable selector-class-pattern */

      .formHook__idLoginFm .formFooter__main {
        display: grid;
        grid-gap: 16px;
        position: relative;
      }
      .formHook__idLoginFm .formFooter__box {
        display: grid;
        grid-auto-flow: row;
        grid-gap: 16px;
      }
      .formHook__idLoginFm .formFooter__column {
        display: grid;
        grid-auto-flow: column;
        grid-gap: 16px;
      }
      .formHook__idLoginFm .formFooter__column--list {
        grid: auto / 1fr;
      }

      .formHook__idLoginFm .formFooter__column--disabled {
        display: none;
      }
      .formHook__idLoginFm .formFooter__column--single {
        grid: minmax(auto, 48px) / 1fr;
      }
      .formHook__idLoginFm .formFooter__column--double {
        grid: minmax(auto, 48px) / 1fr minmax(auto, 48px);
      }
      .formHook__idLoginFm .formFooter__column--triple {
        grid: minmax(auto, 48px) / 1fr 1fr minmax(auto, 48px);
      }
      .formHook__idLoginFm .formFooter__column--triple-fix {
        grid: minmax(auto, 48px) / 1fr 1fr;
      }
      .formHook__idLoginFm .formFooter__column--double-fix {
        grid: minmax(auto, 48px) / 1fr 1fr;
      }
      .formHook__idLoginFm .formFooter__column--other {
        grid: minmax(auto, 48px) / 1fr 1fr minmax(auto, 48px) minmax(auto, 48px);
      }
      .formHook__idLoginFm .formFooter__row {
        display: grid;
        grid-auto-flow: row;
        grid-row: auto;
        grid-gap: 16px;
      }
      .formHook__idLoginFm .formFooter__row:empty {
        display: none;
      }

      .formHook__idLoginFm .formFooter__button {
        display: grid;
        border: 1px solid var(--color-gray-30, #c4c8d0);
        border-radius: 4px;
        align-items: center;
        justify-content: center;
        line-height: normal;
        padding: 11px;
        user-select: none;
        text-decoration: none;
        color: var(--color-gray-90, initial);
        font-size: 16px;
        text-transform: unset;
        overflow: hidden;
        transition: padding 0.123s;
      }

      .formHook__idLoginFm .formFooter__button:hover {
        background-color: var(--color-cursor-hover, initial);
      }
      .formHook__idLoginFm .formFooter__button:active {
        background-color: var(--color-cursor-active, initial);
      }
      .formHook__idLoginFm .formFooter__button:focus {
        box-shadow: 0 0 0 3px var(--color-cursor-focus, initial);
      }

      .formHook__idLoginFm .formFooter__button img {
        pointer-events: none;
        user-select: none;
        width: auto;
        height: 24px;
      }

      .formHook__idLoginFm a.formFooter__button--decoration {
        text-decoration: none;
        color: var(--color-gray-90, initial);
        font-size: 16px;
        text-transform: unset;
        padding: 12px 32px;
      }
      .formHook__idLoginFm a.formFooter__button--decoration:hover {
        text-decoration: none;
      }

      .formHook__idLoginFm .formFooter__teleport {
        display: none;
        position: absolute;
        top: auto;
        left: auto;
        right: -8px;
        bottom: 110%;
        width: auto;
        max-width: 354px;
        transition: max-width 0.123s;
      }
      .formHook__idLoginFm .formFooter__teleport.formFooter__teleport--active {
        display: grid;
      }

      .formHook__idLoginFm .formFooter__toggle {
        line-height: normal;
        color: var(--color-gray-90, initial);
        cursor: pointer;
        transition: border-color ease 0.123s;
      }
      .formHook__idLoginFm .formFooter__toggle:hover {
        background-color: var(--color-cursor-hover, initial);
      }
      .formHook__idLoginFm .formFooter__toggle:active {
        background-color: var(--color-cursor-active, initial);
      }

      .formHook__idLoginFm .formFooter__toggle--color {
        box-shadow: 0 0 0 3px var(--color-cursor-focus, initial);
        border-color: var(--color-cursor-focus, initial);
      }

      .formHook__idLoginFm .formFooter__social {
        display: flex;
        flex-wrap: wrap;
        grid-gap: 8px;
        gap: 8px;
        border: 1px solid var(--color-gray-20, initial);
        background-color: #fff;
        box-shadow: 0 4px 12px rgb(0 20 67 / 12%);
        border-radius: 4px;
        padding: 12px;
      }

      .formHook__idLoginFm .formFooter__icon {
        flex: 0 1 auto;
        width: 48px;
        height: 48px;
        transition: background-color 0.123s;
        cursor: pointer;
      }

      .formHook__idLoginFm .formFooter__icon:hover {
        background-color: var(--color-cursor-hover, initial);
      }
      .formHook__idLoginFm .formFooter__icon:active {
        background-color: var(--color-cursor-active, initial);
      }
      .formHook__idLoginFm .formFooter__icon:focus {
        box-shadow: 0 0 0 3px var(--color-cursor-focus, initial);
      }

      .formHook__idLoginFm .social-methods-wrapper-disable {
        display: none;
      }
      .formHook__idLoginFm .formIncognita__text {
        margin-top: 32px;
        color: var(--color-gray-60, initial);
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 12px;
        line-height: 20px;
        text-align: center;
      }
      .formHook__idLoginFm .adaptive-group {
        display: grid;
        grid-auto-flow: column;
        align-items: center;
        justify-content: center;
        grid-gap: 8px;
        pointer-events: none;
        user-select: none;
      }

      #other-user:empty {
        border: 1px solid;
        border-color: var(--color-gray-30, #c4c8d0);
        border-radius: 4px;
        min-height: 66px;
      }
      
      
      .formHook__idLoginFm .formFooter__social .adaptive-group span {
        display: none;
      }
      .formHook__idLoginFm .formFooter__row a.formFooter__button--decoration {
        padding: 12px;
      }
      
      .formHook__idLoginFm .other .icon-replacer {
        display: none;
      }
      .formHook__idLoginFm .other .icon-replacer.adaptive {
        display: block;
      }
      
      .formHook__idLoginFm .favorite .icon-replacer {
        display: block;
        width: auto;
        height: 24px;
      }
      .formHook__idLoginFm .favorite .icon-replacer.adaptive {
        display: none;
      }
      
      @media screen and (max-width: 599.99px) {
        .formHook__idLoginFm .formFooter__button {
        }
        .formHook__idLoginFm .adaptive-group span {
          display: none;
        }
      }
      @media screen and (max-width: 430.99px) {
        .formHook__idLoginFm .formFooter__teleport {
          max-width: 242px;
        }
        .formHook__idLoginFm .favorite .icon-replacer {
          display: none;
        }
        .formHook__idLoginFm .favorite .icon-replacer.adaptive {
          display: block;
        }
      }

    </style>
    <script>
    (() => {
      const jsButtonHeader = '[data-js="group-button-header"]';
      
      class Helper {
        renameWrapperClass({ target, from, to }) {
          if (target && target.classList.contains(from)) {
            const cache = target.className;
            return (target.className = cache.replace(from, to));
          }
          return false;
        }

        deleteElement({ target }) {
          if (target) {
            if (Array.isArray(target) && target.every(Boolean)) {
              return [...target].map((f) => f.remove());
            }
            if (!Array.isArray(target)) return target.remove();
          }
          return false;
        }

        moveHrefToGridGroup({ parent, moveMe }) {
          if (parent && parent.firstChild) {
            return parent.firstChild.before(moveMe);
          }
        }

        moveHrefToSingle({ parent, moveMe }) {
          if (parent) return parent.append(moveMe);
        }

        attachClass({ target, addClass }) {
          if (target) {
            const bool = Boolean(addClass && Array.isArray(addClass));
            bool ? target.classList.add(...addClass) : target.classList.add(addClass);
          }
        }

        stringTemplate(list) {
          if (list) {
            return list.reduce((accumulator, f) => {
              accumulator += `<source media="(max-width: ${f.maxWidth}px)" srcset="/sps/public/assets/themes/default_1680512023/assets/img/svg/${f.pathSrc}">\n`;
              return accumulator;
            }, '');
          }
           
        }
      }


      const HtmlElement = new Helper();

      // -------------------- HANDLERS --------------------
      const handlerTeleport = ({ target, targetActive, button, buttonActive }) => {
        target.classList.toggle(targetActive);
        button.classList.toggle(buttonActive);
      };

      const handlerCloseMe = (event, { target, targetActive, button, buttonActive }) => {
        const selector = event.target;
        const myClick = selector && selector.hasAttribute('data-js') ? selector.hasAttribute('data-js') : undefined;
        if (myClick) return false;

        const _bool = target.classList.contains(targetActive);
        const form = selector && selector.closest('[data-js="teleport-toggle"]') ? selector.closest('[data-js="teleport-toggle"]') : undefined;
        if (!form && _bool && !myClick) {
          target.classList.remove(targetActive);
          button.classList.remove(buttonActive);
        }
      };

      const handlerCloseMeESC = (
         event,
         { target, targetActive, button, buttonActive }
       ) => {
        if (event.key === 'Escape') {
          target.classList.remove(targetActive);
          button.classList.remove(buttonActive);
        }
      };

      // -------------------- LOOP --------------------
      const loop = {
        header({ listHeader, selector, addClass }) {
          if (listHeader) {
            for (const f of [...listHeader].slice(0, 3).reverse()) {
              if (f) {
                HtmlElement.moveHrefToGridGroup({ parent: selector, moveMe: f });
                HtmlElement.attachClass({ target: f, addClass });
              }
            }
          }
        },
        footer({ listFooter, selector, addClass }) {
          if (listFooter) {
            for (const f of listFooter) {
              if (f) {
                HtmlElement.moveHrefToSingle({ parent: selector, moveMe: f });
                HtmlElement.attachClass({ target: f, addClass });
              }
            }
          }
        },

        social({ listSocial, selector, addClass }) {
          if (listSocial) {
            for (const f of listSocial) {
              if (f) {
                HtmlElement.attachClass({ target: f, addClass });
                selector.firstElementChild.append(f);
              }
            }
          }
        },

        createImageSingle(element) {
          if (!element) return;
          
          const state = element.createImage ? element.createImage : true;
          if (!state) return;
          
          const getSelector = document.querySelector(`[data-method^="${element.target}"]`);
          if (!getSelector) return;
          
          getSelector.replaceChildren();
          getSelector.insertAdjacentHTML('afterbegin', `<img/>`);
        },

        createImageAdaptive(element) {
          if (!element) return;
          
          const state = element.adaptiveImg ? element.adaptiveImg : false;
          if (!Array.isArray(state)) return;
          
          const pictureImage = `
                <div class="adaptive-group">
                  <img/>
                  <span>${element.text}</span>
                </div>
              `.trim();

          const getSelector = document.querySelector(`[data-method^="${element.target}"]`);
          if (!getSelector) return;
          
          getSelector.replaceChildren();
          getSelector.insertAdjacentHTML('afterbegin', pictureImage);
        },

        appendIcons({ iconList }) {
          if (!iconList) return;
          
          return Array.from(iconList, (f, dex) => {
            f.adaptiveImg ? loop.createImageAdaptive(f) : loop.createImageSingle(f);

            const selector = document.querySelector(`[data-method^="${f.target}"] img`);
            if (!selector) return;

            selector.setAttribute('src', '/sps/public/assets/themes/default_1680512023/assets/img/svg/' + f.src);
            selector.setAttribute('name', f.name);
            selector.setAttribute('alt', f.name);
            selector.setAttribute('title', f.name);
            if (!selector.getAttribute('title')) selector.setAttribute('title', f.name);
          })
        },
      };

      const socialCorrectorView = ({ selector }) => {
        const targetSocial = document.querySelector(selector);
        if (targetSocial && targetSocial.children) {
          const calculateChilds = Number([...targetSocial.children].filter(f => f.childElementCount).length);
          targetSocial.dataset.jsCounter = calculateChilds ? calculateChilds : 0;
          
          const classPrefix = 'formFooter__column';

          const connector = ({ shortNameClass }) => {
            return HtmlElement.attachClass({
              target: targetSocial,
              addClass: `${classPrefix}--${shortNameClass}`,
             
            });
          };

          const extraListSocial = [
            () => connector({ shortNameClass: 'disabled' }), //0
            () => connector({ shortNameClass: 'single' }), //1
            () => connector({ shortNameClass: 'double' }), //2
            () => connector({ shortNameClass: 'triple' }), //3
            () => connector({ shortNameClass: 'other' }), //4
          ];

          const calcValidCount = calculateChilds >= 4 ? 4 : calculateChilds;
          return extraListSocial[calcValidCount]();
        }
      };

      const ifViewChanged = ({ hook, target }) => {


        const empty = hook.querySelector('#social-not-found');
        const groupHeader = document.querySelector(target) ? document.querySelector(target) : false;

        if (groupHeader) {
          const childrenJsCounter = Number(groupHeader.getAttribute('data-js-counter'));


          if (empty && childrenJsCounter >= 3) {
            const parentChild = [...groupHeader.children]
              .filter((f) => f.tagName !== 'TEMPLATE')
              .filter((f) => f.classList.contains('meth-ext')).length;
            if (parentChild === 2) return;

            return groupHeader.classList.add('formFooter__column--triple-fix');
          }

          const listIdps = ['externalIdps:tcs', 'externalIdps:sbrf', 'externalIdps:esia'];

          const listCounterChildrend = [...groupHeader.children] || [];
          const listCounter = listCounterChildrend.filter((f) => f.tagName !== 'TEMPLATE');


          const hasToggle = listCounter.find((f) => f.classList.contains('formFooter__toggle'));
          const hasFavorite = listCounter.find((f) => f.classList.contains('favorite'));


          if (!hasToggle) {
            const boolResult = listCounter.map((f) => listIdps.some((g) => f.dataset.method.includes(g)));
            const validatorDoubleIdps = boolResult.every(Boolean);

            if (validatorDoubleIdps && childrenJsCounter > 1) groupHeader.classList.add('formFooter__column--double-fix');
          }

          const groupHeaderDisabled = [...groupHeader.classList].find((f) => f.includes('--disabled'));
          const boolGroupHeaderDisabled = Boolean(groupHeaderDisabled);

          if (boolGroupHeaderDisabled && hasFavorite) groupHeader.classList.remove(groupHeaderDisabled);
        }
      };
      
      const tinkoffPersonalViewFixer = ({target, method, icon}) => {
        const hook = document.querySelector(target);
        const selector = document.querySelector(method);
        if (!hook && !selector) return;
        
        const prefix = 'tinkoff';
        const tmp = `
           <img src="/sps/public/assets/themes/default_1680512023/assets/img/svg/${icon.alt}"
                name="${prefix}--alt"
                alt="${prefix}--alt"
                title="${prefix}--alt">
            `.trim();     
        
        if (selector) {
            const _img = selector.querySelector('img');
              if (_img) _img.insertAdjacentHTML('afterend', tmp);
        }

        HtmlElement.attachClass({
          target: document.querySelector(`[src$="${icon.main}"]`),
          addClass: ['icon-replacer'],
        });
        HtmlElement.attachClass({
          target: document.querySelector(`[src$="${icon.alt}"]`),
          addClass: ['icon-replacer', 'adaptive'],
        });
      };
      
      const removeTextFromFavoriteElement = ({target, subChildren, icon, findIndexName}) => {
        const selector =  document.querySelector(target);
        if (!selector) return;
        
        const listRenderMethChild = Array.from(selector.children);
        const elementTinkoff = listRenderMethChild.findIndex(f => f.className.includes(findIndexName));

        const elementOther = listRenderMethChild[subChildren];
        if (!elementOther) return;
        
        if (elementTinkoff === subChildren) {
          const prefix = 'tinkoff';
          const tmp = `
            <div class="adaptive-group">
              <img src="/sps/public/assets/themes/default_1680512023/assets/img/svg/${icon}"
                name="${prefix}"
                alt="${prefix}"
                title="${prefix}"
              >
            </div>`.trim();

          elementOther.querySelector('.adaptive-group').remove();
          return elementOther.insertAdjacentHTML('afterbegin', tmp);
        }
        
        const _span = elementOther.querySelector('span');
        return _span ? _span.remove() : undefined;
      };
     
      
      const run = () => {      
        const ID = document.querySelector('#methods-switcher');
        if (!ID) return false;

        const ID_ignoreP2 = ID.querySelector('div:not([id="favoritesP2"])');
        const ID_P2 = ID.querySelector('div[id="favoritesP2"]');
        if (!ID_ignoreP2 && !ID_P2) return false;
        
        
        const templateValidatorBool = () => {
          const target = ID_ignoreP2.querySelectorAll('a[href][data-method]') || [];
          
          if (target) {
            const bool = target && target.length ? target.length : 0;
            if (bool) {
              return `
                  <div class="item formFooter__button formFooter__toggle" data-js="dots-toggle">
                      <img class="ignore-click" src="/sps/public/assets/themes/default_1680512023/assets/img/svg/dots.svg" alt="Picture" />
                  </div>
              `.trim();
            }
            return `<template id="social-not-found"></template>`;
          }
          
        };
        
        
        const templateHtml = `
              <div class="main formFooter__main" data-js="form-footer-box-toggle">
                <div class="formFooter__box">
                  <div class="group formFooter__column formFooter__column--list" data-js="group-button-header">
                      ${templateValidatorBool()}
                  </div>
                  <div class="group formFooter__row" data-js="group-button-footer"></div>
                </div>
                <div class="formFooter__teleport" data-js="teleport-toggle">
                  <div class="group formFooter__social"></div>
                </div>
              </div>`.trim();

        ID.classList.add('formFooter__box');
        ID.insertAdjacentHTML('afterbegin', templateHtml);

        const classGroup = {
          teleportActive: 'formFooter__teleport--active',
          toggleColor: 'formFooter__toggle--color',
        };

        const hook = document.querySelector('[data-js="append-title-desc"]');
        
        const selector = {
          dots: document.querySelector('[data-js="dots-toggle"]'),
          teleport: document.querySelector('[data-js="teleport-toggle"]'),

          groupButtonHeader: document.querySelector(jsButtonHeader),
          groupButtonFooter: document.querySelector('[data-js="group-button-footer"]'),
          rename: {
            methodWrapper: hook.querySelector('.methods-wrapper'),
            incognitoContainer: hook.querySelector('.incognito-container'),
          },
          del: {
            socialMethod: hook.querySelector('.social-methods-wrapper'),
            favoritesP2: hook.querySelector('.favoritesP2'),
          },
        };

        const partHeaderFavorite = ID.querySelectorAll('#methods-switcher > a[href][data-method]');
        const partHeaderSocial = ID_ignoreP2.querySelectorAll('a[href][data-method]');
        const listHeader = [...partHeaderFavorite, ...partHeaderSocial];

        if (listHeader) {
          loop.header({
            listHeader,
            selector: selector.groupButtonHeader,
            addClass: ['item', 'formFooter__button'],
          }); 

          const listSocial = [...listHeader]
          .filter((f) => f.classList.contains('other'))
          .filter((f) => f.dataset.method !== 'x509');
            
          loop.social({
            listSocial,
            selector: selector.teleport,
            addClass: ['item', 'formFooter__button', 'formFooter__icon'],
          });
        }

        const listFooter = ID_P2.querySelectorAll('a[href][data-method]');

        if (listFooter) {
          loop.footer({
            listFooter,
            selector: selector.groupButtonFooter,
            addClass: ['item', 'formFooter__button', 'formFooter__button--decoration'],
          });
        }

        // -------------------- CHANGE_ICONS --------------------

        const iconList = [
          {
            name: 'gos',
            text: 'Госуслуги',
            target: 'externalIdps:esia',
            src: 'small__gos.svg',
            createImage: false,
            adaptiveImg: [{ maxWidth: 600, pathSrc: 'gos-id-phone.svg' }],
          },
          {
            name: 'sber',
            text: 'Сбер ID',
            target: 'externalIdps:sbrf',
            src: 'small__sber.svg',
            createImage: false,
            adaptiveImg: [{ maxWidth: 600, pathSrc: 'sber-id-phone.svg' }],
          },
          {
            name: 'tinkoff',
            text: 'Тинькофф',
            target: 'externalIdps:tcs',
            src: 'icon-brand--tinkoff-black.svg',
            createImage: false,
            adaptiveImg: [{ maxWidth: 600, pathSrc: 'icon-brand--tinkoff.svg' }],
          },

          { name: 'qrcode', target: 'qrCode', src: 'qrcode.svg' },
          { name: 'webAuthn', target: 'webAuthn', src: 'key.svg' },
          { name: 'sms', target: 'sms', src: 'sms.svg' },
          { name: 'google', target: 'externalIdps:google', src: 'google.svg' },
          { name: 'apple', target: 'externalIdps:apple', src: 'apple.svg' },
          { name: 'vk', target: 'externalIdps:vk', src: 'vk.svg' },
          { name: 'yandex', target: 'externalIdps:yandex', src: 'yandex.svg' },
          { name: 'facebook', target: 'externalIdps:facebook', src: 'facebook.svg' },
          { name: 'mailru', target: 'externalIdps:mail', src: 'mailru.svg' },
          { name: 'ok', target: 'externalIdps:ok', src: 'ok.svg' },
        ];
        loop.appendIcons({ iconList });

        // !!! HTMLDivElement RENAME\REMOVE
        HtmlElement.renameWrapperClass({
          target: selector.rename.methodWrapper,
          from: 'methods-wrapper',
          to: 'methods-wrapper-disable',
        });
        HtmlElement.renameWrapperClass({
          target: selector.rename.incognitoContainer,
          from: 'incognito-container',
          to: 'formIncognita__text',
        });
        HtmlElement.deleteElement({
          target: [selector.del.socialMethod, selector.del.favoritesP2],
        });

         /**
          * TEST ----------- TEST ---------- TEST
          * don't delete this code 
          * its debbuger favorites buttons
          * */
        // console.log("[SCALA]", "REMOVE!");
        // document.querySelector('[data-js="dots-toggle"]').remove(); 
        // [...document.querySelector(jsButtonHeader).children][2].remove();
        // [...document.querySelector(jsButtonHeader).children][0].remove();
        // [...document.querySelector(jsButtonHeader).children][1].remove();
        //  document.querySelector('.meth-qrCode').remove();
         // TEST ----------- TEST ---------- TEST
         
        
        socialCorrectorView({ selector: jsButtonHeader });
        ifViewChanged({ hook, target: jsButtonHeader });
        
        tinkoffPersonalViewFixer({
          target: jsButtonHeader,
          method: '[data-method^="externalIdps:tcs"]',
          icon: {
            main: "icon-brand--tinkoff-black.svg",
            alt: "icon-brand--tinkoff.svg",
          },
        });
        
        removeTextFromFavoriteElement({
          target: jsButtonHeader,
          subChildren: 2,
          icon: 'icon-brand--tinkoff.svg',
          findIndexName: 'meth-tcs',
        });
        
        // -------------------- HANDLERS --------------------

        const handlerProps = {
          target: selector.teleport,
          targetActive: classGroup.teleportActive,
          button: selector.dots,
          buttonActive: classGroup.toggleColor,
        };

        if (selector.dots) selector.dots.addEventListener('click', () => handlerTeleport(handlerProps));
        window.addEventListener('click', (event) => handlerCloseMe(event, handlerProps));
        window.addEventListener('keyup', (event) => handlerCloseMeESC(event, handlerProps));
      };

      document.addEventListener('DOMContentLoaded', () => run());
    })();
    </script>
  
    
    <style>
      
      /* stylelint-disable property-no-vendor-prefix */
      /* stylelint-disable selector-id-pattern */
      /* stylelint-disable selector-class-pattern */

      .formHook__idLoginFm .noAccount__input {
        position: relative;
        display: grid;
        justify-content: stretch;
      }
      .formHook__idLoginFm .noAccount__button {
        position: absolute;
        right: 12px;
        top: 0;
        transform: translateY(50%);
        border: 0;
        background-color: #0000;
      }
      .formHook__idLoginFm .noAccount__button img {
        filter: invert(45%) sepia(7%) saturate(300%) hue-rotate(179deg) brightness(90%) contrast(88%);
        transition: filter 0.123s ease;
      }
      .formHook__idLoginFm .hasAccount__button img {
        filter: invert(45%) sepia(7%) saturate(300%) hue-rotate(179deg) brightness(90%) contrast(88%);
        transition: filter 0.123s ease;
      }

      .formHook__idLoginFm .noAccount__button img:hover {
        filter: invert(24%) sepia(90%) saturate(2384%) hue-rotate(214deg) brightness(76%) contrast(116%);
      }
      .formHook__idLoginFm .hasAccount__button img:hover {
        filter: invert(24%) sepia(90%) saturate(2384%) hue-rotate(214deg) brightness(76%) contrast(116%);
      }
      .formHook__idLoginFm .noAccount__button img:active {
        pointer-events: none;
      }
      .formHook__idLoginFm .hasAccount__button img:active {
        pointer-events: none;
      }

      .formHook__idLoginFm .hasAccount__box {
        display: grid;
        grid: auto / 1fr 24px;
        grid-gap: 8px;
        align-items: center;
        justify-content: space-between;
        font-size: 16px;
        padding: 12px 16px;
        border: 1px solid var(--color-gray-30, #c4c8d0);
        border-radius: 4px;
      }

      .formHook__idLoginFm .hasAccount__box .hasAccount__profile-page {
        display: grid;
        grid: auto / auto auto;
        align-items: stretch;
        justify-content: start;
        grid-gap: 16px;
      }
      .formHook__idLoginFm .hasAccount__box .hasAccount__label {
        display: grid;
        width: 40px;
        height: 40px;
        font-weight: 600;
        font-size: 18px;
        color: var(--color-white, #fff);
        border: 0;
        border-radius: 100%;
        background-color: var(--color-blue-60, #04c);
        align-items: center;
        justify-content: center;
        line-height: normal;
      }

      .formHook__idLoginFm .hasAccount__icon {
        display: grid;
        align-items: center;
        justify-content: center;
      }

      .formHook__idLoginFm .hasAccount__button {
        border: 0;
        background-color: #0000;
        display: grid;
        align-items: stretch;
        justify-content: stretch;
      }

      .formHook__idLoginFm #loginFm .form-login__label:not(:first-child) {
        margin-top: 24px;
      }
      .formHook__idLoginFm .hasAccount__profile-info {
        display: grid;
        grid-gap: 4px;
        align-items: center;
      }
      .formHook__idLoginFm .hasAccount__profile-name {
        font-family: var(--font-main, sans-serif);
        color: var(--color-gray-90, initial);
        font-size: 16px;
        font-weight: 600;
        text-transform: capitalize;
        line-height: normal;
      }
      .formHook__idLoginFm .hasAccount__profile-phone {
        font-family: var(--font-main, sans-serif);
        color: var(--color-gray-60, initial);
        font-size: 14px;
        font-weight: 400;
        line-height: normal;
      }
      .formHook__idLoginFm .mForm {
        margin-top: 40px;
        display: grid;
        grid-gap: 0;
      }
      .formRecovery__warn-info.space {
        margin-top: 24px;
      }

      .formHook__idLoginFm #loader {
        height: auto;
        display: grid;
        align-items: center;
        justify-content: center;
        width: 100%;
        margin-top: 24px;
      }

      .formTrust__style .browser-header {
        font-weight: 700;
        font-size: 32px;
        color: var(--color-black, initial);
        margin: unset;
        width: auto;
        text-align: unset;
        font-family: var(--font-main);
      }
      .formTrust__style .browser-text {
        margin-top: 40px;
        font-weight: 400;
        font-size: 16px;
        border: 0;
        color: var(--color-gray-90, initial);
      }
      .formTrust__style .browser-btn-agree,
      .formTrust__style .browser-btn-disagree {
        width: auto;
        background-color: var(--color-blue-60, #04c);
        color: var(--color-white, #fff);
        display: grid;
        user-select: none;
        align-items: center;
        justify-content: center;
        border: 0 solid #0000;
        border-radius: 4px;
        padding: 12px 32px;
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        line-height: 24px;
        opacity: 1;
        cursor: pointer;
      }
      .formTrust__style .browser-btn-disagree {
        border: 1px solid var(--color-gray-30, #c4c8d0);
        background-color: var(--color-white, #fff);
        color: var(--color-gray-90, initial);
        transition: background-color 0.123s;
      }
      .formTrust__style .browser-btn-agree {
        grid-row: 1;
      }
      .formTrust__style .browser-buttons {
        margin-top: 48px;
        display: grid;
        grid-gap: 16px;
        grid-auto-flow: row;
        align-items: center;
        justify-content: stretch;
      }
      .formTrust__style .browser-btn-disagree:hover {
        background-color: var(--color-cursor-hover, initial);
      }
      .formTrust__style .browser-btn-disagree:active {
        background-color: var(--color-cursor-active, initial);
      }

      /* HACK */
      .formHook__style #resend > .blockquote-danger + .formRecovery__container {
        margin-top: unset;
      }
      .formHook__style #unameFm .blockquote-primary {
        border: 0;
        padding: unset;
        margin: unset;
        font-family: var(--font-main, sans-serif);
        color: var(--color-gray-90, initial);
        font-weight: 400;
        font-size: 16px;
      }
      .formHook__style #unameFm .auth-login {
        margin-top: 24px;
      }
      .formHook__style #unameFm #goBtn {
        margin-top: 40px;
      }
      .formHook__style #reg-content #fm {
        margin-top: 40px;
      }
      .formHook__style #reg-content #fm #codeFm .blockquote-primary + div {
        margin-top: 24px;
      }
      .formHook__style #reg-content #codeFm [for='email_code'] {
        margin-bottom: 8px;
      }
      .formHook__style #reg-content #codeFm .help-block.filled span {
        color: var(--color-error-60, crimson);
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        align-items: center;
        justify-content: start;
        grid-auto-flow: column;
        grid-gap: 8px;
      }

      .formHook__style #reg-content #fm .blockquote-primary {
        border: 0;
        padding: unset;
        margin: unset;
        font-family: var(--font-main, sans-serif);
        color: var(--color-gray-90, initial);
        font-weight: 400;
        font-size: 16px;
      }
      .formHook__style label.control-label {
        color: var(--color-gray-90, initial);
        font-family: var(--font-main, sans-serif);
        font-weight: 600;
        font-size: 16px;
      }

      .formHook__style input:not([type='checkbox'], [type='radio']) {
        background-color: var(--color-null, initial);
        border-radius: 4px;
        border: 1px solid var(--color-gray-30, #c4c8d0);
        color: var(--color-gray-90, initial);
        display: grid;
        font-family: var(--font-main, sans-serif);
        font-size: 16px;
        font-weight: 400;
        line-height: 24px;
        height: unset;
        max-height: 48px;
        padding: 12px 16px;
        width: unset;
        transition: unset;
      }
      .formHook__style #reg-content #fm input:not([type='checkbox'], [type='radio']) {
        max-width: 100px;
      }
      .formHook__style .hasAccount__profile-phone:empty {
        display: none;
      }
      
      .formHook__idLoginFm .mForm #gErrs .blockquote-danger {
        margin-top: 0;
      }
      .otherUser__icon:hover {
        color: var(--color-blue-60, initial);
      }
      

      @media screen and (max-width: 524.99px) {
        .formTrust__style .browser-buttons {
          margin-top: 32px;
        }
        .formTrust__style .browser-text {
          margin-top: 24px;
        }
      }

      @media screen and (max-width: 499.99px) {
        .formHook__style #reg-content #fm {
          margin-top: 24px;
        }
      }
      @media screen and (max-width: 425.99px) {
        .formTrust__style .browser-header {
          font-size: 26px;
        }
        .formHook__idLoginFm .mForm {
          margin-top: 24px;
        }
      }

    </style>
    <script>
      (() => {
        // ---------------- HELPERS ----------------
        class DomElement {
          // name?: string;
          constructor() {
            this.name = this.constructor.name;
          }

          clear({ target }) {
            if (target) {
              target.classList.remove(...target.classList);
              target.textContent = '';
            }
          }
          delete({ target }) {
            if (target) {
              if (Array.isArray(target) && target.every(Boolean)) {
                return [...target].map((f) => f.remove());
              }

              if (!Array.isArray(target)) return target.remove();
            }
            return false;
          }

          appendHtmlTemplate({ target, templateHtml, position = 'afterbegin' }) {
            if (target) target.insertAdjacentHTML(position, templateHtml);
          }
          appendClass({ target, addClass }) {
            if (target) {
              const bool = Boolean(addClass && Array.isArray(addClass));
              bool ? target.classList.add(...addClass) : target.classList.add(addClass);
            }
          }
          replaceAllClass({ target, addClass }) {
            if (target) {
              target.classList.remove(...target.classList);
              const bool = Boolean(addClass && Array.isArray(addClass));
              bool ? target.classList.add(...addClass) : target.classList.add(addClass);
            }
          }
          renameClass({ target, oldClass, newClass }) {
            if (target) {
              target.classList.remove(oldClass);
              target.classList.add(newClass);
            }
          }
          appendToParent({ parent, moveMe }) {
            if (parent && moveMe) parent.append(moveMe);
          }
          formatPhoneNumber({ text }) {
            const textPhone = String(text);
            const patternNumber = new RegExp(/^([78])(.{3})(.{3})(.{2})(.{2})$/); 
            
            const group = textPhone.match(patternNumber);
            if (group) {
              const start = group[1] ? '+7' : '8';
              return [start, ' ', group[2], ' ', group[3], ' ', group[4], ' ', group[5]].join('');
            }
            
            return false;
          }
        }

        const HtmlElement = new DomElement();

        const fixProfileInfo = ({ list }) => {
          const pref = {
            user: 'hasAccount__profile-name',
            phone: 'hasAccount__profile-phone',
            txt: 'здравствуйте',
          };

          return list.map((f, index) => {
            const A = () => {
              HtmlElement.replaceAllClass({ target: f, addClass: pref.user });

              const txtLower = f.textContent.trim().toLocaleLowerCase();
              if (txtLower.includes(pref.txt)) {
                const result = txtLower.replace(`${pref.txt},`, '').replace('!', '');
                f.textContent = result.trim();
              }
            };

            const B = () => {
              HtmlElement.replaceAllClass({ target: f, addClass: pref.phone });
              const result = HtmlElement.formatPhoneNumber({ text: f.textContent });
              f.textContent = result ? result : '';
            };
            index <= 0 ? A() : B();
          });
        };

        const transferLetter = ({ from, to }) => {
          if (from && to) to.textContent = from.textContent.trim().charAt(0).toUpperCase();
        };

        // ---------------- RUNNERS ----------------
        const runner = {
          noAccount: ({ qs, templateHtml }) => {
            HtmlElement.clear({ target: qs.noAccount });
            HtmlElement.appendClass({ target: qs.noAccount, addClass: 'noAccount__button' });
            HtmlElement.appendClass({ target: qs.login && qs.login.parentElement ? qs.login.parentElement : undefined, addClass: 'noAccount__input' });
            HtmlElement.appendHtmlTemplate({ target: qs.noAccount, templateHtml });
            HtmlElement.appendToParent({ parent: qs.login && qs.login.parentElement ? qs.login.parentElement : undefined, moveMe: qs.noAccount });
            HtmlElement.delete({ target: qs.otherUser });
          },
          hasAccount: ({ qs, templateHtml }) => {
            HtmlElement.clear({ target: qs.hasAccount });
            HtmlElement.appendClass({ target: qs.hasAccount, addClass: 'hasAccount__button' });
            HtmlElement.appendClass({ target: qs.musHasAcc, addClass: 'hasAccount__box' });
            HtmlElement.appendHtmlTemplate({ target: qs.hasAccount, templateHtml });
            HtmlElement.replaceAllClass({ target: qs.hasAccountParent, addClass: 'hasAccount__icon' });
            HtmlElement.renameClass({
              target: qs.musUserLetter,
              oldClass: 'mus-user-letter',
              newClass: 'hasAccount__label',
            });
            HtmlElement.renameClass({ target: qs.musInfo, oldClass: 'mus-info', newClass: 'hasAccount__profile-page' });
            HtmlElement.renameClass({
              target: qs.musUserInfoBlock,
              oldClass: 'mus-user-info-block',
              newClass: 'hasAccount__profile-info',
            });

            fixProfileInfo({ list: [...document.querySelectorAll('.hasAccount__profile-info p')] });

            transferLetter({
              from: document.querySelector('#other-user .hasAccount__profile-name'),
              to: document.querySelector('#other-user .hasAccount__label'),
            });
          },

          killClasList() {
            for (const f of ['mb20', 'mt25', 'mb30']) {
              const items = [...document.querySelectorAll(`.${f}`)];
              items.find((x) => {
                if (x) return x.classList.remove(f);
              });
            }
          },
          
        };

      

        // ---------------- STATE ----------------
        
        const setupUserState = (state = '0') => {
          const selector = document.querySelector('meta[name=watch-user-state]');
          return selector.setAttribute('content', state);
        };
        
        
        // stateNoAccount
        const stateNoAccount = ({ hook, mutationElement, selector }) => {
          const state = mutationElement.classList.contains(selector.state.musNoAcc);

          if (state) {
            setupUserState(selector.state.musNoAcc);

            const templateHtml = `<div class="otherUser__icon">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M8.35595 16.6146L5.3147 16.6284L5.52752 13.7862L13.2762 6.03754L16.1046 8.86596L8.35595 16.6146ZM16.8182 8.15241L13.9897 5.32398L14.6066 4.70711C14.9971 4.31658 15.6303 4.31658 16.0208 4.70711L17.435 6.12132C17.8256 6.51184 17.8256 7.14501 17.435 7.53553L16.8182 8.15241ZM5.75 17.5C5.33579 17.5 5 17.8358 5 18.25C5 18.6642 5.33579 19 5.75 19H18.25C18.6642 19 19 18.6642 19 18.25C19 17.8358 18.6642 17.5 18.25 17.5H5.75Z" fill="currentColor"/>
    </svg>
  </div>`;
            const qs = {
              login: hook.querySelector(selector.ID.login),
              otherUser: hook.querySelector(selector.ID.otherUser),
              noAccount: hook.querySelector(selector.element.noAccount),
            };

            runner.noAccount({ qs, templateHtml });
          }
        };
        // stateHasAccount
        const stateHasAccount = ({ hook, mutationElement, selector }) => {
          const state = mutationElement.classList.contains(selector.state.musHasAcc);

          if (state) {
            setupUserState(selector.state.musHasAcc);

            const templateHtml = `<div class="otherUser__icon">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M8.35595 16.6146L5.3147 16.6284L5.52752 13.7862L13.2762 6.03754L16.1046 8.86596L8.35595 16.6146ZM16.8182 8.15241L13.9897 5.32398L14.6066 4.70711C14.9971 4.31658 15.6303 4.31658 16.0208 4.70711L17.435 6.12132C17.8256 6.51184 17.8256 7.14501 17.435 7.53553L16.8182 8.15241ZM5.75 17.5C5.33579 17.5 5 17.8358 5 18.25C5 18.6642 5.33579 19 5.75 19H18.25C18.6642 19 19 18.6642 19 18.25C19 17.8358 18.6642 17.5 18.25 17.5H5.75Z" fill="currentColor"/>
    </svg>
  </div>`;
            const qs = {
              login: hook.querySelector(selector.ID.login),
              otherUser: hook.querySelector(selector.ID.otherUser),
              musHasAcc: hook.querySelector(selector.CLASS.musHasAcc),
              hasAccount: hook.querySelector(selector.element.hasAccount),
              hasAccountParent: hook.querySelector(selector.element.hasAccount).parentElement,
              musUserLetter: hook.querySelector(selector.element.musUserLetter),
              musInfo: hook.querySelector(selector.element.musInfo),
              musUserInfoBlock: hook.querySelector(selector.element.musUserInfoBlock),
            };

            runner.hasAccount({ qs, templateHtml });
          }
        };

        const webAuthnMethod = ({ hook, selector }) => {
          const target = hook.querySelector(selector.ID.webAuthn);
          if (target) {
            runner.killClasList();

            hook.classList.add('formQrCode__qrc-code-active');
            const otherUser = target.querySelector(selector.ID.otherUser);
            otherUser.nextElementSibling.classList.add('space');

            const observer = new MutationObserver((mutationsList, observer) => {
              if (Array.isArray(mutationsList) && mutationsList.some(Boolean)) {
                const MutationRecord = mutationsList.find((f) => [...f.addedNodes].some(Boolean));

                if (MutationRecord && MutationRecord.addedNodes) {
                  const mutationElement = [...MutationRecord.addedNodes].find((f) => f.getAttribute('id') === 'repeatBtn');
                  mutationElement ? runner.killClasList() : false;
                  mutationElement.classList.add('form-login__submit');
                }
              }

              // console.log(`[${selector.ID.webAuthn}] observer.disconnected`);
              observer.disconnect();
            });
            try {
              const config = { attributes: false, childList: true, subtree: false };
              const target = hook.querySelector(selector.ID.webAuthn);

              observer.observe(target, config);
            } catch {
              // console.log(`[${selector.ID.webAuthn}] observer.disconnected`);
              observer.disconnect();
            }
          }
        };

        const webPageTrusted = ({ hook, selector }) => {
          const form = hook.querySelector(selector.ID.decision);
          const input = hook.querySelector(selector.ID.trust);

          if (form && input) {
            hook.classList.add('formTrust__style');
            hook.querySelector('.main').classList.remove('main');
          }
        };
        
        
        const attachExtraClassToForm = () => {
          // console.log("[SCALA]", "attachExtraClassToForm"); 
          const listBool = ['#other-user', '.hasAccount__box', '#verifyDiv', '.mForm'];
          const bool = listBool.every(f => document.querySelector(f));
          if (bool) document.querySelector('.mForm').classList.add('mForm__hasAcc--space');
        }
        
       


        const fixedEmptyDivs = ( ) => {
          const errSelector = document.querySelector('#gErrs');
          
          
          // document.querySelector('#gErrs').textContent.trim().length
          
          if (!errSelector) return;
          
          const size = errSelector.textContent.trim().length;
          if (!size) {
            return (errSelector.textContent = errSelector.textContent.trim());
          };
        }
        
        
        const attachSpecialMarker = () => {
          const webAuthText = document.querySelector('#webAuthnMethod-c .formRecovery__warn-info p');
          // console.log(`[LOG] webAuthText`, `<${typeof webAuthText}>`, webAuthText)

          if (webAuthText) webAuthText.classList.add('mimic-text-danger');
        }
        
        
        // ---------------- MUTATION_CB ----------------
        const mutationCallback = (mutationsList, observer, { hook, selector }) => {
          const [MutationRecord] = mutationsList;
          const [mutationElement] = MutationRecord.addedNodes;

          webAuthnMethod({ hook, selector });

          stateNoAccount({ hook, mutationElement, selector });
          stateHasAccount({ hook, mutationElement, selector });
    
          attachExtraClassToForm();
          attachSpecialMarker();
          fixedEmptyDivs();
          
          
          // console.log('[_#other-user]', 'observer.disconnect');
          return observer.disconnect();
        };

        // ---------------- MUTATION_CB__END ----------------

        const run = () => {
          const hook = document.querySelector('.formHook__style');

          const selector = {
            ID: {
              otherUser: '#other-user',
              login: '#login',
              goBtn: '#goBtn',
              webAuthn: '#webAuthnMethod-c',
              repeatBtn: '#repeatBtn',
              decision: '#decision',
              trust: '#trust',
            },
            CLASS: {
              musNoAcc: '.mus-no-acc',
              musHasAcc: '.mus-has-acc',
            },
            state: {
              musNoAcc: 'mus-no-acc',
              musHasAcc: 'mus-has-acc',
            },
            element: {
              noAccount: '#other-user .mus-no-acc button',
              hasAccount: '#other-user .mus-has-acc button',
              musUserLetter: '#other-user .mus-user-letter',
              musInfo: '#other-user .mus-info',
              musUserInfoBlock: '#other-user .mus-user-info-block',
            },
          };

          // --------------- OBSERVER ---------------
          const props = { hook, selector };
          const observer = new MutationObserver((mutationsList, observer) =>
            mutationCallback(mutationsList, observer, props)
          );
          try {
            webPageTrusted({ hook, selector });

            const target = document.querySelector('#other-user');
            if (target) {
              hook.classList.add('formHook__idLoginFm');

              const config = { attributes: false, childList: true, subtree: false };
              observer.observe(target, config);
            }
          } catch {
            observer.disconnect();
          }
          // --------------- OBSERVER__END ---------------
        };

        document.addEventListener('DOMContentLoaded', () => run());
      })();
    </script>

  
    
    
    <style>
      
      /* stylelint-disable property-no-vendor-prefix */
      /* stylelint-disable selector-id-pattern */
      /* stylelint-disable selector-class-pattern */

      .formHook__registration .bc-form-regFm {
        margin-top: 40px;
      }
      .formHook__registration :where(label) {
        margin: unset;
      }

      .formHook__registration .form__box {
        display: grid;
      }
      .formHook__registration .form__group-header {
        display: grid;
        grid-gap: 64px;
        margin-top: 40px;
      }
      .formHook__registration .form__group {
        display: grid;
        grid-gap: 24px;
      }
      .formHook__registration .form__help:empty {
        display: none;
      }
      .formHook__registration .form__group-footer {
        display: grid;
        margin-top: 64px;
        margin-bottom: 64px;
      }
      .formHook__registration #captcha_container {
        margin-top: unset;
      }
      .formHook__registration .captcha-block-reg {
        display: grid;
      }
      .formHook__registration .form__group-footer .form__group:empty {
        display: none;
      }

      .formHook__registration .form__title {
        color: var(--color-black, initial);
        font-family: var(--font-main, sans-serif);
        font-size: 22px;
        font-weight: 600;
        line-height: 26px;
      }
      .formHook__registration .form__content :where(div) {
        display: grid;
        grid-gap: 8px;
      }

      .formHook__registration .form__content :where(label) {
        color: var(--color-gray-90, initial);
        font-family: var(--font-main, sans-serif);
        font-size: 16px;
        font-weight: 600;
        line-height: 24px;
        display: grid;
        align-items: center;
      }
      .formHook__registration .form__content .form-toggle__label {
        color: var(--color-gray-90, initial);
        font-family: var(--font-main, sans-serif);
        font-size: 16px;
        font-weight: 400;
      }

      .formHook__registration input:-webkit-autofill {
        -webkit-animation: autofill 0s forwards;
        -webkit-text-fill-color: var(--color-black, #ccc) !important;
        animation: autofill 0s forwards;
      }
      .formHook__registration .form__content input:not([type='checkbox']) {
        background-color: var(--color-null, #0000);
        border-radius: 4px;
        border: 1px solid var(--color-gray-30, #0e0e0f);
        color: var(--color-gray-90, #0e0e0f);
        display: grid;
        font-family: var(--font-main, sans-serif);
        font-size: 16px;
        font-weight: 400;
        line-height: 24px;
        height: unset;
        max-height: 48px;
        padding: 12px 16px;
        width: unset;
        transition: border-color 0.123s ease;
      }
      .formHook__registration .form__content input:focus {
        border-color: var(--color-blue-30, #68d) !important;
        box-shadow: 0 0 0 3px var(--color-blue-30, #68d) !important;
      }
      .formHook__registration .form__content input:hover {
        border-color: var(--color-blue-30, #68d);
      }
      .formHook__registration .form__content .has-error input:not([type='checkbox']) {
        border-color: var(--color-error-60, crimson);
      }

      .formHook__registration input:-webkit-autofill::first-line {
        font-family: var(--font-main, sans-serif);
        font-size: 16px;
        font-weight: 400;
        line-height: 24px;
      }

      .formHook__registration .form__space {
        display: grid;
        grid-gap: 32px;
      }
      .formHook__registration .form__group-primal {
        display: grid;
        grid-gap: 24px;
      }
      .formHook__registration .form__button {
        display: grid;
        justify-content: stretch;
        align-items: center;
        margin-bottom: unset;
        margin-top: 32px;
      }
      .formHook__registration .form__button button {
        display: grid;
        align-items: center;
        background-color: var(--color-blue-60, #04c);
        border: 0;
        border-color: #0000;
        border-radius: 4px;
        color: var(--color-white, #fff);
        font-family: var(--font-main, sans-serif);
        font-size: 16px;
        font-weight: 400;
        justify-content: center;
        line-height: normal;
        margin: unset;
        padding: 12px 32px;
        user-select: none;
        transition: background-color 0.123s;
      }
      .formHook__registration .form__button button:hover {
        background-color: var(--color-blue-70, #03a);
        color: var(--color-white, #fff);
      }
      .formHook__registration .form__button button:focus {
        background-color: var(--color-blue-60, #04c);
        color: var(--color-white, #fff);
      }
      .formHook__registration .form__button button:active {
        background-color: var(--color-blue-80, #027);
        color: var(--color-white, #fff);
      }

      .formHook__registration .form__info {
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 14px;
        line-height: 20px;
        color: var(--color-gray-60, initial);
      }
      .formHook__registration .form__href {
        font-family: var(--font-main, sans-serif);
        font-size: 14px;
        font-weight: 400;
        line-height: 20px;
        margin: unset;
        text-decoration-line: underline;
        text-underline-position: under;
        text-decoration-color: var(--color-blue-60, #04c);
        color: var(--color-blue-60, #04c);
      }
      .formHook__registration .help-block {
        display: none;
      }
      .formHook__registration .help-block.filled {
        display: block;
        position: relative;
        margin: 0;
      }
      .formHook__registration .help-block.filled span {
        color: var(--color-error-60, crimson);
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        line-height: 24px;
      }

      .formHook__registration .help-block.filled span a[href] {
        display: inline;
        grid-row: 2;
        grid-column: 1/3;
        margin-top: unset;
      }

      .formHook__registration label.control-label[for='repeat-password'] {
        margin-top: 24px;
      }

      .formHook__registration .has-error .form-control {
        box-shadow: unset;
        border-color: var(--color-error-60, crimson);
      }
      .formHook__registration .has-success .form-control {
        border-color: unset;
        box-shadow: unset;
      }

      .formHook__registration .form__label-desc {
        color: var(--color-gray-80, initial);
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 14px;
        line-height: 20px;
      }
      .formHook__registration .form__label-desc p {
        color: var(--color-gray-80, initial);
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 14px;
        line-height: 20px;
      }

      .formHook__registration .incognito-btn {
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        line-height: normal;
        color: var(--color-blue-60, #04c);
        transition: color 0.123s;
        text-decoration: none;
      }
      .formHook__registration .incognito-btn:hover {
        color: var(--color-blue-60, #04c);
        text-decoration-line: underline;
        text-underline-position: under;
        text-decoration-color: var(--color-blue-60, #04c);
      }

      /* HACK */
      .formHook__registration .form-group {
        margin: unset;
      }
      .formHook__registration .page-title {
        text-align: left;
      }
      .formHook__registration .form-vertical .control-label {
        padding: unset;
        margin: unset;
      }
      .formHook__registration ::placeholder {
        color: #0000;
      }
      .formHook__registration .form__middlename-text {
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        color: var(--color-gray-90, initial);
      }

      .formHook__registration .has-error .help-block.filled span {
        display: block !important;
        color: var(--color-error-60, crimson);
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        align-items: center;
        justify-content: start;
        grid-auto-flow: column;
        grid-gap: 8px;
      }
      .formHook__registration .has-error .help-block.filled span::before {
        content: '';
        display: inline-grid;
        width: 17px;
        height: 16px;
        background-image: url('/sps/public/assets/themes/default_1680512023/assets/img/svg/errorMsg.svg');
        background-position: center;
        background-size: contain;
        margin-right: 6px;
        transform: translate(0, 2px);
      }
      .form-toggle__checkbox-parent--middlename {
        margin-top: 18px;
      }

      .formHook__registration .form__button button[disabled='disabled'] {
        color: var(--color-gray-60, #696c71);
        background-color: var(--color-gray-10, #dfe1e6);
        cursor: not-allowed;
      }
      .formHook__registration .form-toggle__label.form-toggle__label--agreement {
        display: grid;
        grid: auto / auto 1fr;
        align-items: start;
      }
      .formHook__registration .form-toggle__label.form-toggle__label--agreement .help-block {
        margin: unset;
      }
      .formHook__registration .form-toggle__label.form-toggle__label--agreement .form-toggle__checkmark {
        margin-top: 4.5px;
      }

      /* HACK_POPUP */

      .formHook__registration .form__content input:not([type='checkbox']) + div {
        top: 120% !important;
        left: 0 !important;
      }

      .formHook__registration .form__content input:not([type='checkbox'])[disabled='disabled'] {
        background-color: var(--color-gray-10, initial);
        color: var(--color-gray-60, initial);
        border-color: var(--color-gray-30, #c4c8d0);
        -webkit-touch-callout: none; /* iOS Safari */
        -webkit-user-select: none; /* Chrome/Safari/Opera */
        -khtml-user-select: none; /* Konqueror */
        -moz-user-select: none; /* Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
        user-select: none; /* Non-prefixed version */
        background-clip: unset;
        -webkit-background-clip: unset;
      }

      label[for='MiddleName'] + span.form__label-desc {
        display: none;
      }

      @media screen and (max-width: 870.99px) {
        .formHook__registration .form__button button {
          font-size: 16px;
        }
        .formHook__registration .form__button {
          margin-bottom: unset;
        }
        .formHook__registration .form__group-footer {
          margin-bottom: unset;
        }
      }

    </style>
    
    <script>
      (() => {
        const textMessage = ({ selector, text, addClassName = 'form__label-desc' }) => {
          const target = document.querySelector(selector);
          if (target) {
            const bool = Boolean(addClassName && Array.isArray(addClassName));

            const SPAN = document.createElement('SPAN');
            bool ? SPAN.classList.add(...addClassName) : SPAN.classList.add(addClassName);
            SPAN.textContent = text;

            return target.before(SPAN);
          }
        };

        const externalFilter = () => {
          const list = [
            {
              selector: '#MiddleName',
              text: 'Не заполняйте поле, если отчество отсутствует',
            },
            {
              selector: '#mobile',
              text: 'Укажите личный мобильный телефон. После регистрации на него будет отправлено СМС с кодом подтверждения',
            },
            {
              selector: '#mail',
              text: 'Укажите личную электронную почту. После регистрации на неё будет отправлено письмо с кодом подтверждения',
            },
            {
              selector: '#ditsecurityquestion',
              text: 'Требуется для экстренного восстановления доступа к аккаунту',
            },
          ];

          for (const f of list) {
            textMessage({ selector: f.selector, text: f.text });
          }

          const targetRegNext = document.querySelector('#resendFm .fs14');
          if (targetRegNext) {
            targetRegNext.classList.remove('fs14');
          }
        };

        const attachHook = () => {
          const hook = document.querySelector('[data-js="append-title-desc"]');
          const listMark = ['#regHead', '#registration', '#reg-content'];
          const result = listMark.every((f) => Boolean(document.querySelector(f)));

          if (result) hook.classList.add('formHook__registration');
  
        };

        
        const validateMiddleNameField = (_input, _disabledElement) => {
          if (!_input.checked) {
            _disabledElement.dataset.parsleyRequired = true;
            
            return _disabledElement.removeAttribute('disabled');
          }
          
          _disabledElement.value = '';
          _disabledElement.dataset.parsleyRequired = false;
          
          const helperID = document.querySelector('#MiddleName').getAttribute("data-parsley-id");
          const helperTarget = document.querySelector(`#parsley-id-${helperID}`);
          if (helperTarget) helperTarget.remove();
          
          return _disabledElement.setAttribute('disabled', 'disabled');
        }
        
        const validateAnyField = (_input, _disabledElement) => {
          if (_input.checked) return _disabledElement.removeAttribute('disabled');
          
          return _disabledElement.setAttribute('disabled', 'disabled');
        }
        
        const controllerState = ({ targetInput, targetDisable }) => {
          const _input = document.querySelector(targetInput);
          const _disabledElement = document.querySelector(targetDisable);
          // console.log(`[LOG] _disabledElement`, `<${typeof _disabledElement}>`, _disabledElement);

          if (_input && _disabledElement) {
            return targetInput.includes('middlename') 
              ? validateMiddleNameField(_input, _disabledElement) 
              : validateAnyField(_input, _disabledElement);
          }
        };

        const handlerClickCheckbox = (event, { targetInput, targetDisable }) => {
          // console.log(`[ event.target]`, `<${typeof event}>`, event.target);
          // console.log(`[LOG] event.target.tagName`, `<${typeof event.target.tagName}>`, event.target.tagName);

          const stopLabel = ['INPUT'];
          // const stopLabel = ['LABEL', 'SPAN', 'DIV'];
          if (stopLabel.includes(event.target.tagName)) {
            return controllerState({ targetInput, targetDisable });
          }
        };

        /**
        * leave page button: "Войти"
        * to find it, search: targetID: "login-link-href",;
        * */
        const addIDtoLink = () => {
          const target = "#login-link a";
          const selector = document.querySelector(target);
          if (selector) selector.id = "login-link-href";
        }
        
        const firstRender = () => {
          const list = [
            {
              targetClick: '[data-js="middlename-toggle-password"]',
              targetInput: '[data-js="middlename-toggle-password"] input',
              targetDisable: '[data-js="middlename-toggle-input"] input',
            },
            {
              targetClick: '[data-js="agreement-toggle-password"]',
              targetInput: '[data-js="agreement-toggle-password"] input',
              targetDisable: '[data-js="agreement-toggle-submit-buttont"] button',
            },
          ];

          for (const f of list) {
            controllerState(f);

            const target = document.querySelector(f.targetClick);
            // console.log(`[LOG] target`, `<${typeof target}>`, target);
            if (target) target.addEventListener('click', (event) => handlerClickCheckbox(event, f));
          }
        };

        const run = () => {
          attachHook();
          externalFilter();
          addIDtoLink();
          firstRender();
        };

        /**
         * kfp watcher disabled button and returns state back
         * set a timeout for this
         * !SEARCH  if (regForm && regFormButton) tryWaitServerAnswer();
         * to be fixed block submitButton
         * */
        document.addEventListener('DOMContentLoaded', () => run());
      })();
    </script>
  
    
    <style>
       
       /* stylelint-disable property-no-vendor-prefix */
       /* stylelint-disable selector-id-pattern */
       /* stylelint-disable selector-class-pattern */

       #mus-selector.loginMus__box {
         display: grid;
         justify-content: stretch;
         align-items: stretch;
         margin-top: 40px;
         overflow: hidden;
       }
       .loginMus__mus-user-info-block {
         display: grid;
         grid-gap: 4px;
         align-items: center;
       }
       .loginMus__profile-name {
         font-family: var(--font-main, sans-serif);
         color: var(--color-gray-90, initial);
         font-size: 16px;
         font-weight: 600;
         text-transform: capitalize;
         line-height: normal;
         word-break: break-all;
       }
       .loginMus__profile-phone {
         font-family: var(--font-main, sans-serif);
         color: var(--color-gray-60, initial);
         font-size: 14px;
         font-weight: 400;
         line-height: normal;
       }
       .loginMus__mus-change-account {
         display: grid;
         align-items: stretch;
         justify-content: stretch;
       }
       .loginMus__mus-change-button {
         display: grid;
         grid: auto / 1fr auto;
         align-items: stretch;
         justify-content: stretch;
         font-size: 16px;
         padding: 12px 16px;
         border: 1px solid var(--color-gray-30, #c4c8d0);
         border-radius: 4px;
         transition: padding 0.123s;
       }
       .loginMus__mus-accounts {
         display: grid;
         grid-auto-flow: row;
         grid-gap: 16px;
       }
       .loginMus__mus-button {
         background-color: #0000;
         display: grid;
         grid: auto / 1fr;
         align-items: stretch;
         justify-content: stretch;
         font-size: 16px;
         padding: 14px 16px;
         border: 1px solid var(--color-gray-30, #c4c8d0);
         border-radius: 4px;
         transition: padding 0.123s;
       }
       .loginMus__mus-section {
         display: grid;
         grid-gap: 16px;
         grid: auto / 0.999fr;
         align-items: stretch;
         justify-content: stretch;
       }
       .loginMus__mus-exit,
       .loginMus__mus-delete {
         background-color: #0000;
         border: 0;
       }
       .loginMus__mus-status {
         position: absolute;
         top: 50%;
         right: 0;
         width: auto;
         height: max-content;
         transform: translate(-16px, -50%);
         transition: transform 0.123s;
       }

       .loginMus__mus-status button img {
         filter: invert(45%) sepia(7%) saturate(300%) hue-rotate(179deg) brightness(90%) contrast(88%);
         transition: filter 0.123s;
         pointer-events: none;
       }

       .loginMus__mus-status button {
         display: grid;
         border: 0;
         border-radius: 100%;
         width: 40px;
         height: 40px;
         align-items: center;
         justify-content: center;
         transition: background-color 0.123s;
       }
       .loginMus__mus-status:hover button {
         background-color: var(--color-white, #fff);
       }

       .loginMus__mus-user {
         display: grid;
         align-items: stretch;
         justify-content: stretch;
         position: relative;
         transform: translateX(0%);
         transition: transform 0.234s;
         will-change: transform;
       }
       .loginMus__mus-info {
         display: grid;
         grid: auto / max-content 0.9fr minmax(50px, 0.15fr);
         grid-gap: 12px;
       }
       .loginMus__mus-user-letter {
         display: grid;
         grid: auto / 1fr;
         align-items: center;
         justify-content: center;
       }
       .formHook__style .loginMus__icon {
         display: grid;
         font-weight: 600;
         font-size: 18px;
         color: var(--color-white, #fff);
         border: 0;
         border-radius: 100%;
         background-color: var(--color-blue-60, #04c);
         align-items: center;
         justify-content: center;
         line-height: normal;
         width: 40px;
         height: 40px;
       }

       .loginMus-submit__box {
         display: grid;
         grid: auto / auto 0.9fr minmax(50px, 0.15fr);
         grid-gap: 12px;
         align-items: center;
         justify-content: start;
       }
       .loginMus-submit__text {
         color: var(--color-gray-90, initial);
         font-size: 16px;
         font-weight: 400;
         font-family: var(--font-main, sans-serif);
       }
       .loginMus-submit__icon {
         display: grid;
         font-weight: 600;
         font-size: 18px;
         color: var(--color-white, #fff);
         border: 0;
         border-radius: 100%;
         background-color: var(--color-background, initial);
         align-items: center;
         justify-content: center;
         line-height: normal;
         width: 40px;
         height: 40px;
         transition: background-color 0.123s;
       }

       .loginMus__mus-change-account,
       .loginMus__mus-user {
         border: 0;
         border-radius: 4px;
         transition: background-color 0.123s;
       }

       .loginMus__mus-change-account:hover,
       .loginMus__mus-user:hover {
         background-color: var(--color-cursor-hover, initial);
       }
       .loginMus__mus-change-account:active,
       .loginMus__mus-user:active {
         background-color: var(--color-cursor-active, initial);
       }
       .loginMus__mus-change-account:hover .loginMus-submit__icon {
         background-color: var(--color-white, #fff);
       }

       .formHook__idLoginFm .mForm__hasAcc--space {
         display: grid;
         grid-gap: 32px;
       }
       
       .loginMus__profile-phone:empty {
         display: none;
       }

       @media screen and (max-width: 524.99px) {
         .loginMus__mus-change-button,
         .loginMus__mus-button {
           padding: 16px 12px;
         }
         .loginMus__mus-status {
           transform: translate(-12px, -50%);
         }
         .loginMus__profile-phone {
           font-size: 13px;
         }
         .loginMus__profile-name {
           font-size: 14px;
         }
         .loginMus__mus-info {
           grid: auto / max-content 0.9fr minmax(25px, 0.15fr);
         }
         .loginMus-submit__text {
           font-size: 14px;
         }
         .loginMus-submit__box {
           grid: auto / auto 1fr;
         }
       }

    </style>
    <script>
    (() => {
      // ---------------- HELPERS ----------------
      class DomElement {
        // name?: string;
        constructor() {
          this.name = this.constructor.name;
        }

        clear({ target }) {
          if (target) {
            target.classList.remove(...target.classList);
            target.textContent = '';
          }
        }
        delete({ target }) {
          if (target) {
            if (Array.isArray(target) && target.every(Boolean)) {
              return [...target].map((f) => f.remove());
            }

            if (!Array.isArray(target)) return target.remove();
          }
          return false;
        }

        appendHtmlTemplate({ target, templateHtml, position = 'afterbegin' }) {
          if (target) target.insertAdjacentHTML(position, templateHtml);
        }
        appendClass({ target, addClass }) {
          if (target) {
            const bool = Boolean(addClass && Array.isArray(addClass));
            bool ? target.classList.add(...addClass) : target.classList.add(addClass);
          }
        }
        appendAttr({ hook, target, attrName }) {
          if (hook) {
            const item = hook.querySelector(target);
            if (item && attrName) item.dataset.js = attrName;
          }
          
        }
        replaceAllClass({ target, addClass }) {
          if (target) {
            target.classList.remove(...target.classList);
            const bool = Boolean(addClass && Array.isArray(addClass));
            bool ? target.classList.add(...addClass) : target.classList.add(addClass);
          }
        }
        renameClass({ target, oldClass, newClass }) {
          if (target) {
            target.classList.remove(oldClass);
            target.classList.add(newClass);
          }
        }
        appendToParent({ parent, moveMe }) {
          if (parent && moveMe) parent.append(moveMe);
        }

        removeAllChildrens({ parent }) {
          if (parent && parent.childElementCount) {
            parent.replaceChildren();
          }
        }

        
        /**
         * second CLone Code <- componentFormID__loginFmUserProfile
         * don't forget fix it to
         * */
        
        formatPhoneNumber({ text }) {
          const textPhone = String(text);
          const patternNumber = new RegExp(/^([78])(.{3})(.{3})(.{2})(.{2})$/); 

          const group = textPhone.match(patternNumber);
          if (group) {
            const start = group[1] ? '+7' : '8';
            return [start, ' ', group[2], ' ', group[3], ' ', group[4], ' ', group[5]].join('');
          }

          return false;
        }
      }

      const HtmlElement = new DomElement();

      // ---------------- OTHER ----------------
      const animate = ({ timing, draw, duration }) => {
        const start = performance.now();

        requestAnimationFrame(function animate(time) {
          let timeFraction = (time - start) / duration;
          if (timeFraction > 1) timeFraction = 1;

          let progress = timing(timeFraction);
          draw(progress);

          if (timeFraction < 1) requestAnimationFrame(animate);
        });
      };

      // ---------------- RUNNER ----------------
      const runner = {
        trapToAnomalusJs({ hook, selector }) {
          const attachTrap = hook.querySelector(selector.ID.musSelector);

          const templateTrap = `<div class="mus-container" data-unusefull="true" style="display: none;height: 0;width: 0; font-size: 0;"></div>`;
          attachTrap.insertAdjacentHTML('afterbegin', templateTrap);
        },

        attachClassToParent({ hook, selector }) {
          HtmlElement.appendClass({ target: hook.querySelector(selector.ID.musSelector), addClass: 'loginMus__box' });
        },

        firstRender({ hook, selector }) {
          const listLoginMusElements = [
            ...hook.querySelector(selector.ID.musSelector).querySelectorAll('[class^="mus"]'),
          ];

          if (listLoginMusElements) {
            for (const f of listLoginMusElements) {
              const state = f.dataset.hasOwnProperty('unusefull');
              // console.log(`[LOG] state`, `<${typeof state}>`, state)
              if (state) continue;
              f.className = `loginMus__${f.className.trim()}`;
            }
          }
          
        },

        attachFirstLetter({ hook, selector }) {
          const list = [...hook.querySelectorAll(selector.CLASS.bemMusUserLetter)];
          if (list) {
            for (const f of list) {
              const content = f.textContent;
              f.textContent = '';

              const templateHtml = `<div class="loginMus__icon">${content}</div>`;
              HtmlElement.appendHtmlTemplate({ target: f, templateHtml });
            }
          }
        },
        
        
        // remove hello text 
        fixProfileInfo({ list, pref }) {  
          if (list) {
            return list.map((f, index) => {
              const A = () => {
                HtmlElement.replaceAllClass({ target: f, addClass: pref.user });

                const txtLower = f.textContent.trim().toLocaleLowerCase();
                if (txtLower.includes(pref.txt)) {
                  const result = txtLower.replace(`${pref.txt},`, '').replace('!', '');
                  f.textContent = result.trim();
                }
              };

              const B = () => {
                HtmlElement.replaceAllClass({ target: f, addClass: pref.phone });
                const result = HtmlElement.formatPhoneNumber({ text: f.textContent });
                f.textContent = result ? result : '';
              };

              return index <= 0 ? A() : B();
            });
          }
        },

        transferLetter({ from, to }) {
          if (from && to) to.textContent = from.textContent.trim().charAt(0).toUpperCase();
        },

        showContent({ hook, selector }) {
          const target = hook.querySelector(selector.CLASS.bemMusContainer);
          if (target) target.removeAttribute('style');
        },

        reRenderButton({ hook, selector }) {
          const templateHtml = `
            <div class="loginMus-submit__box">
              <div class="loginMus-submit__icon">
                <img src="/sps/public/assets/themes/default_1680512023/assets/img/svg/plus.svg" alt="icon" />
              </div>
              <p class="loginMus-submit__text">Войти в другой аккаунт</p>
            </div>
          `;
          const target = hook.querySelector(selector.CLASS.bemMusChangeButton);

          HtmlElement.removeAllChildrens({ parent: target });
          HtmlElement.appendHtmlTemplate({ target, templateHtml });
        },

        attachIcons({ hook, selector }) {
          const listIcons = [...hook.querySelectorAll(selector.CLASS.bemMusStatus)];

          if (listIcons && Array.isArray(listIcons) && listIcons.every(Boolean)) {
            for (const f of listIcons) {
              if (f.childElementCount) {
                let content = f.lastElementChild;

                const listCode = {
                  удалить: '/sps/public/assets/themes/default_1680512023/assets/img/svg/trash.svg',
                  выйти: '/sps/public/assets/themes/default_1680512023/assets/img/svg/exit.svg',
                };

                const choiceSvg = (code) => {
                  const codeError = { ...listCode };
                  return ((f) => codeError[f] ? codeError[f] : '#')(code);
                };

                const result = choiceSvg(String(content.textContent).trim().toLocaleLowerCase());
                const templateHtml = `<img src=${result} alt="icon" />`;

                content.textContent = '';

                HtmlElement.appendHtmlTemplate({ target: content, templateHtml });
              }
            }
          }
        },

        handlerDeleteElement(event, { animateConfig }) {
          const timerAnime = 234;
          const target = event.target;

          if (target && target.classList.contains('loginMus__mus-delete')) {
            animate(animateConfig({ target, timerAnime }));

            const displayNone = () => (target.closest('.loginMus__mus-user').style.display = 'none');
            setTimeout(() => displayNone(), timerAnime + 75);
          }
        },

        handlerRestart(event, { hook, selector }) {
          const target = event.target;

          if (target && target.classList.contains('loginMus__mus-exit')) {
            const config = { attributes: false, childList: true, subtree: false };
            const observer = new MutationObserver((mutationsList, _observer) => {
              mutationCallback(mutationsList, _observer, { hook });
            });

            try {
              observer.observe(hook.querySelector(selector.ID.musSelector), config);
            } catch (error) {
              console.log(`[LOG] error`, `<${typeof error}>`, error);
            }
          }
        },

        clickTrashAndRemoveAccount({ hook, selector }) {
          const element = hook.querySelector(selector.ATTR.musAccounts);
          if (element) {
            element.addEventListener('click', (event) =>
              runner.handlerDeleteElement(event, {
                animateConfig({ target, timerAnime }) {
                  return {
                    duration: timerAnime,
                    timing: (progressAnimation) => progressAnimation,
                    draw: (progressAnimation) => {
                      const element_ = target.closest('.loginMus__mus-user');
                      element_.style.transform = `translateX(-${progressAnimation * 100}%)`;
                    },
                  };
                },
              })
            );
          }
        },

        profileAndPhone({ hook, selector }) {
          const list = [...hook.querySelectorAll(selector.CLASS.bemMusUserInfoBlock)];

          for (const f of list) {
            runner.fixProfileInfo({ list: [...f.querySelectorAll('p')], pref: selector.pref });
            runner.transferLetter({
              from: f.querySelector(selector.CLASS.bemProfileName),
              to: f.parentElement.querySelector(selector.CLASS.bemIcon),
            });
          }
        },

        clickExitAndRestartJs({ hook, selector }) {
          const restart = hook.querySelector(selector.ATTR.musAccounts);
          if (restart) {
            return restart.addEventListener('click', (event) => runner.handlerRestart(event, { hook, selector }));
          }
        },
      };
    
    
      
    
      // ---------------- STATE ----------------
      const stateMus = ({ hook, mutationElement, selector }) => {
        const state = mutationElement.childElementCount;

        if (state) {
          /**
           * pre safe first script render
           * dont move pls!
           */
          runner.trapToAnomalusJs({ hook, selector });

          /**
           * BEM classes do not yet exist,
           * so you need to nest in the function itself
           */
          runner.attachClassToParent({ hook, selector });
          runner.firstRender({ hook, selector });
          runner.attachFirstLetter({ hook, selector });

          runner.profileAndPhone({ hook, selector });

          runner.reRenderButton({ hook, selector });
          runner.attachIcons({ hook, selector });

          HtmlElement.appendAttr({
            hook,
            target: selector.CLASS.bemMusAccounts,
            attrName: selector.state.musAccounts,
          });

          runner.clickTrashAndRemoveAccount({ hook, selector });
          runner.clickExitAndRestartJs({ hook, selector });          
          runner.showContent({ hook, selector });
        }
      };

      // ---------------- MUTATION_CB ----------------
      const mutationCallback = (mutationsList, _observer, { hook }) => {
        const selector = {
          ID: {
            musSelector: '#mus-selector',
          },
          CLASS: {
            musContainer: '.mus-container',
            musHasAcc: '.mus-has-acc',
            bemMusContainer: '.loginMus__mus-container',
            bemMusUserLetter: '.loginMus__mus-user-letter',
            bemIcon: '.loginMus__icon',
            bemProfileName: '.loginMus__profile-name',
            bemMusUserInfoBlock: '.loginMus__mus-user-info-block',
            bemMusChangeButton: '.loginMus__mus-change-button',
            bemMusStatus: '.loginMus__mus-status',
            bemMusAccounts: '.loginMus__mus-accounts',
          },
          ATTR: {
            musAccounts: '[data-js="mus-accounts"]',
          },
          state: {
            musAccounts: 'mus-accounts',
            musNoAcc: 'mus-no-acc',
            musHasAcc: 'mus-has-acc',
          },
          element: {
            noAccount: '#other-user .mus-no-acc button',
          },
          pref: {
            user: 'loginMus__profile-name',
            phone: 'loginMus__profile-phone',
            txt: 'здравствуйте',
          },
        };

        if (Array.isArray(mutationsList) && mutationsList.some(Boolean)) {
          const MutationRecord = mutationsList.find((f) => [...f.addedNodes].some(Boolean));

          if (MutationRecord && MutationRecord.addedNodes) {
            const [mutationElement] = MutationRecord.addedNodes;
            stateMus({ hook, mutationElement, selector });
          }
        }

        // console.log(`[#mus-selector] _observer.disconnected`, _observer);
        return _observer.disconnect();
      };
      // ---------------- MUTATION_CB__END ----------------

      const run = () => {
        // --------------- OBSERVER ---------------
        const hook = document.querySelector('.formHook__style');

        const config = { attributes: false, childList: true, subtree: false };
        const observer = new MutationObserver((mutationsList, _observer) =>
          mutationCallback(mutationsList, _observer, { hook })
        );

        try {
          observer.observe(hook.querySelector('#mus-selector'), config);
        } catch {
          observer.disconnect();
        }
        // --------------- OBSERVER__END ---------------
      };

      document.addEventListener('DOMContentLoaded', () => run());
    })();
    </script>
  
    
    <style>
      
      /* stylelint-disable property-no-vendor-prefix */
      /* stylelint-disable selector-id-pattern */
      /* stylelint-disable selector-class-pattern */

      .formRecovery__box {
        margin-top: 40px;
      }
      .formRecovery__container {
        display: grid;
        align-items: stretch;
        justify-content: stretch;
      }

      .formRecovery__submit {
        margin-top: 48px;
        display: grid;
        background-color: var(--color-blue-60, #04c);
        border-radius: 4px;
        border: 0;
        color: var(--color-white, #fff);
        font-family: var(--font-main, sans-serif);
        font-size: 16px;
        font-weight: 400;
        padding: 12px 32px;
        align-items: center;
        justify-content: center;
        transition: background-color 0.123s;
      }
      .formRecovery__submit:hover {
        background-color: var(--color-blue-70, #04c);
        color: var(--color-white, #fff);
      }
      .formRecovery__submit:focus {
        background-color: var(--color-blue-60, #04c);
        color: var(--color-white, #fff);
      }
      .formRecovery__submit:active {
        background-color: var(--color-blue-80, initial);
        color: var(--color-white, #fff);
      }

      .formRecovery__container .has-success .form-control {
        border-color: unset;
        box-shadow: unset;
        border: 1px solid var(--color-gray-30, #c4c8d0);
      }
      .formRecovery__container .parsley-custom-error-message::before {
        content: '';
        display: inline-grid;
        width: 17px;
        height: 16px;
        background-image: url('/sps/public/assets/themes/default_1680512023/assets/img/svg/errorMsg.svg');
        background-position: center;
        background-size: contain;
      }
      .formRecovery__container .parsley-custom-error-message {
        display: inline-grid !important;
      }
      .formRecovery__container .parsley-required::before {
        content: '';
        display: inline-grid;
        width: 17px;
        height: 16px;
        background-image: url('/sps/public/assets/themes/default_1680512023/assets/img/svg/errorMsg.svg');
        background-position: center;
        background-size: contain;
      }
      .formRecovery__container .parsley-required {
        display: inline-grid !important;
      }

      .formRecovery__container .form-login__label {
        display: grid;
        grid-gap: 8px;
      }

      .formSpace__cfmFm .form-login__label {
        grid-gap: 8px;
      }
      .formSpace__cfmFm .formRecovery__container {
        margin-top: 40px;
      }

      .formRecovery__container .form-login__label:not(:first-child) {
        margin-top: 24px;
      }

      .formRecovery__container .help-block {
        margin: unset;
        display: none;
      }

      .formRecovery__container input:-webkit-autofill::first-line {
        font-family: var(--font-main, sans-serif);
        font-size: 16px;
        font-weight: 400;
      }
      .formRecovery__container input:focus {
        border-color: var(--color-blue-30, initial);
        box-shadow: 0 0 0 3px var(--color-blue-30, initial);
      }
      .formRecovery__container input:hover {
        border-color: var(--color-blue-30, initial);
      }

      .formRecovery__container .help-block.filled {
        display: block;
        position: relative;
        margin: 0;
      }
      .formRecovery__container .help-block.filled span {
        color: var(--color-error-60, crimson);
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        align-items: center;
        justify-content: start;
        grid-auto-flow: column;
        grid-gap: 8px;
      }

      .formRecovery__container .has-error .form-control {
        box-shadow: unset;
        border-color: var(--color-error-60, crimson);
      }

      .formRecovery__container label.control-label {
        color: var(--color-gray-90, initial);
        font-family: var(--font-main, sans-serif);
        font-weight: 600;
        font-size: 16px;
      }

      .formRecovery__container input:not([type='checkbox'], [type='radio']) {
        background-color: var(--color-null, initial);
        border-radius: 4px;
        border: 1px solid var(--color-gray-30, #c4c8d0);
        color: var(--color-gray-90, initial);
        display: grid;
        font-family: var(--font-main, sans-serif);
        font-size: 16px;
        font-weight: 400;
        line-height: 24px;
        height: unset;
        max-height: 48px;
        padding: 12px 16px;
        width: unset;
        transition: border-color 0.123s ease;
      }

      .formRecovery__code-input {
        max-width: 100px;
      }
      blockquote.formRecovery__warn-info {
        border: 0;
        padding: unset;
        margin: unset;
        transition: margin-top .123s;
      }
      .formRecovery__warn-info {
        font-family: var(--font-main, sans-serif);
        color: var(--color-gray-90, initial);
        font-weight: 400;
        font-size: 16px;
      }

      /* HACK */

      .formRecovery__container .form-group {
        margin: unset;
      }
      .formRecovery__container .form-vertical .control-label {
        padding: unset;
        margin: unset;
      }
      .formRecovery__container ::placeholder {
        color: #0000;
      }
      .formRecovery__container .radio-custom label::before {
        content: '';
        position: absolute;
        top: 3px;
        left: 0;
        border-radius: 100%;
        width: 20px;
        height: 20px;
        border: 1px solid var(--color-gray-30, #c4c8d0);
        background-color: #0000;
        transition-property: background-color, border-color;
        transition-duration: 0.123s;
      }
      .formRecovery__container .radio-custom input:where([type='checkbox'], [type='radio']):checked + label::before {
        background-color: var(--color-blue-60, #04c);
        border-color: var(--color-blue-60, #04c);
      }
      .formRecovery__container .radio-custom input:where([type='checkbox'], [type='radio']):hover + label::before {
        border-color: var(--color-blue-60, #04c);
      }
      .formRecovery__container .radio-custom input:where([type='checkbox'], [type='radio']):checked + label::after {
        content: '';
        position: absolute;
        top: 3px;
        left: 0;
        border: 0;
        border-radius: 100%;
        width: 8px;
        height: 8px;
        background-color: var(--color-white, #fff);
        transform: translate(75%, 75%);
      }
      .formRecovery__container input:where([type='checkbox'], [type='radio']) + label p {
        font-family: var(--font-main, sans-serif);
        color: var(--color-gray-90, initial);
        font-weight: 400;
        font-size: 16px;
      }
      .formRecovery__container .radio-custom label {
        display: grid;
        word-break: break-word;
        margin-right: unset;
        margin-bottom: unset;
      }

      .formSpace__chooseFm .formRecovery__submit,
      .formSpace__cfmFm .formRecovery__submit {
        margin-top: 48px;
      }

      .formSpace__chooseFm .formRecovery__container {
        margin-top: 40px;
      }

      .formHook__proofEmail .page-title + blockquote {
        margin-top: 40px;
      }
      .formRecovery__verifyDiv .page-title.space + blockquote {
        margin-top: 40px;
      }

      .formRecovery__verifyDiv .page-title + .blockquote-warning + #verifyDiv {
        margin-top: 40px;
      }

      .formRecovery__verifyDiv .formRecovery__warn-info + #htotpFm {
        margin-top: 24px;
      }

      .formRecovery__verifyDiv blockquote.blockquote-warning + p.text-danger {
        margin: 16px 0;
      }

      .formRecovery__verifyDiv #pswdFm {
        margin-top: 40px;
      }

      .formRecovery__verifyDiv input:not([type='checkbox'], [type='radio']) {
        background-color: var(--color-null, initial);
        border-radius: 4px;
        border: 1px solid var(--color-gray-30, #c4c8d0);
        color: var(--color-gray-90, initial);
        display: grid;
        font-family: var(--font-main, sans-serif);
        font-size: 16px;
        font-weight: 400;
        line-height: 24px;
        height: unset;
        max-height: 48px;
        padding: 12px 16px;
        width: unset;
        transition: border-color 0.123s ease;
      }
      .formRecovery__verifyDiv .has-error .form-control {
        box-shadow: unset;
        border-color: var(--color-error-60, crimson);
      }
      .formRecovery__verifyDiv .help-block.filled {
        display: block;
        position: relative;
        margin: 0;
      }
      .formRecovery__verifyDiv .help-block.filled span {
        color: var(--color-error-60, crimson);
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        align-items: center;
        justify-content: start;
        grid-auto-flow: column;
        grid-gap: 8px;
      }
      .formRecovery__verifyDiv form {
        display: grid;
        align-items: center;
        justify-content: stretch;
      }
      .formRecovery__verifyDiv blockquote.blockquote-warning {
        border-color: var(--color-yellow-60, initial);
        border-radius: 2px;
        background-color: var(--color-yellow-20, initial);
        font-family: var(--font-main, sans-serif);
        color: var(--color-gray-90, initial);
        font-weight: 400;
        font-size: 16px;
        border-left: 4px solid var(--color-yellow-60, initial);
      }
      .formRecovery__verifyDiv .has-success .form-control {
        border-color: unset;
        box-shadow: unset;
        border: 1px solid var(--color-gray-30, #c4c8d0);
      }
      .formRecovery__verifyDiv .parsley-custom-error-message::before {
        content: '';
        display: inline-grid;
        width: 17px;
        height: 16px;
        background-image: url('/sps/public/assets/themes/default_1680512023/assets/img/svg/errorMsg.svg');
        background-position: center;
        background-size: contain;
      }
      .formRecovery__verifyDiv .parsley-custom-error-message {
        display: inline-grid !important;
      }
      .formRecovery__verifyDiv .parsley-required::before {
        content: '';
        display: inline-grid;
        width: 17px;
        height: 16px;
        background-image: url('/sps/public/assets/themes/default_1680512023/assets/img/svg/errorMsg.svg');
        background-position: center;
        background-size: contain;
      }
      .formRecovery__verifyDiv .parsley-required {
        display: inline-grid !important;
      }
      .formRecovery__verifyDiv .form-group {
        display: grid;
        grid-gap: 8px;
      }
      .formRecovery__verifyDiv .form-group input {
        max-width: 100px;
      }
      .formRecovery__verifyDiv #showMethodsBtn.btn-meth {
        border: 0;
        background-color: #0000;
        display: grid;
        align-items: center;
        justify-content: stretch;
        width: auto;
        padding: 0;
        margin: 0;
        user-select: none;
        height: auto;
        color: var(--color-gray-90, initial);
        font-family: var(--font-main);
        font-weight: 400;
        transition: color 0.234s;
      }
      .formRecovery__verifyDiv #showMethodsBtn.btn-meth:hover {
        color: var(--color-blue-60, #04c);
      }

      .formRecovery__verifyDiv #showMethodsList .btn-meth {
        display: grid;
        align-items: center;
        justify-content: stretch;
        background: none;
        border-radius: 4px;
        border: 1px solid var(--color-gray-30, #c4c8d0);
        box-shadow: none;
        color: var(--color-gray-90, initial);
        filter: none;
        font-family: var(--font-main, sans-serif);
        font-size: 14px;
        font-style: normal;
        font-weight: 400;
        height: auto;
        line-height: normal;
        margin: 0;
        padding: 12px 32px;
        user-select: none;
        white-space: unset;
        width: auto;
        word-break: break-word;
        transition: background-color 0.234s;
        margin-top: 12px;
      }

      .formRecovery__verifyDiv #showMethodsList .btn-meth:not(:first-child) {
        margin-top: 12px;
      }

      .formRecovery__verifyDiv #showMethodsList .btn-meth:hover {
        background-color: var(--color-cursor-hover, initial);
      }
      .formRecovery__verifyDiv #showMethodsList .btn-meth:active {
        background-color: var(--color-cursor-active, initial);
      }

      .formRecovery__verifyDiv .methods-cfm {
        display: grid;
        grid-gap: 16px;
      }

      .formRecovery__verifyDiv span[class^='list-'] {
        line-height: 24px;
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        color: var(--color-blue-60, #04c);
      }
      .formRecovery__verifyDiv span[class^='list-']:hover {
        text-decoration-line: underline;
        text-underline-position: under;
        text-decoration-color: var(--color-blue-60, #04c);
      }
      .formSpace__chooseFm .formRecovery__warn-info {
        margin-top: 40px;
      }
      .formRecovery__optional .blockquote-warning + .formRecovery__warn-info {
        margin: 24px 0;
      }
      .formRecovery__verifyDiv #pswdFm input[type='password'] {
        max-width: unset;
      }
      .formRecovery__verifyDiv #pswdFm input[type='text'] {
        max-width: unset;
      }
      .formRecovery__verifyDiv #pswdFm .form-login__label label {
        font-family: var(--font-main, sans-serif);
        font-weight: 600;
        font-size: 16px;
        color: var(--color-gray-90, initial);
      }
      .formRecovery__verifyDiv #pswdFm label.form-toggle__label {
        font-family: var(--font-main, sans-serif);
        font-weight: normal;
        font-size: 16px;
        color: var(--color-gray-90, initial);
      }
      .formRecovery__verifyDiv #pswdFm .form-login__label .form-input {
        display: grid;
        justify-content: stretch;
      }
      .formRecovery__verifyDiv #pswdFm .formRecovery__warn-info {
        margin-top: 24px;
        display: none;
      }

      .formRecovery__verifyDiv #resendDiv .formRecovery__warn-info {
        display: grid;
        color: var(--color-gray-90, initial);
        border-left: 4px solid var(--color-error-60, crimson);
        border-radius: 2px;
        background-color: var(--color-error-20, initial);
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        padding: 20px 16px;
      }

      .clockTimer__label {
        margin-top: 24px;
        display: grid;
        color: var(--color-gray-90, initial);
        font-family: var(--font-main, sans-serif);
        font-weight: 600;
        font-size: 16px;
      }
      .clockTimer__result {
        display: grid;
        color: var(--color-gray-80, initial);
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 14px;
        grid-auto-flow: column;
        justify-content: start;
        grid-gap: 6px;
        grid-auto-columns: auto;
      }

      .formHook__proofEmail .cfmButton__box {
        display: grid;
        justify-content: stretch;
        grid-gap: 16px;
      }

      .formHook__proofEmail .form-login__label:not(:first-child) {
        margin-top: 40px;
      }

      .formHook__proofEmail .cfmButton__skip {
        display: grid;
        border: 1px solid var(--color-gray-30, #c4c8d0);
        border-radius: 4px;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        line-height: normal;
        text-transform: none;
        user-select: none;
        text-decoration: none;
        color: var(--color-gray-90, initial);
        padding: 12px 32px;
        margin-top: unset;
        overflow: hidden;
        transition: padding 0.123s;
      }
      .formHook__proofEmail .cfmButton__skip:hover {
        background-color: var(--color-cursor-hover, initial);
      }
      .formHook__proofEmail .cfmButton__skip:active {
        background-color: var(--color-cursor-active, initial);
      }
      .formHook__proofEmail .cfmButton__skip:focus {
        box-shadow: 0 0 0 3px var(--color-cursor-focus, initial);
      }

      .formHook__proofEmail .formRecovery__container {
        margin-top: unset;
      }

      .formRecovery__optional .blockquote-warning {
        margin: 0;
        margin-top: 40px;
      }

      .formRecovery__optional .hide-me {
        display: none;
      }

      .recoveryOptional__hr {
        display: grid;
        align-items: center;
        justify-content: center;
        margin: 32px 0 0;
        position: relative;
      }
      .recoveryOptional__hr::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        display: inline-grid;
        width: 100%;
        height: 1px;
        background-color: var(--color-gray-20, initial);
        transform: translate(-50%, -50%);
        border: 0;
      }
      .recoveryOptional__hr-text {
        background-color: var(--color-white, #fff);
        color: var(--color-gray-60, initial);
        display: grid;
        font-family: var(--font-main, sans-serif);
        font-size: 14px;
        font-weight: 400;
        padding: 0 8px;
        position: relative;
        align-items: center;
        justify-content: center;
        line-height: normal;
        height: auto;
      }
      .recoveryOptional__label {
      }
      .recoveryOptional__footer {
        margin-top: 24px;
        font-family: var(--font-main, sans-serif);
        font-weight: 600;
        font-size: 16px;
        line-height: 20px;
        color: var(--color-gray-90, initial);
        display: grid;
        grid-gap: 16px;
      }
      .recoveryOptional__buttons {
        display: grid;
        grid-gap: 16px;
        margin-top: 16px;
        grid: minmax(auto, 48px) / 1fr minmax(auto, 48px);
      }
      .recoveryOptional__buttons a {
        text-transform: lowercase;
      }
      .recoveryOptional__button {
        flex: 1;
        border: 1px solid var(--color-gray-30, #c4c8d0);
        border-radius: 4px;
        align-items: center;
        justify-content: stretch;
        font-size: 16px;
        line-height: normal;
        padding: 11px;
        text-transform: none;
        user-select: none;
        overflow: hidden;
        text-decoration: none;
        transition: background-color 0.123s;
        cursor: pointer;
      }
      .recoveryOptional__button:hover {
        background-color: var(--color-cursor-hover, initial);
        text-decoration-line: unset;
        text-underline-position: unset;
        text-decoration-color: unset;
      }
      img.recoveryOptional__icon {
        display: inline-grid;
        width: 24px;
        height: 24px;
      }
      .recoveryOptional__social--main {
        display: grid;
        grid-gap: 16px;
      }

      .recoveryOptional__text {
        text-decoration: none;
        color: var(--color-gray-90, initial);
        font-size: 14px;
        text-transform: unset;
        display: grid;
        align-items: center;
        justify-content: center;
      }
      .recoveryOptional__item .recoveryOptional__text {
        display: grid;
        font-size: 16px;
        line-height: normal;
        text-transform: none;
        user-select: none;
        text-decoration: none;
        color: var(--color-gray-90, initial);
        margin-top: unset;
        overflow: hidden;
        font-weight: 400;
      }
      .recoveryOptional__item {
        display: grid;
        grid: auto / auto 1fr;
        align-items: center;
        justify-content: stretch;
        grid-gap: 1rem;
      }

      .formRecovery__optional blockquote + #verifyDiv + #resendDiv {
        margin-top: 24px;
      }
      
       
      .formRecovery__optional #htotpFm {
        display: grid;
      }
      .formRecovery__optional #otp {
        max-width: 100px;
      }
      
      .formRecovery__optional blockquote.blockquote-warning {
        border-color: var(--color-yellow-60, initial);
        border-radius: 2px;
        background-color: var(--color-yellow-20, initial);
        font-family: var(--font-main, sans-serif);
        color: var(--color-gray-90, initial);
        font-weight: 400;
        font-size: 16px;
        border-left: 4px solid var(--color-yellow-60, initial);
      }
      
      .formHook__altProofEmailCode .space {
        margin-top: 40px;
      }
      
      .formHook__altProofEmailCode .form-login__label {
        margin-top: 24px;
      }
      .formHook__altProofEmailCode input:focus {
        border-color: var(--color-blue-30, initial);
        box-shadow: 0 0 0 3px var(--color-blue-30, initial);
      }

      @media screen and (max-width: 870.99px) {
        .formSpace__chooseFm .formRecovery__submit,
        .formSpace__cfmFm .formRecovery__submit {
          margin-top: 32px;
        }
        .formSpace__chooseFm .page-title {
          margin-bottom: 24px;
        }
        .formSpace__chooseFm .formRecovery__container {
          margin-top: 32px;
        }
      }

      @media screen and (max-width: 524.99px) {
        .formRecovery__container .formRecovery__submit {
          margin-top: 32px;
        }
        .formRecovery__box {
          margin-top: 32px;
        }
      }

      @media screen and (max-width: 499.99px) {
        .formHook__proofEmail .page-title {
          font-size: 21px;
        }
        .formHook__proofEmail .page-title + blockquote {
          margin-top: 7px;
        }
        .formRecovery__box {
          margin-top: 24px;
        }
      }
      @media screen and (max-width: 425.99px) {
        .recoveryOptional__item {
          display: grid;
          grid: auto / 0 1fr;
          align-items: center;
          justify-content: stretch;
          grid-gap: 0;
        }
        .clockTimer__result {
          grid-auto-flow: row;
        }
      }

    </style>

    
    
    
    <script>
    // formRecoveryOptional: 'formRecovery__optional',
    // formRecoveryVerifyDiv: 'formRecovery__verifyDiv',
    // passScoreVProgress: '[data-js="passScore__vProgress"]',
      (() => {
        class Helpers {
          deleteBlockquotePrimary({ hook, selector }) {
            const target = hook.querySelector(selector);
            if (target) {
              target.querySelector('blockquote.blockquote-primary').remove();
            }
          }
          deleteElement({ target }) {
            if (target) {
              if (Array.isArray(target) && target.every(Boolean)) {
                return [...target].map((f) => f.remove());
              }

              if (!Array.isArray(target)) return target.remove();
            }
            return false;
          }
          addClass({ hook, selector, className }) {
            const target = hook.querySelector(selector);
            if (target) target.classList.add(className);
          }
          clearClassList({ hook, selector }) {
            const target = hook.querySelector(selector);
            if (target) target.classList.remove(...target.classList);
          }

          moveTextTo({ hook, from, to, templateHtml }) {
            const _from = hook.querySelector(from);
            const _to = hook.querySelector(to);
            if (_from && _to) {
              const text = _from.textContent.trim();
              _from.textContent = '';
              _to.insertAdjacentHTML('afterbegin', templateHtml({ text }));
            }
          }
        }
        const Helper = new Helpers();

        const optionalRender = ({ hook, styleHook }) => {
          const selectorShowMethods = document.querySelector('#showMethodsBtn');
          if (selectorShowMethods && selectorShowMethods.parentElement) {
         
            
            const selectorParent = selectorShowMethods.parentElement;
            selectorParent.classList.add("hide-me");

            const changeIcon = ({ text, icon = '' }) => {
              const A = "/sps/public/assets/themes/default_1680512023/assets/img/svg/e-mail.svg";
              const B = "/sps/public/assets/themes/default_1680512023/assets/img/svg/sms.svg";
              return String(text).includes("почт") ? A : B;
            };

            const listHref = [...document.querySelectorAll("#showMethodsList a[href]")].reduce((accumulator, f, index) => {
              accumulator[index] = {
                text: f.textContent,
                href: f.href,
                source: changeIcon({ text: f.text, icon: "/sps/public/assets/themes/default_1680512023/assets/img/svg/sms.svg" }),
              };
              
              return accumulator;
            }, []);

            const listText = listHref.reduce((accumulator, f) => {
              accumulator += `
                <a class="recoveryOptional__button" href="${f.href}">
                    <div class="recoveryOptional__item">
                      <img class="recoveryOptional__icon" src="${f.source}" alt="Icon">
                      <span class="recoveryOptional__text">${f.text}</span>
                    </div>
                </a>`.trim();
            
              return accumulator;
            }, '');

            const temporary = `
              <div class="recoveryOptional__box" data-js="recoveryOptional-collections">
                <div class="recoveryOptional__hr"><span class="recoveryOptional__hr-text">или</span></div>

                <div class="recoveryOptional__group recoveryOptional__footer">
                  <div class="recoveryOptional__label">Подтвердить с помощью</div>
                  <div class="recoveryOptional__social--main" data-js="recoveryOptional-buttons-generator">
                    ${listText}
                  </div>
                </div>

              </div>`.trim();

            selectorParent.insertAdjacentHTML('beforebegin', temporary);
          }
        };

        // INITIALIZATION_CLOCK
        const timerAttachServerClock = (selector) => {
          
          const temporary = `
            <template id="timeLeft">{2}</template>
          `.trim();
          selector.parentElement.insertAdjacentHTML('beforeend', temporary);
        };
        const timerAttachLabel = (selector) => {
          const temporary = `
            <h4 class="clockTimer__label">Код подтверждения</h4>
          `.trim();
          selector.insertAdjacentHTML('beforebegin', temporary);
        };
        const timerConvertorSeconds = (targetTimerBundleID) => {
          const selector = document.querySelector(targetTimerBundleID);
          if (selector) {
            const clockSeconds = Number(selector.textContent.trim() || 999);
            const getStringClock = new Date(new Date().setHours(0, 0, 0, 0) + clockSeconds * 1000);

            const etc = getStringClock
              .toLocaleTimeString('en-UK', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false,
              })
              .split(/:| /)
              .map(Number);

            const [hh, mm, ss] = etc;
            return { hh, mm, ss, clock: clockSeconds };
          }
        };
        const timerAttachResultClock = ({ selector }) => {
          const temporary = `
            <p class="clockTimer__result">Отправить ещё раз через <span data-js="clock-timer-interval"></span></p>
          `.trim();
          selector.insertAdjacentHTML('afterend', temporary);
        };

        const timerSingleReplaceClock = ({ target, isos }) => {
          const selector = document.querySelector(target);
          if (selector && isos) {
            const { hh, mm, ss } = isos;

            const minutes = mm > 0 ? `${mm} мин` : '';
            const seconds = ss > 0 ? `${ss} сек` : '';
            selector.textContent = `${minutes} ${seconds}`.trim();
          }
        };
        // INITIALIZATION_CLOCK__END



        const tryBlockingInput = ({ selector }) => {
          selector.addEventListener('keydown', (event) => {
              //  console.log('[eventKey]', 'eventKey', event.key);
            const eventKey = event.key;
            const listBlack = ['ArrowDown', 'ArrowUp', '+', '-', 'e', 'E', ','];
            
            if (listBlack.includes(eventKey)) {
              return event.preventDefault();
            }
          });

          selector.addEventListener('wheel' , (event) => event.preventDefault());
        };

        const runner = {
          formRecoveryAttachID({ hook, selector }) {
            const listID = [{ name: selector.ID.cfmFm }, { name: selector.ID.chooseFm }];

            for (const f of listID) {
              if (hook.querySelector(f.name)) {
                const renameClass = `formSpace__${f.name.replace('#', '')}`;
                hook.classList.add(renameClass);
              }
            }
          },

          formRecoveryBase({ hook, selector }) {
            Helper.deleteBlockquotePrimary({ hook, selector: selector.ID.searchDiv });
            Helper.clearClassList({ hook, selector: selector.ID.startBtn });

            const listAddClass = [
              { selector: selector.ID.startFm, className: selector.element.formBox },
              { selector: selector.ID.searchDiv, className: selector.element.formContainer },
              { selector: selector.ID.startBtn, className: selector.element.formSubmit },
            ];
            for (const f of listAddClass) {
              Helper.addClass({ hook, selector: f.selector, className: f.className });
            }
          },
          formRecoveryEmail({ hook, selector }) {
            const listCleanSubmit = [
              { selector: selector.ID.cfmBtn },
              { selector: selector.ID.resendBtn },
              { selector: selector.ID.chooseBtn },
            ];
            for (const f of listCleanSubmit) {
              Helper.clearClassList({ hook, selector: f.selector });
            }

            const listAddClass = [
              { selector: selector.ID.cfmFm, className: selector.element.formContainer },
              { selector: selector.ID.cfmBtn, className: selector.element.formSubmit },

              { selector: selector.ID.resendFm, className: selector.element.formContainer },
              { selector: selector.ID.resendBtn, className: selector.element.formSubmit },

              { selector: selector.ID.chooseFm, className: selector.element.formContainer },
              { selector: selector.ID.chooseBtn, className: selector.element.formSubmit },

              { selector: selector.ID.cfmCode, className: selector.element.formCodeInput },

              { selector: selector.mix.blockquote, className: selector.element.formWarnInfo },
            ];
            for (const f of listAddClass) {
              Helper.addClass({ hook, selector: f.selector, className: f.className });
            }
          },

          formRecoverySMS({ hook, selector }) {
            const staticCode = hook.querySelector(selector.CLASS.fs14);
            if (staticCode) staticCode.classList.remove(selector.CLASS.fs14);

            const radio = hook.querySelector(selector.ID.radioFirst);
            if (radio) radio.checked = true;
          },

          formRecoveryMethodTwo({ hook, selector }) {
            if (!hook) return;
            
            const formOne = hook.querySelector(selector.ID.formOne);
            const formTwo = hook.querySelector(selector.ID.formTwo);
            const formExtra = hook.querySelector(selector.ID.htotpFm);
            const formExtra2 = hook.querySelector(selector.ID.pswdFm);
            
            
            /**
             * validateState -- probable HACK
             * its mean if all tracked selectors false,
             * trying catch switcher button to apply styles 
             * */
            const validateState = {
              main: [(formOne && formTwo), formExtra, formExtra2].some(Boolean),
              extra: Boolean(hook.querySelector(selector.ID.showMethodsBtn)),
            } 
             
            const altBoolToTriggerStyle = validateState.main 
                ? true 
                : validateState.extra;
            
            if (altBoolToTriggerStyle) {
              if (validateState.main) {
                formTwo ? formTwo.classList.add('hide') : undefined;
              }

              if (formOne) {
                const rootHook = String(selector.ID.formOne).replace('#', 'formRecovery__');
                hook.classList.add(rootHook);
              }

              /**
               * OPTIONAL
               * html render new footer on recovery page
               */
              const optName = selector.element.formRecoveryOptional;
              const verifyDiv = selector.element.formRecoveryVerifyDiv;
              const styleHookTrigger = selector.element.passScoreVProgress;
              
              document.querySelector(styleHookTrigger) 
                ? hook.classList.add(optName, verifyDiv) 
                : hook.classList.add(optName);
              optionalRender({ hook, styleHook: optName });

              /**  end */  

              const listButtons = hook.querySelectorAll('[type="button"]') || [];
              for (const f of listButtons) {
                if (f) {
                  f.classList.remove(...f.classList);
                  f.classList.add(selector.element.formSubmit);
                }
              }

              const listID = hook.querySelectorAll('.blockquote-primary') || [];
              const listPureID = [...listID].filter((f) => !f.classList.contains(selector.element.formWarnInfo));
              for (const f of listPureID) {
                if (f) f.classList.add(selector.element.formWarnInfo);
              }
            }
          },

          formTryAgain({ hook, selector }) {
            Helper.clearClassList({ hook, selector: selector.ID.restartBtn });
            Helper.addClass({ hook, selector: selector.ID.restartFm, className: selector.element.formContainer });
            Helper.addClass({ hook, selector: selector.ID.restartBtn, className: selector.element.formSubmit });
          },
          addSpaceToTitlte({ hook }) {
            const targetBlockquote = hook.querySelector('h1 + blockquote + blockquote');
            const targetPageTitle = hook.querySelector('.page-title');
            if (targetBlockquote && targetPageTitle) {
              Helper.addClass({ hook, selector: '.page-title', className: 'space' });
            }
          },

          proofEmail({ hook, selector }) {
            const list = [selector.ID.cfmFm, selector.ID.cfmBtn, selector.ID.skipFm];

            const result = list.every((f) => hook.querySelector(f));
            if (result) {
              hook.classList.add('formHook__proofEmail');

              hook.querySelector(selector.ID.cfmBtn).parentElement.classList.add('cfmButton__box');
              hook.querySelector(selector.ID.cfmFm).parentElement.classList.add('cfmForm__box');

              Helper.clearClassList({ hook, selector: selector.ID.skipBtn });
              Helper.addClass({ hook, selector: selector.ID.skipBtn, className: 'cfmButton__skip' });
            }
          },
          
          altProofEmailCode({ hook, selector }) {
            const list = [selector.ID.checkFm, selector.ID.verifyBtn, selector.ID.code];

            const result = list.every((f) => hook.querySelector(f));
            if (result) {
              hook.classList.add('formHook__altProofEmailCode');
              hook.classList.add('formRecovery__verifyDiv');
              
              const listAddClass = [
                { selector: selector.ID.expiredDiv, className: 'hide' },
                { selector: selector.ID.expiredDiv, className: 'space' },
                { selector: selector.ID.checkDiv, className: 'space' },
                { selector: `${selector.ID.checkFm} .blockquote-primary`, className: 'formRecovery__warn-info' },
              ];
              for (const f of listAddClass) {
                Helper.addClass({ hook, selector: f.selector, className: f.className });
              }
              
            }
          },
          

          attachTimer({ targetID, targetTimerBundleID, elementLabel = true }) {
            const selector = document.querySelector(targetID);
            // console.log(`[LOG] selector`, `<${typeof selector}>`, selector)
            if (selector) {
              timerAttachServerClock(selector);
              if (elementLabel) timerAttachLabel(selector);

              // console.log('[SCALA]', 'elementLabel');
              timerAttachResultClock({ selector });
              tryBlockingInput({ selector });

              const timeOutLoop = setInterval(() => {
                const _isos = timerConvertorSeconds(targetTimerBundleID);
                timerSingleReplaceClock({
                  target: '[data-js="clock-timer-interval"]',
                  isos: _isos,
                });

                if (_isos && _isos.clock <= 1) clearInterval(timeOutLoop);
              }, 100);
            }
          },
        };

        const run = () => {
          const hook = document.querySelector('.formHook__style');
          
          const selector = {
            ID: {
              searchDiv: '#searchDiv',
              startFm: '#startFm',
              startBtn: '#startBtn',
              cfmFm: '#cfmFm',
              cfmBtn: '#cfmBtn',
              skipFm: '#skipFm',
              skipBtn: '#skipBtn',
              cfmCode: '#cfmCode',
              resendFm: '#resendFm',
              resendBtn: '#resendBtn',
              restartFm: '#restartFm',
              restartBtn: '#restartBtn',
              chooseFm: '#chooseFm',
              chooseBtn: '#chooseBtn',
              radioFirst: '#radio_0',
              formOne: '#verifyDiv',
              formTwo: '#resendDiv',
              htotpFm: '#htotpFm',
              pswdFm: '#pswdFm',
              showMethodsBtn: '#showMethodsBtn',
              checkFm: '#checkFm', 
              verifyBtn: '#verifyBtn', 
              code: '#code', 
              expiredDiv: '#expiredDiv', 
              checkDiv: '#checkDiv', 
            },
            CLASS: {
              fs14: '.fs14',
            },
            element: {
              formBox: 'formRecovery__box',
              formContainer: 'formRecovery__container',
              formSubmit: 'formRecovery__submit',
              formCodeInput: 'formRecovery__code-input',
              formWarnInfo: 'formRecovery__warn-info',
              formSpaceCfmFm: 'formSpace__cfmFm',
              formSpaceChooseFm: 'formSpace__chooseFm',
              formRecoveryOptional: 'formRecovery__optional',
              formRecoveryVerifyDiv: 'formRecovery__verifyDiv',
              passScoreVProgress: '[data-js="passScore__vProgress"]',
            },
            mix: {
              blockquoteP: '#cfmFm blockquote p',
              blockquote: 'blockquote.blockquote-primary',
            },
          };

          if (hook) {
            const resend = hook.querySelector('#resend');
            if (resend) resend.classList.add('hide');

            const killFs14 = [...(hook.querySelectorAll('.fs14') || [])];
            if (Array.isArray(killFs14) && killFs14.some(Boolean)) {
              killFs14.map((f) => f.classList.remove('fs14'));
            }
          }

          // Recovery
          runner.formRecoveryBase({ hook, selector });
          runner.formRecoveryEmail({ hook, selector });
          runner.formRecoverySMS({ hook, selector });

          runner.formRecoveryAttachID({ hook, selector });
          runner.formRecoveryMethodTwo({ hook, selector });

          runner.formTryAgain({ hook, selector });

          // Other 
          runner.addSpaceToTitlte({ hook });
          runner.proofEmail({ hook, selector });
          runner.altProofEmailCode({ hook, selector });
          
          // SMS 
          runner.attachTimer({ targetID: '#sms-code', targetTimerBundleID: '#timeLeft' });
          runner.attachTimer({ targetID: '#cfmCode', targetTimerBundleID: '#timeLeft', elementLabel: false });

          // Email
          runner.attachTimer({ targetID: '#email-code', targetTimerBundleID: '#timeLeft' });
          runner.attachTimer({ targetID: '#code', targetTimerBundleID: '#timeLeft',  elementLabel: false });
          
          
          // #otp HACK
          const _otp = document.querySelector('#otp');
          if (_otp) tryBlockingInput({ selector: _otp });
          
          
          /**
          * see registration code in other place
          *  other.attachTimer({
              targetID: '#sms_code',
              targetTimerBundleID: '#timeLeft',
              elementLabel: false
            });
          * 
          * */
          
          
          const addFormRecoverySpace = () => {
            const selector = document.querySelector(".formRecovery__warn-info");
            if (selector) {
              const whiteList = [
                ".blockquote-warning",
                "[data-js='recoveryOptional-collections']",
              ];

              const _bool = whiteList.every(f => document.querySelector(f));
              if (_bool) return selector.classList.add("space");
            }
          };
          
          addFormRecoverySpace();
          
        };
        document.addEventListener('DOMContentLoaded', () => run());
      })();
    </script>

   
    
    <style>
      
      
      /* stylelint-disable property-no-vendor-prefix */
      /* stylelint-disable selector-id-pattern */
      /* stylelint-disable selector-class-pattern */

      .formStyle__loginFm .methods-other a {
        display: grid;
        border: 1px solid var(--color-gray-30, #c4c8d0);
        border-radius: 4px;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        line-height: normal;
        text-transform: none;
        user-select: none;
        text-decoration: none;
        color: var(--color-gray-90, initial);
        padding: 12px 32px;
        margin-top: unset;
        overflow: hidden;
        transition: padding 0.123s ease;
      }
      .formStyle__loginFm .methods-other a:hover {
        background-color: var(--color-cursor-hover, initial);
      }
      .formStyle__loginFm .methods-other a:active {
        background-color: var(--color-cursor-active, initial);
      }
      .formStyle__loginFm .methods-other a:focus {
        box-shadow: 0 0 0 3px var(--color-cursor-focus, initial);
      }
      .formStyle__loginFm .incognito-container {
        margin-top: 32px;
        color: var(--color-gray-60, initial);
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 12px;
        line-height: 20px;
        text-align: center;
      }
      .formStyle__loginFm .formLogin__submitBtn {
        margin-top: 48px;
        background-color: var(--color-blue-60, #04c);
        color: var(--color-white, #fff);
        display: grid;
        user-select: none;
        align-items: center;
        justify-content: center;
        border: 0 solid #0000;
        border-radius: 4px;
        padding: 12px 32px;
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        line-height: 24px;
        opacity: 1;
        text-decoration: none;
      }
      .formStyle__loginFm blockquote.blockquote-primary {
        font-family: var(--font-main, sans-serif);
        color: var(--color-gray-90, initial);
        font-weight: 400;
        font-size: 16px;
        border: 0;
        padding: unset;
        margin: unset;
      }
      .formStyle__loginFm .formRecovery__warn-info {
        margin-top: 24px;
      }
      .formStyle__loginFm .preloader {
        display: grid;
        font-family: var(--font-main, sans-serif);
        color: var(--color-blue-60, #04c);
        font-weight: 400;
        font-size: 16px;
        margin-top: 20px;
        margin-bottom: 20px;
        padding-bottom: 68px;
        background-image: unset;
        background-position-x: center;
        background-position-y: bottom;
        background-size: 48px 48px;
      }

      .formStyle__loginFm .list-group {
        display: grid;
        grid-gap: 8px;
        grid-auto-flow: row;
        grid-auto-rows: auto;
        max-height: 52vh;
        overflow: hidden;
        overflow-y: scroll;
        margin-top: 16px;
      }
      .formStyle__loginFm .list-group-item {
        display: grid;
        padding: 12px 16px;
        background-color: #0000;
        border: 1px solid var(--color-gray-20);
      }
      .formStyle__loginFm .list-group-item .text-danger {
        color: var(--color-error-60, crimson);
      }
      .formStyle__loginFm .list-group-item.list-group-item-success {
        border-color: #afe1a8;
        color: var(--color-gray-80, initial);
        font-family: var(--font-main, sans-serif);
        font-size: 14px;
        font-weight: 400;
        background-color: #afe1a81f;
      }
      .formStyle__loginFm .list-group-item.list-group-item-success:hover {
        border-color: #afe1a8;
        background-color: #d9f1d5;
      }
      .formStyle__loginFm .list-group-item.disabled {
        background-color: unset;
      }

      .formStyle__loginFm button[type='button'] {
        margin-top: 48px;
        background-color: var(--color-blue-60, #04c);
        color: var(--color-white, #fff);
        display: grid;
        user-select: none;
        align-items: center;
        justify-content: center;
        border: 0 solid #0000;
        border-radius: 4px;
        padding: 12px 32px;
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        line-height: 24px;
        opacity: 1;
      }
      .formStyle__loginFm button#refresh[type='button'] {
        display: grid;
        align-items: center;
        justify-content: center;
        border: 0;
        border-radius: 4px;
        line-height: normal;
        padding: 11px;
        user-select: none;
        font-size: 16px;
        text-transform: unset;
        overflow: hidden;
        transition: padding 0.123s;
        grid-auto-flow: column;
        grid-gap: 8px;
        width: 100%;
        text-decoration: none;
        margin: 0;
        background-color: unset;
        color: var(--color-blue-60, #04c);
      }
      .formStyle__loginFm button#refresh[type='button']:hover {
        background-color: var(--color-cursor-hover, initial);
      }
      .formStyle__loginFm button#refresh[type='button']:active {
        background-color: var(--color-cursor-active, initial);
      }

      .formStyle__loginFm #informer p {
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 14px;
        color: var(--color-gray-90, initial);
      }
      .formStyle__loginFm #informer p.mbn {
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 14px;
        color: var(--color-gray-90, initial);
      }
      .formStyle__loginFm #informer .informer__box {
        display: grid;
        align-items: center;
        justify-content: stretch;
        grid-gap: 8px;
        grid: auto / 1fr auto;
      }
      .formStyle__loginFm #informer .list-group-item p.text-danger span {
        display: none;
      }

      @media screen and (max-width: 499.99px) {
        .formStyle__loginFm #informer .informer__box {
          grid: auto / auto;
        }
      }

      
    </style>

    <script>
    (() => {
      class Helpers {
        deleteBlockquotePrimary({ hook, selector }) {
          const target = hook.querySelector(selector);
          if (target) {
            target.querySelector('blockquote.blockquote-primary').remove();
          }
        }
        deleteElement({ target }) {
          if (target) {
            if (Array.isArray(target) && target.every(Boolean)) {
              return [...target].map((f) => f.remove());
            }

            if (!Array.isArray(target)) return target.remove();
          }
          return false;
        }
        addClass({ hook, selector, className }) {
          const target = hook.querySelector(selector);
          if (target) target.classList.add(className);
        }
        clearClassList({ hook, selector }) {
          const target = hook.querySelector(selector);
          if (target) target.classList.remove(...target.classList);
        }

        moveTextTo({ hook, from, to, templateHtml }) {
          const _from = hook.querySelector(from);
          const _to = hook.querySelector(to);
          if (_from && _to) {
            const text = _from.textContent.trim();
            _from.textContent = '';
            _to.insertAdjacentHTML('afterbegin', templateHtml({ text }));
          }
        }
        
        createHtml({ target, template, property = 'afterbegin' }) {
          if (target && typeof template === 'string') {
            target.insertAdjacentHTML(property, template);
          }
        }
      }
      const Helper = new Helpers();

      const runner = {
        attachFormHook({ hook, selector }) {
          const reworkClass = selector.mix.formLoginFm.replace('form#', 'formStyle__');
          hook.classList.add(reworkClass);
          return { qs: `.${reworkClass}` };
        },
        formLoginFm({ hook, selector }) {
          Helper.clearClassList({ hook, selector: selector.ATTR.submit });
          Helper.addClass({ hook, selector: selector.ATTR.submit, className: 'formLogin__submitBtn' });
        },
        checkerObserver({ hook, selector }) {
          return !hook.querySelector(selector);
        },
        attachExtraClass({ hook, selector }) {
          const formHook = hook.querySelector(selector.CLASS.bemLoginFm);
          const form = hook.querySelector(selector.mix.formLoginFm);
          const method = hook.querySelector(selector.CLASS.methodsOther);
          const incognito = hook.querySelector(selector.CLASS.incognitoHide);

          if (!formHook && form && method && incognito) {
            hook.classList.add(selector.element.loginFm);
          }
        },

        replaceTitleRefreshButton({ hook, selector }) {
          const informer = hook.querySelector(selector.ID.informer);
          const staticCode = hook.querySelector(selector.CLASS.staticCode);
          if (informer && staticCode) {
            const target = informer.querySelector(selector.CLASS.staticCode);
            Helper.clearClassList({ hook, selector: selector.CLASS.staticCode });
            target.classList.add('informer__box');
          }
        },
        
        replaceButtonRefreshChildren({ hook, selector }) {
          if (hook && hook.querySelector(selector.ID.refresh)) {
            hook.querySelector(selector.ID.refresh).replaceChildren();

            Helper.createHtml({
              target: hook.querySelector(selector.ID.refresh),
              template: `<div class="formCaptcha__icon">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M13.9117 4.06536C14.285 3.84041 14.7709 3.98516 14.9602 4.37771C15.1261 4.72181 15.0028 5.13566 14.6756 5.33284L13.1648 6.24332C14.427 6.46769 15.6015 7.04969 16.5625 7.92742C17.9165 9.1642 18.7463 10.8964 18.8452 12.7846C19.0477 16.6476 16.1459 19.9398 12.364 20.138C8.582 20.3362 5.352 17.3653 5.14955 13.5024C5.12705 13.0731 5.44947 12.7073 5.86969 12.6853C6.28991 12.6633 6.6488 12.9934 6.67129 13.4226C6.82875 16.4272 9.34098 18.7379 12.2825 18.5837C15.224 18.4295 17.481 15.8689 17.3235 12.8643C17.2465 11.3945 16.6021 10.0493 15.548 9.08653C14.7025 8.31424 13.6468 7.83686 12.5188 7.72266L13.4593 9.5745C13.6323 9.91511 13.5176 10.3314 13.1945 10.5353C12.8259 10.7679 12.3372 10.6332 12.1399 10.2446L10.5076 7.03066C10.4084 6.83544 10.4038 6.61534 10.4787 6.42463C10.5162 6.22318 10.6368 6.03897 10.8243 5.92595L13.9117 4.06536Z" fill="currentColor"/>
    </svg>
  </div>`,
              property: 'beforeend',
            });
          }
        },
      };

      // ---------------- STATE ----------------
      const stateLoginFm = ({ hook, mutationElement, selector }) => {
        const state = mutationElement.childElementCount;

        if (state) {
          const target = hook.querySelector(selector.mix.formLoginFm);
          const button = hook.querySelector(selector.mix.formWrongBtn);

          if (target && !button) {
            const { qs } = runner.attachFormHook({ hook, selector });
            const hookLoginFm = document.querySelector(qs);

            runner.formLoginFm({ hook: hookLoginFm, selector });

            return runner.checkerObserver({
              hook: hookLoginFm,
              selector: selector.ATTR.submit,
            });
          }
        }
      };

      // ---------------- MUTATION_CB ----------------
      const mutationCallback = (mutationsList, _observer, { hook }) => {
        let controller = true;
        const selector = {
          ID: {
            searchDiv: '#searchDiv',
          },
          CLASS: {
            fs14: '.fs14',
            methodsOther: '.methods-other',
            incognitoHide: '.incognito-hide',
            bemLoginFm: '.formStyle__loginFm',
          },
          ATTR: {
            submit: 'a[role="button"]',
          },
          element: {
            formBox: 'formRecovery__box',
          },
          mix: {
            formLoginFm: 'form#loginFm',
            formWrongBtn: 'form #bind',
          },
        };

        const killFs14 = [...(hook.querySelectorAll('.fs14') || [])];
        if (Array.isArray(killFs14) && killFs14.some(Boolean)) {
          killFs14.map((f) => f.classList.remove('fs14'));
        }

        if (Array.isArray(mutationsList) && mutationsList.some(Boolean)) {
          const MutationRecord = mutationsList.find((f) => [...f.addedNodes].some(Boolean));

          if (MutationRecord && MutationRecord.addedNodes) {
            const mutationElement = [...MutationRecord.addedNodes].find((f) => f.tagName);

            const result = stateLoginFm({ hook, mutationElement, selector });

            runner.replaceTitleRefreshButton({
              hook,
              selector: {
                ID: { informer: '#informer' },
                CLASS: { staticCode: '.text-center.mb15' }
              },
            });
            runner.replaceButtonRefreshChildren({
              hook,
              selector: { ID: { refresh: '#refresh' }}
            });
            
            
            controller = Boolean(result);

            if (!controller) {
              // console.log('[SCALA #loginFm #informer]', 'OFF');
              return _observer.disconnect();
            }
          }
        }
      };
      // ---------------- MUTATION_CB__END ----------------

      const run = () => {
        const hook = document.querySelector('.formHook__style');

        // --------------- OBSERVER ---------------

        const config = { attributes: false, childList: true, subtree: false };
        const observer = new MutationObserver((mutationsList, _observer) =>
          mutationCallback(mutationsList, _observer, { hook })
        );

        try {
          observer.observe(hook.querySelector('#loginFm #informer'), config);
          runner.attachExtraClass({
            hook,
            selector: {
              CLASS: {
                methodsOther: '.methods-other',
                incognitoHide: '.incognito-hide',
              },
              element: {
                loginFm: 'formStyle__loginFm',
              },
              mix: {
                formLoginFm: 'form#loginFm',
              },
            },
          });

         
        } catch {
          // console.log(`[#loginFm #informer] observer.disconnected`);
          observer.disconnect();
        }
        // --------------- OBSERVER__END ---------------
      };
      document.addEventListener('DOMContentLoaded', () => run());
    })();
    </script>
  
    
    <style>
      
      /* stylelint-disable property-no-vendor-prefix */
      /* stylelint-disable selector-id-pattern */
      /* stylelint-disable selector-class-pattern */

      .formHook__style #altPswdFm .form-login__label .form-input.posr {
        display: grid;
        grid-gap: 8px;
      }
      .formHook__style .formAltPswd__warn {
        border: 0;
        padding: unset;
        margin: unset;
        margin-bottom: 32px;
        font-family: var(--font-main, sans-serif);
        color: var(--color-gray-90, initial);
        font-weight: 400;
        font-size: 16px;
      }
      .formAltPswd__label-space {
        margin-top: 24px;
      }
      .systemBanner__main--otherAlt {
        margin-top: 0;
        margin-bottom: 40px;
      }

    </style>
    <script>
      (() => {
        const designButton = ({ selector }) => {
         if (selector) {
          const button = selector.querySelector('#skip');
          if (button) button.classList.add('formFooter__button', 'formFooter__button--decoration');
         }
        };

        const removeLastFormElements = ({ selector, list }) => {
          for (const f of list) {
            const next = selector.parentElement.nextElementSibling;
            if (next.classList.contains(f)) next.remove();
          }
        };
        const replaceClassList = ({ selector }) => {
          const alert = selector.querySelector('.alert-warning');
          if (alert) alert.classList.replace('alert-warning', 'formAltPswd__warn');
        };
        const attachLabelParentClass = ({ selector }) => {
          const labelNewPass = selector.querySelector('[for="newPassword2"]');
          if (labelNewPass) labelNewPass.parentElement.classList.add('formAltPswd__label-space');
        };

        const removeElement = ({ targetElement }) => {
          const target = document.querySelector(targetElement);
          if (target) target.remove();
        };
        
        const attachText = ({selector, selectorText}) => {          
          if (selector && selectorText) {
            const cleanText = selectorText.innerHTML.trim(); 
            
             const template = `
               <div class="systemBanner__main systemBanner__main--otherAlt">
                 <img class="systemBanner__icon" src="/sps/public/assets/themes/default_1680512023/assets/img/svg/technical-break.svg" alt="Icon">  
                 <div class="systemBanner__text" data-js="paste-inner-text">${typeof cleanText !== "string" ? "Wrong response type" : cleanText}</div>
               </div>
             `.trim();
             
             if (selector) selector.insertAdjacentHTML('afterbegin', template);
          }
        };
        
        const runSkipPswdFm = ({ hook, selector, skipButton }) => {
          hook.classList.add('formHook__idLoginFm');

          designButton({ selector: skipButton });

          removeElement({ targetElement: 'span.append-icon' });
          removeLastFormElements({ selector, list: ['methods-wrapper-disable', 'incognito-hide'] });
          replaceClassList({ selector });
          attachLabelParentClass({ selector });
          removeElement({ targetElement: '#regEnter' });
        };
        
        const runOtherAltPswdFm = ({ hook, selector }) => {
           hook.classList.add('formHook__idLoginFm');
           
           removeElement({ targetElement: 'span.append-icon' });
           removeLastFormElements({ 
              selector, 
              list: ['methods-wrapper-disable', 'incognito-hide', 'incognitoModal'],
          });
          // replaceClassList({ selector });
          attachLabelParentClass({ selector });
          removeElement({ targetElement: '#regEnter' });
          
          
          attachText({
            selector: selector,
            selectorText: document.querySelector('.alert.alert-warning'),
          });
          
          
          removeElement({ targetElement: '#altPswdFm .alert.alert-warning'});
          
        };

        const run = () => {          
          const hook = document.querySelector('.formHook__style');
          // target 
          const altPswdFm = document.querySelector('#altPswdFm'); 
          const skipButton = document.querySelector('#skipPswdFm');

          if (hook && altPswdFm && skipButton) runSkipPswdFm({ hook, selector: altPswdFm, skipButton });
          if (hook && altPswdFm) runOtherAltPswdFm({ hook, selector: altPswdFm });
        };

        document.addEventListener('DOMContentLoaded', () => run());
      })();
    </script>
  
    
    <style>
      
      /* stylelint-disable property-no-vendor-prefix */
      /* stylelint-disable selector-id-pattern */
      /* stylelint-disable selector-class-pattern */

      .formHook__consent .btn-success {
        align-items: center;
        background-color: var(--color-blue-60, #04c);
        border-color: #0000;
        border-radius: 4px;
        border: 0;
        color: var(--color-white, #fff);
        display: grid;
        font-family: var(--font-main, sans-serif);
        font-size: 16px;
        font-weight: 400;
        justify-content: center;
        line-height: 24px;
        margin-top: 48px;
        opacity: 1;
        padding: 12px 32px;
        user-select: none;
        transition: background-color 0.123s;
        position: relative;
        overflow: hidden;
      }
      .formHook__consent .btn-success:hover {
        background-color: var(--color-blue-70, #04c);
        color: var(--color-white, #fff);
      }
      .formHook__consent .btn-success:focus {
        background-color: var(--color-blue-60, #04c);
        color: var(--color-white, #fff);
      }
      .formHook__consent .btn-success:active {
        background-color: var(--color-blue-80, initial);
        color: var(--color-white, #fff);
      }
      .formHook__consent .consentForm__footer {
        display: grid;
        grid-auto-flow: row;
        grid-gap: 12px;
        justify-content: stretch;
        align-items: center;
      }

      .formHook__consent .btn-danger {
        display: grid;
        border: 1px solid var(--color-gray-30, #c4c8d0);
        border-radius: 4px;
        align-items: center;
        justify-content: center;
        line-height: normal;
        padding: 11px;
        user-select: none;
        text-decoration: none;
        color: var(--color-gray-90, initial);
        background-color: var(--color-white, #fff);
        font-size: 16px;
        text-transform: unset;
        overflow: hidden;
        transition: padding 0.123s;
      }

      .formHook__consent .btn-danger:hover {
        background-color: var(--color-cursor-hover, initial);
      }
      .formHook__consent .btn-danger:active {
        background-color: var(--color-cursor-active, initial);
      }
      .formHook__consent .btn-danger:focus {
        box-shadow: 0 0 0 3px var(--color-cursor-focus, initial);
      }

      .formHook__consent .consent__description {
        font-family: var(--font-main, sans-serif);
        font-size: 16px;
        line-height: normal;
        font-weight: 400;
        color: var(--color-gray-90, initial);
        padding: unset;
        margin: unset;
        margin-top: 40px;
        margin-bottom: 32px;
      }
      .formHook__consent .consent__description .consent__description-accent {
        display: inline-block;
        margin-right: 4px;
        word-break: break-all;
      }

      .formHook__consent .checkbox-custom label {
        font-family: var(--font-main, sans-serif);
        font-size: 16px;
        line-height: normal;
        font-weight: 400;
        color: var(--color-gray-90, initial);
        position: relative;
        display: grid;
        align-items: center;
        cursor: pointer;
        grid: auto / auto 1fr;
        grid-gap: 12px;
        user-select: none;
        justify-content: start;
        padding: unset;
        margin: unset;
      }
      .formHook__consent .checkbox-custom label::before {
        content: '';
        top: 0;
        left: 0;
        display: grid;
        align-items: center;
        background-color: #fff;
        border-radius: 4px;
        border: 1px solid;
        border-color: #c4c8d0;
        grid-row: 1;
        height: 20px;
        justify-content: center;
        position: relative;
        -moz-user-select: none;
        -ms-user-select: none;
        -webkit-user-select: none;
        user-select: none;
        width: 20px;
        transition: border-color 0.123s;
      }
      .formHook__consent .checkbox-custom input[type='checkbox']:checked + label::after {
        content: '';
        position: absolute;
        left: 5.7px;
        top: 50%;
        width: 5px;
        height: 10px;
        border: solid #fff;
        border-width: 0 3px 3px 0;
        transform: rotate(45deg) translate(-50%, -50%);
      }
      .formHook__consent .checkbox-custom input[type='checkbox']:checked + label::before {
        background-color: #04c;
        border-color: #04c;
      }

      /* HACK */

      .formHook__consent .checkbox-custom.mb5.form-login__label {
        margin-bottom: 19px !important;
      }

      .formHook__style #codeFm button,
      .formHook__style #resendFm button {
        margin-top: 48px;
      }

      @media screen and (max-width: 870.99px) {
        .formHook__style #codeFm button,
        .formHook__style #resendFm button {
          margin-bottom: unset;
        }
      }

      @media screen and (max-width: 499.99px) {
        .formHook__style #codeFm button,
        .formHook__style #resendFm button {
          margin-top: 32px;
        }
      }

    </style>
    <script>
      (() => {
        const applyHook = (target) => {
          const selector = document.querySelector(target);
          if (selector) selector.classList.add('formHook__consent');
        };

        const attachStyleHook = () => {
          const hook = '[data-js="append-title-desc"]';
          const listSelectors = ['#fm', '.consentForm__footer', '#confirm', '#reject'];
          const result = listSelectors.every((f) => Boolean(document.querySelector(f)));

          result ? applyHook(hook) : false;
        };

        const run = () => {
          attachStyleHook();
        };

        document.addEventListener('DOMContentLoaded', () => run());
      })();
    </script>
  
    
    
    <style>
      .formHook__pipeWebAuthn {}
      .formHook__pipeWebAuthn .webAuthn__header {
        display: grid;
        grid-gap: 16px;
      }
      .formHook__pipeWebAuthn .webAuthn__header .webAuthn__title {
        font-weight: 700;
        font-size: 26px;
        color: var(--color-black, initial);
        margin: unset;
        width: auto;
        text-align: unset;
        font-family: var(--font-main);
      }
      .formHook__pipeWebAuthn .webAuthn__footer {
        display: grid;
        grid-gap: 16px;
        margin-top: 32px;
      }
      .formHook__pipeWebAuthn .webAuthn__button {
        background-color: var(--color-white, #fff);
        color: var(--color-gray-90, initial);
        display: grid;
        user-select: none;
        align-items: center;
        justify-content: center;
        border: 1px solid;
        border-color: var(--color-gray-30, #c4c8d0);
        border-radius: 4px;
        padding: 12px 32px;
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        line-height: 24px;
        opacity: 1;
        transition: background-color .123s;
      } 
      .formHook__pipeWebAuthn .webAuthn__button:active {
        background-color: var(--color-cursor-active, initial);
      }
      .formHook__pipeWebAuthn .webAuthn__button:hover {
        background-color: var(--color-cursor-hover, initial);
      }
      
      
      
      .formHook__pipeWebAuthn .webAuthn__button--primary {
        background-color: var(--color-blue-60, initial);
        color: var(--color-white, initial);
        border-color: #0000;
      }
      .formHook__pipeWebAuthn .webAuthn__button--primary:hover {
        background-color: var(--color-blue-70, initial);
        color: var(--color-white, initial);
      }
      .formHook__pipeWebAuthn .webAuthn__button--primary:active {
        background-color: var(--color-blue-80, initial);
        color: var(--color-white, initial);
      }
      
      
      .formHook__pipeWebAuthn .webAuthn__button--invisible {
        width: 100%;
        margin-top: 16px;
      }
      
       
       /*  HACK */
      .formHook__pipeWebAuthn #wait > img {
        max-width: 32px;
        margin: 3rem;
      }
      /*
      .formHook__pipeWebAuthn #error   {
        display: grid;
        grid-gap: 16px;
      }*/
      
      @media screen and  (max-width: 425.99px) {
        .formHook__pipeWebAuthn .webAuthn__header .webAuthn__title {
          font-size: 22px;
        }
      }
      
      
      .formHook__pipeWebAuthn .webAuthn-message__icon {
        margin-top: 5px;
      }
      .formHook__pipeWebAuthn .webAuthn-message__box {
        display: grid;
        grid: auto / minmax(auto, 48px) 1fr;
        align-items: start;
        justify-content: center;
        grid-gap: 2rem;
      }
      
      @media screen and (max-width: 425.99px) {
        .formHook__pipeWebAuthn .webAuthn-message__box {
          grid-gap: 1rem;
        }
      }
      
      
    </style>
    <script>
      (() => {
        class DomElement {
          // name?: string;
          constructor() {
            this.name = this.constructor.name;
          }

          clear({ target }) {
            if (target) {
              target.classList.remove(...target.classList);
              target.textContent = '';
            }
          }
          delete({ target }) {
            if (target) {
              if (Array.isArray(target) && target.every(Boolean)) {
                return [...target].map((f) => f.remove());
              }

              if (!Array.isArray(target)) return target.remove();
            }
            return false;
          }

          appendHtmlTemplate({ target, templateHtml, position = 'afterbegin' }) {
            if (target) target.insertAdjacentHTML(position, templateHtml);
          }
          appendElementTemplate({ target, templateElement, position = 'afterbegin' }) {
            if (target) target.insertAdjacentElement(position, templateElement);
          }
          
          appendClass({ selector, addClass }) {
            if (selector) {
              const bool = Boolean(addClass && Array.isArray(addClass));
              bool ? selector.classList.add(...addClass) : selector.classList.add(addClass);
            }
          }
          appendAttr({ hook, target, attrName }) {
            if (hook) {
              const item = hook.querySelector(target);
              if (item && attrName) item.dataset.js = attrName;
            }

          }
          replaceAllClass({ selector, addClass }) {
            if (selector) {
              selector.classList.remove(...selector.classList);
              const bool = Boolean(addClass && Array.isArray(addClass));
              bool ? selector.classList.add(...addClass) : selector.classList.add(addClass);
            }
          }
          renameClass({ target, oldClass, newClass }) {
            if (target) {
              target.classList.remove(oldClass);
              target.classList.add(newClass);
            }
          }
          appendToParent({ parent, moveMe }) {
            if (parent && moveMe) parent.append(moveMe);
          }

          removeAllChildrens({ parent }) {
            if (parent && parent.childElementCount) {
              parent.replaceChildren();
            }
          }
          triggerPage({ list }) {
            const _bool = list.every((f) => document.querySelector(f));
            return _bool;
          }
          
          selectorAllandRemoveClass({ hook, className }) {
            const _hook = document.querySelector(hook);
            if (_hook) {
              const list = _hook.querySelectorAll(`.${className}`);
              for (const f of list) f.classList.remove(className);
            }
          }
          
        }

        const HtmlElement = new DomElement();
        
        
        const attachPageHook = () => {
          HtmlElement.appendClass({
            selector: document.querySelector('.formHook__style'),
            addClass: 'formHook__pipeWebAuthn',
          });
        };
        
        const reRenderUi = (triggerID) => {
          if (!document.querySelector(triggerID)) return;
          
          const pref = 'webAuthn__button';
          const list = [
            { target: '#startPanel.panel', classList: ['webAuthn__box'] },
            { target: '.panel-body.pt25.pb50.br-t-n', classList: ['webAuthn__header'] },
            { target: '.panel-footer', classList: ['webAuthn__footer'] },
            { target: '#skip', classList: [pref, 'wa-steps', 'wa-init-step', 'skip'] },
            { target: '#add', classList: [pref, `${pref}--primary`, 'wa-steps', 'wa-init-step'] },
            { target: '#save', classList: [pref, `${pref}--primary`, 'wa-steps', 'wa-finish-step'] },
            { target: '#skipError', classList: [pref, `${pref}--invisible`, 'skip'] },
          ];

          return Array.from(list, ({target, classList}) => {
            return HtmlElement.replaceAllClass({ 
              selector: document.querySelector(target), 
              addClass: classList, 
            });
          });
        }
        
        
        const cleanLockStyles = () => {
          reRenderUi('#startPanel');
          
          // text 
          HtmlElement.appendClass({
            selector: document.querySelector('.webAuthn__header h4'),
            addClass: 'webAuthn__title',
          });
          
          
          HtmlElement.selectorAllandRemoveClass({
            hook: '.formHook__pipeWebAuthn',
            className: 'mb35',
          });
          HtmlElement.selectorAllandRemoveClass({
            hook: '.formHook__pipeWebAuthn',
            className: 'mt25',
          });
        };
        
        const replaceSvgIcon = () => {
          HtmlElement.removeAllChildrens({
            parent: document.querySelector('.icon-message--success')
          });
          HtmlElement.appendHtmlTemplate({
            target: document.querySelector('.icon-message--success'),
            templateHtml: `
    <svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M17 34C7.6262 34 -1.36139e-06 26.3738 -8.77525e-07 17C-3.93658e-07 7.6262 7.6262 0 17 0C26.3738 0 34 7.6262 34 17C34 26.3738 26.3738 34 17 34ZM25.8972 11.6923C25.3183 11.1206 24.3798 11.1207 23.801 11.6924L15.6956 19.6645L11.8814 15.9836C11.3026 15.4119 10.364 15.4118 9.78514 15.9835C9.20625 16.5551 9.2062 17.482 9.78504 18.0537L14.9941 23.1226C15.3839 23.502 16.0054 23.5002 16.3931 23.1186L25.8973 13.7625C26.4762 13.1908 26.4761 12.2639 25.8972 11.6923Z" fill="#008844"/>
    </svg>

  `.trim(),
          });
        };
        
        const appendSvgPasskey = () => {
          const selectorText = document.querySelector('.formRecovery__warn-info');
          const getText = selectorText ? selectorText.innerHTML : undefined;
          
          
          HtmlElement.appendHtmlTemplate({
            target: document.querySelector('#start'),
            templateHtml: `
              <div class="webAuthn-message__box">
                <div class="webAuthn-message__item"><div class="webAuthn-message__icon"><img src="/sps/public/assets/themes/default_1680512023/assets/img/svg/key.svg"></img></div></div>
                <div class="webAuthn-message__item"><div class="webAuthn-message__text formRecovery__warn-info">${getText}</div></div>
              </div>
            `.trim(),
          });
          
          const selectorCloneDiv = document.querySelector('.webAuthn-message__box');
          if (!selectorCloneDiv) return;
          
          const validateCloneDiv = selectorCloneDiv.nextElementSibling.className.includes('formRecovery__warn-info');
          if (validateCloneDiv) {
            return HtmlElement.delete({
              target: selectorCloneDiv.nextElementSibling,
            });
          }
        }
        
        
        const run = () => {
           const myPage =  HtmlElement.triggerPage({
            list: ['#startPanel', '#skipFm'],
          });
          
          if (myPage) {
            attachPageHook();
            cleanLockStyles();
            replaceSvgIcon();
            appendSvgPasskey();
          }
        };
      
        document.addEventListener('DOMContentLoaded', () => run());
      })();
    </script>
  
    
     <style>
     
        .pipeHook__social-style  .panel-body h4 {
          margin-bottom: 2.87rem;
          font-family: var(--font-main, sans-serif);
          font-weight: 700;
          font-size: 32px;
          line-height: normal;
          color: var(--color-black, initial);
        }
        .pipeHook__social-style  .panel-footer {
          padding: 10px 15px;
          background-color: unset;
          border: 0;
          border-bottom-right-radius: unset;
          border-bottom-left-radius: unset;
        }
        .pipeHook__social-style .panel-body {
          position: relative;
          padding: 15px;
          border: 0;
        } 
        .pipeHook__social-style .panel {
          background-color: unset;  
            border-radius: unset;  
        }
     
     </style>
     <script>
     
        (() => {
          
          const attachHook = () => {
            const selector = document.querySelector('#page-pipe-check-social-account');
            const hook = document.querySelector('[data-js="append-title-desc"]');
            if (selector && hook) {
              hook.classList.add('pipeHook__social-style');
            }
            
          }
          
          const removeImportant = () => {
            const target = 'pb50';
            const selector = document.querySelector(`.${target}`);
            if (selector) return selector.classList.remove(target);
          }
          
          const run = () => {
              attachHook();
              removeImportant();
          };
        
          document.addEventListener('DOMContentLoaded', () => run());
        })();
     </script>
  
    
    
    <style>
      
      /* stylelint-disable property-no-vendor-prefix */
      /* stylelint-disable selector-id-pattern */
      /* stylelint-disable selector-class-pattern */

      .formHook__style .formQrCode__input {
        display: grid;
      }
      .formHook__style .formQrCode__text-danger {
        font-family: var(--font-main, sans-serif);
        font-size: 14px;
        font-weight: 400;
        margin: 24px 0;
        background-color: var(--color-error-20, initial);
        border-radius: 2px;
        border-left: 4px solid var(--color-error-60, crimson);
        padding: 16px 20px;
        color: #0e0e0f;
      }

      .formHook__style .formQrCode__button {
        display: grid;
        border: 1px solid var(--color-gray-30, #c4c8d0);
        border-radius: 4px;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        line-height: normal;
        padding: 12px;
        text-transform: capitalize;
        user-select: none;
        overflow: hidden;
        transition: padding 0.123s ease;
      }
      .formHook__style .formQrCode__button--primal {
        margin-top: 48px;
        background-color: var(--color-blue-60, #04c);
        color: var(--color-white, #fff);
        border: 0 solid #0000;
        padding: 12px 32px;
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        line-height: 24px;
      }

      .formHook__style .blockquote-danger {
        background-color: var(--color-error-20, initial);
        border-left: 4px solid var(--color-error-60, crimson);
        border-radius: 2px;
        color: #0e0e0f;
        font-family: var(--font-main, sans-serif);
        font-size: 14px;
        font-weight: 400;
        line-height: 20px;
        margin: 24px 0;
        padding: 16px 20px;
        word-break: break-word;
      }

      .formHook__style .qrcode-section {
        margin: unset;
        width: unset;
      }

      .formQrCode__qrc-code-active .text-danger {
        display: grid;
        color: var(--color-error-60, crimson);
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        align-items: center;
        justify-content: start;
        grid-auto-flow: column;
        grid-gap: 8px;
      }

      
      .formHook__style .qrcode-timer + .text-danger {
        display: none;
      }
      .formHook__style .qrcode-timer.hide + .text-danger {
        display: grid;
      }
      
      
      .formHook__style .qrcode-timer + .fluidTimer__init + .text-danger {
        display: none;
      }
      .formHook__style .qrcode-timer.hide + .fluidTimer__init + .text-danger {
        display: grid;
      }

      .formQrCode__qrc-code-active .top {
        display: grid;
        grid: auto / 1fr auto;
        align-items: center;
        justify-content: stretch;
      }
      .formQrCode__qrc-code-active .page-title {
        margin-bottom: 0;
      }
      .formQrCode__qrc-code-active .mForm {
        margin-top: 40px;
      }
      .formQrCode__qrc-code-active .bc-reg-url {
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        color: var(--color-blue-60, #04c);
      }
      .formQrCode__qrc-code-active .qrcode-section {
        margin-top: 24px;
        display: grid;
        grid-gap: 8px;
      }
      .formQrCode__qrc-code-active .qrcode-block {
        display: grid;
        width: max-content;
        position: relative;
      }
      .formQrCode__qrc-code-active canvas {
        display: grid;
        width: 160px;
        height: auto;
      }

      .formQrCode__qrc-code-active .qrcode-expired {
        opacity: unset;
      }
      .formQrCode__qrc-code-active .qrcode-expired canvas {
        opacity: 0.2;
      }

      .formQrCode__qrc-code-active .formQrCode__submit {
        display: none;
        width: auto;
        height: auto;
        background-color: var(--color-blue-60, #04c);
        color: var(--color-white, #fff);
        user-select: none;
        align-items: center;
        justify-content: center;
        border: 0 solid #0000;
        border-radius: 4px;
        padding: 6px 16px;
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 14px;
        line-height: 24px;
        opacity: 1;
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        text-decoration: none;
        z-index: 123;
      }
      .formQrCode__qrc-code-active .qrcode-expired .formQrCode__submit {
        display: grid;
      }

      .formQrCode__qrc-code-active .methods-other.space {
        margin-top: 40px;
      }

      .formQrCode__qrc-code-active .methods-other a {
        display: grid;
        border: 1px solid var(--color-gray-30, #c4c8d0);
        border-radius: 4px;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        line-height: normal;
        text-transform: none;
        user-select: none;
        text-decoration: none;
        color: var(--color-gray-90, initial);
        padding: 12px 32px;
        margin-top: unset;
        overflow: hidden;
        transition: padding 0.123s ease;
      }
      .formQrCode__qrc-code-active .methods-other a:hover {
        background-color: var(--color-cursor-hover, initial);
      }
      .formQrCode__qrc-code-active .methods-other a:active {
        background-color: var(--color-cursor-active, initial);
      }
      .formQrCode__qrc-code-active .methods-other a:focus {
        box-shadow: 0 0 0 3px var(--color-cursor-focus, initial);
      }

      .formQrCode__qrc-code-active .text-danger::before {
        content: '';
        display: inline-grid;
        width: 17px;
        height: 16px;
        background-image: url('/sps/public/assets/themes/default_1680512023/assets/img/svg/errorMsg.svg');
        background-position: center;
        background-size: contain;
      }

      .formQrCode__qrc-code-active .incognito-container {
        margin-top: 32px;
        color: var(--color-gray-60, initial);
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 12px;
        line-height: 20px;
        text-align: center;
      }

      .formQrCode__box {
        display: grid;
        grid-gap: 24px;
        margin-top: 64px;
      }
      .formQrCode__square {
        width: 200px;
        height: 200px;
        border: 1px solid;
      }

      .formQrCode__title {
        display: grid;
        font-weight: 600;
        font-size: 18px;
        color: var(--color-gray-90, initial);
      }
      .formQrCode__description {
        font-weight: 400;
        font-size: 16px;
      }
      .formQrCode__header {
        display: grid;
        grid-gap: 10px;
      }
      .formQrCode__label {
        display: grid;
        grid: auto / 1fr auto;
        grid-gap: 10px;
        align-items: center;
        justify-content: stretch;
        border: 1px solid var(--color-gray-20, initial);
        border-radius: 8px;
        padding: 16px;
        border-bottom-left-radius: 8px;
        border-bottom-right-radius: 8px;
        overflow: hidden;
        background-color: #0000;
        transition: border-radius 0.334s, background-color 0.123s;
        cursor: pointer;
      }
      .formQrCode__label:hover {
        background-color: #f2f2f2;
      }
      .formQrCode__text-hidden {
        border: 1px solid var(--color-gray-20, initial);
        border-radius: 8px;
        border-top: unset;
        border-top-left-radius: 0;
        border-top-right-radius: 0;
        padding: 16px;
        transition: transform 0.222s cubic-bezier(0.68, 0, 0.49, 1.03);
        transform: translateY(-100%);
      }
      .formQrCode__collapse {
        display: grid;
        overflow: hidden;
        height: auto;
        will-change: height;
      }
      .formQrCode__protect {
        overflow: hidden;
        transition: max-height 0.222s cubic-bezier(0.68, 0, 0.49, 1.03);
        max-height: 0;
      }
      .formQrCode__protect.showme {
        max-height: 100%;
      }
      .formQrCode__protect.showme .formQrCode__text-hidden {
        transform: translateY(-0.1%);
      }
      .formQrCode__label.fix {
        border-bottom-left-radius: 0;
        border-bottom-right-radius: 0;
      }
      .formQrCode__collapsed-box {
        display: grid;
        grid-gap: 16px;
        height: auto;
        will-change: height;
      }
      .formQrCode__label-text {
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        color: var(--color-gray-90, initial);
        pointer-events: none;
      }

      .formQrCode__icon-item {
        display: grid;
        padding: 1rem;
        transform: rotate(0deg);
        transition: transform 0.222s;
        pointer-events: none;
      }
      .formQrCode__icon-item.rotate {
        transform: rotate(-180deg);
      }
      .formQrCode__icon {
        width: 10px;
        height: auto;
      }
      .formQrCode__list {
        list-style: number;
        display: grid;
        grid-gap: 8px;
        padding-left: 16px;
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 14px;
        color: var(--color-gray-90, initial);
      }

    </style>
    <script>
      (() => {
        // type baseType = (string | undefined)[] | (string | undefined);
        // type appendClass = { target?: Element; addClass: baseType; prefix?: string };
        // type groupClass = {list: baseType;prefix?: string;sep?: boolean;};
        const appendClass = ({ target, addClass, prefix }) => {
          if (target) {
            const singleClass = (list = '') => target.classList.add(list);
            
            const groupClass = ({list = [undefined], prefix = 'unknown', sep = true,}) => {
              if (list.length > 0 && [...list].every(Boolean)) {
                const separator = sep ? '__' : '';
                const result = Array.from(list, (f) => `${prefix}${separator}${f}`);
                return target.classList.add(...result);
              }
            };

            
            if (Array.isArray(addClass)) {
              return groupClass({ list: addClass, prefix });
            }
            return singleClass(addClass);
          }
        };
        
        const childrenParserText = (text) => String(text).split('|');
        
        const childrenTemplate = ({ name, textList }) => {
          return `
              <div class="formQrCode__collapse">
                <div class="formQrCode__label">
                  <p class="formQrCode__label-text">${name}</p>
                  <div class="formQrCode__icon-item"><img class="formQrCode__icon" src="/sps/public/assets/themes/default_1680512023/assets/img/svg/arrow-collapse.svg"></div>
                </div>
                <div class="formQrCode__protect">
                  <div class="formQrCode__text-hidden">
                    <ul class="formQrCode__list">${textList}</ul>
                  </div>
                </div>
              </div>`.trim();
        };

        const childrenCreateList = (list) => {
          return list.reduce((accumulator, f) => {
            accumulator += `<li class="formQrCode__li">${f}</li>`;
            return accumulator;
          }, '');
        };

        const runner = {
          conflictTextDanger({ hook, selector }) {
            if (hook) {
              const logic = Boolean(hook.querySelector(selector.mix.blockquoteTextDanger));
              if (logic) {
                const target = hook.querySelector(selector.mix.blockquoteTextDanger);
                if (target) target.classList.remove(...target.classList);
              }
            }
          },

          builder({ text, href, className }, quotes = true) {
            return quotes
              ? `<a class="formSpeacial__${className}" href="${href}">«${text}»</a>`
              : `<a class="formSpeacial__${className}" href="${href}">${text}</a>`;
          },

          convertor(f, index) {
            if (f) {
              const [text = '', href = '#', className = `invalid-class-name-${index}`] = f.split('|').filter(Boolean);
              return runner.builder({ text, href, className });
            }
          },

          convertorStringToHref({ hook, selector }) {
            const target = hook.querySelector(selector.ID.qrCodeText);
            if (target) {
              const enterString = target.innerHTML;
              const string_ = enterString ? enterString.trim() : undefined;
              if (!string_) return;
              
              /**
              * Don't forget global "/[example]/g" flag in regexp!
              */
              const beforeRe = /\[\[/g;
              const afterRe = /\]\]/g;
              
              const listArray = String(string_).trim()
                  .replaceAll(beforeRe, "•|")
                  .replaceAll(afterRe, "|•")
                  .split("•");
                  
              const result = [...listArray]
                .map((f, index) => (f.startsWith('|') ? runner.convertor(f, index) : f))
                .join('');

              target.textContent = '';
              return target.insertAdjacentHTML('afterbegin', result);
            }
          },

          attachRootID({ hook, selector }) {
            const target = hook.querySelector(selector.ID.qrCodeActive);
            if (target) {
              const newClassName = String(selector.ID.qrCodeActive).replace('#', 'formQrCode__');
              return hook.classList.add(newClassName);
            }
          },
          reRenderRefreshButton({ hook, selector }) {
            const target = hook.querySelector(selector.ID.qrCodeRefresh);
            if (target) {
              target.firstElementChild.remove();
              target.classList.add(selector.element.bemSubmit);
            }
          },
          hideAnomalousCode({ hook, selector }) {
            const target = hook.querySelector(selector.ID.anomalousCode);
            if (target) target.parentElement.classList.add('hide');
          },
          moveElementTo({ hook, parentSelector, childSelector }) {
            const parent = hook.querySelector(parentSelector);
            const child = hook.querySelector(childSelector);

            if (parent && child) parent.prepend(child);
          },
          addClassToQrCode({ hook, selector }) {
            const targetQrCode = hook.querySelector(selector.ID.qrCodeCanvas);
            if (targetQrCode) {
              appendClass({
                target: hook.querySelector('.methods-switcher'),
                addClass: 'space',
              });
            }
          },
          attachInformBlock({ hook, selector }) {
            const listBundle = [
              {
                name: '«Моя Москва»',
                text: 'Откройте приложение и убедитесь, что вы авторизованы.|Перейдите в Настройки → Безопасность → Вход на сайт по QR-коду.|Отсканируйте QR-код.',
              },
              {
                name: '«МЭШ»',
                text: 'Откройте приложение и убедитесь, что вы авторизованы.|Перейдите в Настройки → Вход в Веб по QR.|Отсканируйте QR-код.',
              },
            ];
          

            const childrenCollapseList = () => {
              return listBundle
                .map((f) => {
                  const list = childrenParserText(f.text);
                  const textList = childrenCreateList(list);

                  return childrenTemplate({ name: f.name, textList });
                })
                .join('');
            };

            const parent = hook.querySelector(selector.ID.qrCodeBody) ? hook.querySelector(selector.ID.qrCodeBody).parentElement : undefined;
            if (parent) {
              const template = `
                <div class="formQrCode__box">
                  <div class="formQrCode__header">
                    <h4 class="formQrCode__title">Если QR-код не считывается</h4>
                    <p class="formQrCode__description">Инструкция по входу через мобильные приложения</p>
                  </div>
                  <div class="formQrCode__collapsed-box" data-js="handler-qrcode-collapse">${childrenCollapseList()}</div>
                </div>`.trim();

              parent.insertAdjacentHTML('afterend', template);
            }
          },
        };

        const run = () => {
          const hook = document.querySelector('.formHook__style');
          if (!hook) return;
          
          const selector = {
            ID: {
              qrCodeBody: '#qrc-c',
              qrCodeText: '#qrc-info',
              qrCodeActive: '#qrc-code-active',
              qrCodeRefresh: '#qrc-refresh',
              anomalousCode: '#completeFm',
              qrCodeCanvas: '#qrcode',
            },
            CLASS: {
              textDanger: '.text-danger',
            },
            element: {
              bemSubmit: 'formQrCode__submit',
            },
            mix: {
              formEmailCode: 'form #email-code',
              formBtnResend: 'form .btn-resend',
              blockquoteTextDanger: '.blockquote-danger .text-danger',
            },
          };

          const listClass = [
            { 
             target: hook.querySelector(selector.mix.formEmailCode) ? hook.querySelector(selector.mix.formEmailCode).parentElement : undefined, 
             addClass: "formQrCode__input" 
            },

            { 
              target: hook.querySelector(selector.mix.formBtnResend),
              addClass: ['button', 'button--primal'], 
              prefix: 'formQrCode',
             },
          ];
          for (const f of listClass) {
            appendClass({ target: f.target, addClass: f.addClass });
          }

          runner.attachRootID({ hook, selector });
          runner.conflictTextDanger({ hook, selector });
          runner.convertorStringToHref({ hook, selector });
          runner.reRenderRefreshButton({ hook, selector });
          runner.hideAnomalousCode({ hook, selector });

          runner.moveElementTo({
            hook,
            parentSelector: selector.ID.qrCodeCanvas,
            childSelector: selector.ID.qrCodeRefresh,
          });

          runner.addClassToQrCode({ hook, selector });
          runner.attachInformBlock({ hook, selector });
          
          
          // handlerClickMe
          const handlerClickMe = (event) => {
            const target = event.target;

            if (target && target.classList.contains('formQrCode__label')) {
              target.classList.toggle('fix');
              target.nextElementSibling.classList.toggle('showme');
              const icon = target.querySelector('.formQrCode__icon-item');
              if (icon) icon.classList.toggle('rotate');
            }
          };

          const target = document.querySelector('[data-js="handler-qrcode-collapse"]');
          if (target) target.addEventListener('click', (event) => handlerClickMe(event));
          
        };

        document.addEventListener('DOMContentLoaded', () => run());
      })();
    </script>
  
  
    
    <style>
    
      .fluidTimer__mutate-counter-style {
        font-size: 0 !important;
        visibility: hidden !important;
        padding: 0;
        margin: 0;
        height: 0;
        width: 0;
      }
      .fluidTimer__timer-color-text { 
        font-size: 14px;
        font-weight: 400;
        line-height: 1.49;
        color: #666; 
      }
    
    </style>
    <script>

      (() => {
        class CountdownTimer {
          // root: string;
          // targetDate: string;
          // timerScope: Record<string, unknown>;
          // timeCacheTrigger: number;
          // timeCache: Record<string, unknown>;
          // dataJs: string;
          constructor({ root, targetDate }) {
            this.root = root;
            this.targetDate = targetDate;
            this.timerScope = {};

            this.timeCacheTrigger = 0;
            this.timeCache = {};

            this.dataJs = 'trigger-clock-timer';
          }

          fillTimerChache() {
            const t = Date.parse(this.targetDate) - Date.parse(new Date());

            this.timeCacheTrigger = t / 1000;
            this.timeCache = {
              days: Math.floor(t / (1000 * 60 * 60 * 24)),
              hours: Math.floor((t / (1000 * 60 * 60)) % 24),
              mins: Math.floor((t / 1000 / 60) % 60),
              secs: Math.floor((t / 1000) % 60),
            };
          }

          updateTimer() {
            return this.fillTimerChache();
          }
          firstRenderHtml() { 
            const selector = document.querySelector(this.root);
            const pref = 'Обновить код через';

            const builder = ({ name, end }) => {
              const A = () => `<span data-js="${this.dataJs}-${name}">${this.timeCache[name]}</span> ${end}`;
              const B = () => '';
              return this.timeCache[name] > 0 ? A() : B();
            };

            const textHour = builder({ name: 'hours', end: 'ч.' });
            const textMin = builder({ name: 'mins', end: 'мин.' });
            const textSec = builder({ name: 'secs', end: 'сек.' });

            const template = `<p class="fluidTimer__timer-color-text">${pref} ${textHour} ${textMin} ${textSec}</p>`;

            return selector ? selector.insertAdjacentHTML('afterbegin', template.trim()) : '';
          }

          firstTimer() {
            return this.fillTimerChache();
          }

          renderHtml() {
            const list = Object.keys(this.timeCache);
            if (list) {
              for (const f of list) {
                const selector = document.querySelector(`[data-js="${this.dataJs}-${f}"]`);
                if (selector) selector.textContent = this.timeCache[f];
              }
            }
          }
          
          
          selfDestroy() {
            const target = '.fluidTimer__init';
            const selector = document.querySelector(target);
            if (selector) selector.remove();
          }
          
          repeatTimer() {
            /**
             * !!! intervalForwardTimer
             */
            const intervalForwardTimer = setInterval(() => {             
              if (!this.timeCacheTrigger || this.timeCacheTrigger <= 1) {
                  clearInterval(intervalForwardTimer);
                  return this.selfDestroy();
              }
              
              this.updateTimer();
              this.renderHtml();
            }, 1000);
            
          }

          go() {
            this.firstTimer();
            this.firstRenderHtml();

            this.repeatTimer();
          }
        }

        const run = () => {
          const hook = '.formQrCode__qrc-code-active';
          const app = '#qrc-timer';
          const timerDataAttribute = '#ttl-timer';
          
          const rootClockName = 'fluidTimer__init';
          
          const _bool = [hook, app, timerDataAttribute].every(f => document.querySelector(f));
          
          if (_bool) {
            const selectorApp = document.querySelector(app);
            
            // mutate app
            selectorApp.classList.add('fluidTimer__mutate-counter-style');

            // createDIV
            selectorApp.insertAdjacentHTML('afterend', `<div class="${rootClockName}"></div>`);

            // execute expire time 
            const expire = document.querySelector(timerDataAttribute).dataset.expires;
            const enterExpireNumber = Number(expire);

            // setting CountdownTimer 
            const timer = new CountdownTimer({
              root: `.${rootClockName}`,
              targetDate: new Date(enterExpireNumber * 1000),
            });
            
            // run timer
            timer.go();
          }
        };

        document.addEventListener('DOMContentLoaded', () => run());
      })();
    </script>
  
    
    <style>
      
      /* stylelint-disable property-no-vendor-prefix */
      /* stylelint-disable selector-id-pattern */
      /* stylelint-disable selector-class-pattern */

      .externalSocial .mForm {
        margin-top: 40px;
      }

      .externalSocial .top {
        display: grid;
        grid-auto-flow: column;
        align-items: center;
        justify-content: space-between;
      }
      .externalSocial .sub-title {
        font-weight: 600;
        font-size: 16px;
        line-height: 24px;
        color: var(--color-gray-90);
        text-align: unset;
        padding: unset;
        margin: unset;
      }
      .externalSocial .incognito-container {
        margin-top: 32px;
        color: var(--color-gray-60, initial);
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 12px;
        line-height: 20px;
        text-align: center;
      }
      .externalSocial .incognito-btn {
        text-decoration: none;
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        line-height: normal;
        color: var(--color-blue-60, #04c);
      }
      .externalSocial .incognito-btn:hover {
        color: var(--color-blue-60, #04c);
      }

    </style>
    <script>
      (() => {
        const run = () => {
          const hook = document.querySelector('.formHook__style');
          if (hook) {
            const listQuery = ['.incognito-container', '#regEnter', '#m-content', '#result'];
            const resultListQuery = listQuery.every((f) => hook.querySelector(f));

            if (resultListQuery) hook.classList.add('externalSocial');
          }
        };

        document.addEventListener('DOMContentLoaded', () => run());
      })();
    </script>
  
    
    
    <style>
      
      /* stylelint-disable property-no-vendor-prefix */
      /* stylelint-disable selector-id-pattern */
      /* stylelint-disable selector-class-pattern */

      .formHook__twoFa .twoFa__hr {
        display: grid;
        align-items: center;
        justify-content: center;
        margin: 32px 0 0;
        position: relative;
      }
      .formHook__twoFa .twoFa__hr::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        display: inline-grid;
        width: 100%;
        height: 1px;
        background-color: var(--color-gray-20, initial);
        transform: translate(-50%, -50%);
        border: 0;
      }
      .formHook__twoFa .twoFa__hr-text {
        background-color: var(--color-white, #fff);
        color: var(--color-gray-60, initial);
        display: grid;
        font-family: var(--font-main, sans-serif);
        font-size: 14px;
        font-weight: 400;
        padding: 0 8px;
        position: relative;
        align-items: center;
        justify-content: center;
        line-height: normal;
        height: auto;
      }
      .formHook__twoFa .twoFa__label {
      }
      .formHook__twoFa .twoFa__buttons {
        display: grid;
        grid-gap: 16px;
        margin-top: 16px;
        grid: minmax(auto, 48px) / 1fr minmax(auto, 48px);
      }
      .formHook__twoFa .twoFa__buttons a {
        text-transform: lowercase;
      }
      .formHook__twoFa .twoFa__footer {
        margin-top: 24px;
        font-family: var(--font-main, sans-serif);
        font-weight: 600;
        font-size: 16px;
        line-height: 20px;
        color: var(--color-gray-90, initial);
        display: grid;
        grid-gap: 16px;
      }

      .formHook__twoFa .twoFa__icon {
        display: inline-grid;
        width: 24px;
        height: 24px;
      }
      .formHook__twoFa .twoFa__social--main {
        display: grid;
      }
      .formHook__twoFa .twoFa__button {
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        flex: 1;
        border: 1px solid var(--color-gray-30, #c4c8d0);
        border-radius: 4px;
        align-items: center;
        justify-content: stretch;
        font-size: 16px;
        line-height: normal;
        padding: 11px;
        text-transform: none;
        user-select: none;
        overflow: hidden;
        text-decoration: none;
        transition: background-color 0.123s;
        cursor: pointer;
      }
      .formHook__twoFa .twoFa__button:hover {
        background-color: var(--color-cursor-hover, initial);
      }

      .formHook__twoFa .twoFa__item {
        display: grid;
        grid-auto-flow: column;
        align-items: center;
        justify-content: stretch;
        grid-gap: 1rem;
      }

      .formHook__twoFa .twoFa__notfound {
        font-size: 14;
        font-weight: 600;
        color: rgb(104 104 104);
      }
      .formHook__twoFa .twoFa__text {
        text-decoration: none;
        color: var(--color-gray-90, initial);
        font-size: 14px;
        text-transform: unset;
      }
      .formHook__twoFa .twoFa__item .button__text {
        display: grid;
        font-size: 16px;
        line-height: normal;
        text-transform: none;
        user-select: none;
        text-decoration: none;
        color: var(--color-gray-90, initial);
        margin-top: unset;
        overflow: hidden;
      }

      .formHook__twoFa .twoFa__content {
        display: grid;
        grid: minmax(auto, 48px) / 1fr minmax(auto, 48px);
        align-items: center;
        justify-content: stretch;
        grid-gap: 1rem;
      }

      .formHook__twoFa .twoFa__social {
        position: relative;
      }
      .formHook__twoFa .twoFa__teleport {
        display: none;
        position: absolute;
        top: auto;
        right: -8px;
        bottom: 120%;
        justify-content: end;
        width: auto;
        max-width: 354px;
        transition: max-width 0.123s;
      }
      .formHook__twoFa .twoFa__teleport--active {
        display: grid;
      }
      .formHook__twoFa .twoFa__teleport-box {
        display: flex;
        flex-wrap: wrap;
        grid-gap: 8px;
        border: 1px solid var(--color-gray-20);
        background-color: #fff;
        box-shadow: 0 4px 12px rgb(0 20 67 / 12%);
        border-radius: 4px;
        padding: 12px;
      }

      .formHook__twoFa .twoFa__button.twoFa__button-dots--active {
        box-shadow: 0 0 0 3px var(--color-cursor-focus, initial);
        border-color: var(--color-cursor-focus, initial);
      }
      .formHook__twoFa .text-danger {
        display: inline-grid !important;
        color: var(--color-error-60, crimson);
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        align-items: center;
        justify-content: start;
        grid-auto-flow: column;
        grid-gap: 8px;
      }
      .formHook__twoFa .text-danger::before {
        content: '';
        display: inline-grid;
        width: 17px;
        height: 16px;
        background-image: url('/sps/public/assets/themes/default_1680512023/assets/img/svg/errorMsg.svg');
        background-position: center;
        background-size: contain;
      }
      .formHook__twoFa .formRecovery__warn-info {
        margin-top: unset;
      }
      .formHook__twoFa #other-user + #verifyDiv {
        margin-top: 24px;
      }
      .formHook__twoFa #other-user + #verifyDiv + #resendDiv {
        margin-top: 24px;
      }
      .formHook__twoFa #other-user + .formRecovery__warn-info {
        margin-top: 24px;
      }

      .formHook__twoFa .mForm.space {
        display: grid;
        grid-gap: 16px;
      }

      .formHook__twoFa .quote__error {
        display: grid;
        color: var(--color-gray-90, initial);
        border-left: 4px solid var(--color-error-60, crimson);
        border-radius: 2px;
        background-color: var(--color-error-20, initial);
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        padding: 20px 16px;
        margin: 16px 0;
      }
      
      .formHook__twoFa .htotp__label {
        margin-top: 24px;
        display: grid;
        color: var(--color-gray-90, initial);
        font-family: var(--font-main, sans-serif);
        font-weight: 600;
        font-size: 16px;
      }

      .formHook__twoFa #resendDiv .formRecovery__warn-info + [role='form'] > [name='sms-send'] + .text-danger {
        visibility: hidden;
      }
      
      .formHook__twoFa [action*="methods/sms/resend"] > [value="sms"] + .formRecovery__submit {
        background-color: var(--color-gray-10, #eeeff2);
        color: var(--color-gray-90, initial);
      }
      .formHook__twoFa [action*="methods/sms/resend"] > [value="sms"] + .formRecovery__submit:hover {
        background-color: var(--color-gray-20, #dfe1e6);
      }
      .formHook__twoFa [action*="methods/sms/resend"] > [value="sms"] + .formRecovery__submit:active {
        background-color: var(--color-gray-30, #c4c8d0);
      }
      .formHook__twoFa .mForm > #other-user + #gErrs + blockquote > p {
        margin-top: 32px;
      }
      
      
      .formHook__twoFa .mForm > #other-user + #gErrs > blockquote {
        margin-top: 32px;
      }
      
      @media screen and (max-width: 599.99px) {
        .formHook__twoFa .twoFa__text {
        }
      }

      @media screen and (max-width: 499.99px) {
        .formHook__twoFa .twoFa__social--main {
         /* display: flex; */
        }
        
      }

      
      @media screen and (max-width: 445.99px) {
        .formHook__twoFa .twoFa__item .button__text {
          font-size: 14px;
        }
      }
      
      
      @media screen and (max-width: 430.99px) {
        .formHook__twoFa .twoFa__teleport {
          max-width: 242px;
        }
      }
      
      @media screen and (max-device-width: 393.99px) {
        .formHook__twoFa .twoFa__item {
          justify-content: center;
        }
        .formHook__twoFa .twoFa__text {
          display: none;
        }
        .formHook__twoFa .twoFa__item .button__text {
          display: none;
        }
      }
      
      @media screen and (max-width: 390.99px) {
        .twoFa__content a.twoFa__button {
          min-height: 48px;
          display: grid;
          align-items: center;
          justify-content: center;
        }
        .formHook__twoFa .twoFa__content {
          display: grid;
          grid: minmax(auto, 1fr) / 1fr minmax(auto, 48px);
          align-items: center;
          justify-content: stretch;
          grid-gap: 1rem;
        }
        .formHook__twoFa .twoFa__social--main {
          display: grid;
        }
        .formRecovery__submit {
          padding: 12px 24px;
        }
      }

    </style>
    
    
    
    <script>
    (() => {
      const urlSvg = "/sps/public/assets/themes/default_1680512023/assets/img/svg";

      const tableIcons = {
        outside_mbs: 'biometrics.svg',
        webAuthn: 'key.svg',
        totp: 'generator.svg',
        email: 'e-mail.svg',
        sms: 'sms.svg',
        qr: 'qr.svg',
      };
      const svg = {
        dots: `${urlSvg}/dots.svg`,
      };

      class TemplateLogic {
        notFound() {
          return `<p class="twoFa__notfound">Сервис отключен</p>`;
        }

        single(list) {
          const [first] = list;

          return `<a class="twoFa__button" href="${first.href}">
              <div class="twoFa__item"><img class="twoFa__icon" src="${first.svg}" alt="text">
                <span class="twoFa__text">${first.text} </span>
              </div>
            </a>`;
        }

        double(list) {
          const [first, second] = list;

          return `<div class="twoFa__content">
              <a class="twoFa__button" href="${first.href}">
                <div class="twoFa__item"> <img class="twoFa__icon" src="${first.svg}" alt="text">
                  <span class="button__text">${first.text}</span>
                </div>
              </a>
              <a class="twoFa__button" href="${second.href}">
                <div class="twoFa__item"> <img class="twoFa__icon" src="${second.svg}" alt="text"></div>
              </a>
            </div>`;
        }

        other(list) {
          const [first, ...other] = list;

          const listOther = () => {
            return other.reduce((accumulator, f) => {
              accumulator += `<a class="twoFa__button" href="${f.href}">
                  <div class="twoFa__item">
                   <img class="twoFa__icon" src="${f.svg}" alt="text">
                   </div>
                </a>`;
              return accumulator;
            }, '');
          };

          return `<div class="twoFa__social">
            <div class="twoFa__content" >
              <a class="twoFa__button" href="${first.href}">
                <div class="twoFa__item">
                  <img class="twoFa__icon" src="${first.svg}" alt="text" />
                  <span class="twoFa__text">${first.text} </span>
                </div>
              </a>
              <div class="twoFa__button" data-js="twofa-toggle-dots">
                <div class="twoFa__item ignore-click"><img class="twoFa__icon " src="${svg.dots}" alt="text" /></div>
              </div>
            </div>
            <div class="twoFa__teleport" data-js="teleport-toggle">
              <div class="twoFa__teleport-box">${listOther()} </div>
            </div>
          </div>`;
        }
      }

      const TemplateGenerator = new TemplateLogic();

      const runner = {
        selectIcon(icon) {
          const listMap = ([_key, _value]) => (String(icon).includes(_key) ? _value : '');
          const result = [...Object.entries(tableIcons)].map((f) => listMap(f)).find(Boolean);

          return `${urlSvg}/${result}`;
        },

        mutateArray({ server }) {
          return [...server].map((f) => Object.assign(f, { svg: runner.selectIcon(f.href) }));
        },

        grabberListTwoFa({ hook, secretTarget }) {
          const secretString = secretTarget.content.textContent;

          const lastChar = secretString.lastIndexOf(',');
          const result = `${secretString.slice(0, lastChar)}${secretString.slice(lastChar + 1)}`;


          return JSON.parse(result) || [];
        },

        calculateVarian({ CDLength, TRLength }) {
          const size = Number(CDLength);
          const temporarySize = Number(TRLength - 1);

          if (size >= temporarySize) return temporarySize;
          if (size <= 0) return 0;
          return size;
        },

        choiceTemplate({ CD, TR, CDLength, TRLength }) {

          let variant = 0;
          if (CD && CD[0].href) variant = runner.calculateVarian({ CDLength, TRLength });



          return TR[variant](CD);
        },

        generatorHtml({ catchData, templateRules }) {
          const CD = catchData;
          const TR = templateRules;
          const CDLength = catchData.length;
          const TRLength = templateRules.length;



          return runner.choiceTemplate({ CD, TR, CDLength, TRLength });
        },
      };

      const setupHook = ({ selector: { formHook, twoFa }, hookName }) => {
        let hook;
        if (twoFa && formHook) {
          formHook.classList.add(hookName);
          hook = document.querySelector(`.${hookName}`);
        }
        return { hook };
      };

      const renderTwoFa = ({ hook, secretTarget }) => {
        const list = runner.grabberListTwoFa({ hook, secretTarget });


        const fetchedData = runner.mutateArray({ server: list });


        const bool = Array.isArray(fetchedData) && fetchedData.length;
        const catchData = bool <= 0 ? [{ 0: false }] : fetchedData;

        const parent = hook.querySelector('[data-js="twofa-buttons-generator"]');
        parent.insertAdjacentHTML(
          'afterbegin',

          runner.generatorHtml({
            catchData,
            templateRules: [
              () => TemplateGenerator.notFound(),
              (f) => TemplateGenerator.single(f),
              (f) => TemplateGenerator.double(f),
              (f) => TemplateGenerator.other(f),
            ],
          })
        );
      };

      // -------------------- HANDLERS --------------------
      const handlerTeleport = ({ target, targetActive, button, buttonActive }) => {
        const _target = document.querySelector(target);
        const _button = document.querySelector(button);
        if (_target && _button) {
          _target.classList.toggle(targetActive);
          _button.classList.toggle(buttonActive);
        }
      };

      const handlerCloseMe = (event, { target, targetActive, button, buttonActive, dots }) => {
        const selector = event.target;
        const myClick = selector.hasAttribute('data-js');
        if (myClick) return false;

        const _target = document.querySelector(target);
        const _button = document.querySelector(button);

        const _bool = _target.classList.contains(targetActive);
        const form = selector.closest(dots);
        if (!form && _bool && !myClick) {
          _target.classList.remove(targetActive);
          _button.classList.remove(buttonActive);
        }
      };

      const handlerCloseMeESC = (event, { target, targetActive, button, buttonActive }) => {
        if (event.key === 'Escape') {
          const _target = document.querySelector(target);
          const _button = document.querySelector(button);

          _target.classList.remove(targetActive);
          _button.classList.remove(buttonActive);
        }
      };

      const run = () => {
        const formHook = document.querySelector('.formHook__style');
        if (!formHook) return;
        const twoFa = formHook.querySelector('[data-js="twofa-collections"]');

        const { hook } = setupHook({
          selector: { formHook, twoFa },
          hookName: 'formHook__twoFa',
        });
        
        if (!hook) return;
        
        const secretTarget =  hook.querySelector('.payload-hidden-text');
        if (secretTarget) renderTwoFa({ hook, secretTarget });

        
        const textDanger = hook.querySelector('.text-danger');
        const inputForm = hook.querySelector('form input');
          if (textDanger && inputForm) {
            inputForm.insertAdjacentElement('afterend', hook.querySelector('.text-danger'))
          }
          
          if (textDanger) {
              const res = textDanger.textContent.includes('максимальное число попыток');
              res ? document.querySelector('.mForm').classList.add('space') : '';
          }
          
        
        
        const handlerProps = {
          target: '.twoFa__teleport',
          targetActive: 'twoFa__teleport--active',
          button: '[data-js="twofa-toggle-dots"]',
          buttonActive: 'twoFa__button-dots--active',
          dots: '[data-js="teleport-toggle"]',
        };

        const selectorTeleport = hook.querySelector(handlerProps.button);
        if (selectorTeleport) {
          selectorTeleport.addEventListener('click', () => handlerTeleport(handlerProps));
          window.addEventListener('click', (event) => handlerCloseMe(event, handlerProps));
          window.addEventListener('keyup', (event) => handlerCloseMeESC(event, handlerProps));
        }
      };

      document.addEventListener('DOMContentLoaded', () => run());
    })();
    </script>
  
    
    <style>
      
      /* stylelint-disable property-no-vendor-prefix */
      /* stylelint-disable selector-id-pattern */
      /* stylelint-disable selector-class-pattern */

      .formHook__apple .top {
        display: grid;
        grid-auto-flow: column;
        align-items: center;
        justify-content: space-between;
      }
      .formHook__apple .mForm {
        margin-top: 40px;
        display: grid;
        grid-gap: 40px;
      }
      .formHook__apple .blockquote-danger.space {
        margin: unset;
      }
      .formHook__apple .form-group.form-login__label {
        display: grid;
        grid-gap: 8px;
      }
      .formHook__apple .button__next-stage {
        margin-top: 48px;
        background-color: var(--color-blue-60, #04c);
        color: var(--color-white, #fff);
        display: grid;
        user-select: none;
        align-items: center;
        justify-content: center;
        border: 0 solid #0000;
        border-radius: 4px;
        padding: 12px 32px;
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        line-height: 24px;
        opacity: 1;
      }
      .formHook__apple #bind.button__next-stage {
        margin-top: 48px;
      }
      .formHook__apple .button__no-account {
        display: grid;
        border: 1px solid var(--color-gray-30, #c4c8d0);
        border-radius: 4px;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        line-height: normal;
        text-transform: none;
        user-select: none;
        text-decoration: none;
        color: var(--color-gray-90, initial);
        padding: 12px 32px;
        margin-top: unset;
        overflow: hidden;
        transition: padding 0.123s ease;
      }

      .formHook__apple .button__no-account:hover {
        background-color: var(--color-cursor-hover, initial);
      }
      .formHook__apple .button__no-account:active {
        background-color: var(--color-cursor-active, initial);
      }
      .formHook__apple .button__no-account:focus {
        box-shadow: 0 0 0 3px var(--color-cursor-focus, initial);
      }

      .formHook__apple .incognito-btn {
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        line-height: normal;
        color: var(--color-blue-60, #04c);
        transition: color 0.123s;
        text-decoration: none;
      }
      .formHook__apple .incognito-container {
        margin-top: 32px;
        color: var(--color-gray-60, initial);
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 12px;
        line-height: 20px;
        text-align: center;
      }
      .formHook__apple .form-login__label .control-label {
        font-family: var(--font-main, sans-serif);
        font-weight: 600;
        font-size: 16px;
        line-height: 24px;
        color: var(--color-gray-90, initial);
      }
      .formHook__apple .form-login__label input:not([type='checkbox']) {
        background-color: var(--color-null, initial);
        border: 1px solid var(--color-gray-30, #c4c8d0);
        border-radius: 4px;
        color: var(--color-gray-90, initial);
        display: grid;
        font-family: var(--font-main, sans-serif);
        font-size: 16px;
        font-weight: 400;
        height: unset;
        line-height: 24px;
        max-height: 48px;
        padding: 12px 16px;
        width: unset;
        transition: border-color 0.123s ease;
      }
      .formHook__apple .form-login__label input:not([type='checkbox']):focus {
        border-color: var(--color-blue-30, initial);
        box-shadow: 0 0 0 3px var(--color-blue-30, initial);
      }
      .formHook__apple .form-login__label input:not([type='checkbox']):hover {
        border-color: var(--color-blue-30, initial);
      }

      .formHook__apple .form-toggle__checkbox-parent {
        display: grid;
        justify-content: start;
      }
      .formHook__apple .form-toggle__checkbox {
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        color: var(--color-gray-90, initial);
      }
      .formHook__apple .form-input {
        justify-content: stretch;
        display: grid;
      }

      .formHook__apple .form-group__recovery {
        display: grid;
        grid-auto-flow: column;
        align-items: center;
        grid-auto-columns: 1fr;
      }
      .formHook__apple .recovery__item {
        display: grid;
        align-items: center;
        justify-content: end;
      }
      .formHook__apple .recovery__item a {
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        line-height: normal;
        color: var(--color-blue-60, #04c);
      }

      /* HACK */
      .formHook__apple #toRegFm {
        margin-top: -20px;
      }

      .formHook__apple #recoveryEnter {
        margin-top: 8px;
      }

      /* MEDIA */
      @media screen and (max-width: 425.99px) {
        .formHook__apple .form-group__recovery {
          grid-auto-flow: row;
          grid-gap: 16px;
        }
        .formHook__apple .recovery__item {
          justify-content: start;
        }
      }

    </style>
    <script>
      (() => {
        class Helper {
          killClasList({ list = [''] }) {
            if (Array.isArray(list) && list.some(Boolean)) {
              for (const f of list) {
                const items = [...document.querySelectorAll(`.${f}`)];
                items.find((x) => x.classList.remove(f));
              }
            }
          }
          replaceAllClass({ target, addClass }) {
            if (target) {
              target.classList.remove(...target.classList);
              const bool = Boolean(addClass && Array.isArray(addClass));
              bool ? target.classList.add(...addClass) : target.classList.add(addClass);
            }
          }
          appendClass({ target, addClass }) {
            if (target) {
              const bool = Boolean(addClass && Array.isArray(addClass));
              bool ? target.classList.add(...addClass) : target.classList.add(addClass);
            }
          }
        }

        const HtmlElement = new Helper();

        const runner = {
          catchDoubleWarning({ hook }) {
            const quote1 = hook.querySelector('.blockquote-danger');
            const quote2 = hook.querySelector('.blockquote-primary');

            if (quote1 && quote2) hook.querySelector('.blockquote-danger').classList.add('space');
          },
          cleanDomTree({ hook }) {
            HtmlElement.killClasList({ list: ['mb20', 'mt20', 'mb30'] });

            const listClass = [
              { target: '#bind', addClass: 'button__next-stage' },
              { target: '#toReg', addClass: 'button__no-account' },
            ];
            for (const f of listClass) {
              const target = hook.querySelector(f.target);
              HtmlElement.replaceAllClass({ target, addClass: f.addClass });
            }
          },
          manageElementsClasses({ hook }) {
            const target = hook.querySelector('#recoveryEnter');
            HtmlElement.appendClass({ target, addClass: 'recovery__item' });
          },
          connectShowPasswordAndRecovery({ hook }) {
            const templateHtml = `
                  <div class="form-group form-apple__recovery-space">
                    <div class="form-group__recovery" data-js="form-toggle-password"></div>
                  </div>`.trim();

            const targetShowPass = hook.querySelector('.form-toggle__checkbox-parent');
            const targetRecovery = hook.querySelector('#recoveryEnter');

            if (targetShowPass && targetRecovery) {
              targetShowPass.insertAdjacentHTML('beforebegin', templateHtml);

              const targetTogglePassword = hook.querySelector('[data-js="form-toggle-password"]');
              if (targetTogglePassword) {
                targetTogglePassword.prepend(targetRecovery);
                targetTogglePassword.prepend(targetShowPass);
              }
            }
          },
        };

        const setupHook = ({ selector: { formHook, listID }, hookName }) => {
          const fail = { hook: document.createElement('div') };

          if (formHook) {
            const bool = [...formHook.querySelectorAll('form')]
              .map((f) => f.getAttribute('id'))
              .some((f) => listID.includes(f));

            const attachHookName = () => {
              formHook.classList.add(hookName);
              const hook = document.querySelector(`.${hookName}`);
              return { hook };
            };
            return bool ? attachHookName() : fail;
          }
          return fail;
        };

        const run = () => {
          const formHook = document.querySelector('.formHook__style');

          const { hook } = setupHook({
            selector: { formHook, listID: ['passwordForm', 'toRegFm'] },
            hookName: 'formHook__apple',
          });

          runner.cleanDomTree({ hook });
          runner.manageElementsClasses({ hook });
          runner.catchDoubleWarning({ hook });

          runner.connectShowPasswordAndRecovery({ hook });
        };

        document.addEventListener('DOMContentLoaded', () => run());
      })();
    </script>
    
  
    
    <style>
      
      /* stylelint-disable property-no-vendor-prefix */
      /* stylelint-disable selector-id-pattern */
      /* stylelint-disable selector-class-pattern */

      .formHook__externalIdps .top {
        display: grid;
        grid-auto-flow: column;
        align-items: center;
        justify-content: space-between;
      }
      .formHook__externalIdps .mForm {
        margin-top: 40px;
      }
      .formHook__externalIdps .mForm .sub-title {
        display: grid;
        align-items: center;
        justify-content: start;
        padding: 0;
        color: var(--color-gray-90, initial);
        font-family: var(--font-main, sans-serif);
        font-weight: 600;
        font-size: 16px;
      }

    </style>
    <script>
      (() => {
        const attachHook = () => {
          const mark = document.querySelector('#m-content');
          if (mark) {
            const hook = document.querySelector('[data-js="append-title-desc"]');
            hook.classList.add('formHook__externalIdps');
          }
        };

        const run = () => {
          attachHook();
        };

        document.addEventListener('DOMContentLoaded', () => run());
      })();
    </script>
  
    
    
    <style>
      
      /* stylelint-disable property-no-vendor-prefix */
      /* stylelint-disable selector-id-pattern */
      /* stylelint-disable selector-class-pattern */

      .logoutManager__box {
        width: 100%;
        height: 75vh;
        display: grid;
        align-items: center;
        justify-content: center;
      }
      .logoutManager__item {
        display: grid;
        grid-auto-flow: row;
        grid-gap: 27px;
        align-items: center;
        justify-content: center;
      }
      .logoutManager__icon {
        width: 34px;
        height: auto;
        display: grid;
        align-self: center;
        justify-self: center;
      }
      img.logoutManager__icon {
        width: 34px;
        height: auto;
        display: grid;
        align-self: center;
        justify-self: center;
      }
      p.logoutManager__text {
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        color: var(--color-gray-90, initial);
      }

      .logout-consent__question {
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        color: var(--color-gray-90, initial);
        padding: 0;
        margin: 32px auto 1rem;
      }
      .logoutBefore__box {
        display: grid;
      }
      
      :where(.logoutManager__icon):empty {
        display: none;
      }

      @media screen and (max-width: 870.99px) {
        .logoutManager__box {
          max-height: 45.6123vh;
        }
        .logoutBefore__box {
          height: 100%;
          align-items: start;
          justify-content: stretch;
          grid: max-content 1fr auto / 1fr;
        }
      }

    </style>
    <script>
      
    (() => {
      const helper = {

        removeText(target = '') {
          const selector = document.querySelector(target);
          if (selector) return (selector.textContent = '');
        },

        removeMe(target = '') {
          const selector = document.querySelector(target);
          if (selector) return selector.remove();
        },

        insertHtml({ target = '', position = 'afterbegin', text = '' }) {
          const selector = document.querySelector(target);
          if (selector) selector.insertAdjacentHTML(position, text.trim());
        },

        insertElement({ target = '', position = 'afterbegin', element }) {
          const selector = document.querySelector(target);
          if (selector && element) selector.insertAdjacentElement(position, element);
        },
      };

      const stateSuccess = () => {
        helper.removeText('.page-title');
        helper.removeMe('#result');

        return helper.insertHtml({
          target: '#logout-success',
          position: 'afterbegin',
          text: `
              <div class="logoutManager__box" data-js="logout-process--success">
                  <div class="logoutManager__item">
                      <img class="logoutManager__icon" src="/sps/public/assets/themes/default_1680512023/assets/img/svg/logout-success.svg" alt="Icon">
                      <p class="logoutManager__text">Выход успешно завершен</p>
                  </div> 
              </div>`,
        });
      };

      const stateLoading = () => {
        helper.removeText('.page-title');
        helper.removeMe('#result');
        helper.removeMe('#preloader');

        const selector = document.querySelector('#apps');
        if (selector) selector.replaceChildren();

        return helper.insertHtml({
          target: '#apps',
          position: 'beforebegin',
          text: `
            <div class="logoutManager__box" data-js="logout-process--loading">
              <div class="logoutManager__item">
                  <div class="logoutManager__icon"></div>
                  <p class="logoutManager__text">Выход из учетной записи...</p>
              </div> 
            </div>`,
        });
      };

      const stateBeforeLoading = () => {
        const hook = document.querySelector('[data-js="append-title-desc"]');

        helper.removeMe('#result');
        helper.removeMe('#preloader');

        helper.insertHtml({
          target: '[data-js="append-title-desc"]',
          position: 'afterbegin',
          text: `<div class="logoutBefore__box" id="id-before-loading"></div>`,
        });

        if (hook) {
          const list = [...hook.childNodes].filter((f) => !f.nodeValue).slice(1);

          for (const f of list) {
            return helper.insertElement({
              target: '#id-before-loading',
              position: 'beforeend',
              element: f,
            });
          }
        }
      };

      const logoutState = (listStateScreen = [{ name: '', target: '' }]) => {
        const listState = {
          beforeLoading: () => stateBeforeLoading(),
          loading: () => stateLoading(),
          success: () => stateSuccess(),
        };

        for (const f of listStateScreen) {
          if (f.name && document.querySelector(f.target)) {
            return listState[f.name]();
          }
        }
      };
      
      const run = () => {       
        const listStateScreen = [
          { name: 'beforeLoading', target: '.logout-consent__question' },
          { name: 'loading', target: '#apps' },
          { name: 'success', target: '#logout-success' },
        ];

        return logoutState(listStateScreen);
      };

      document.addEventListener('DOMContentLoaded', () => run());
    })();


    </script>
  
    
    
    <style>
      
      /* stylelint-disable property-no-vendor-prefix */
      /* stylelint-disable selector-id-pattern */
      /* stylelint-disable selector-class-pattern */

      .formHook__style #captcha_container.form-group {
        margin-top: 24px;
      }

      .formHook__style .formCaptcha__container {
        display: grid;
        grid: minmax(auto, 48px) / 1fr minmax(auto, 160px) minmax(auto, 48px);
        grid-gap: 8px;
        align-items: stretch;
        justify-content: stretch;
      }
      .formHook__style .formCaptcha__box {
        display: grid;
        grid-gap: 8px;
      }
      .formHook__style .formCaptcha__title {
        font-weight: 600;
        font-size: 16px;
        color: var(--color-gray-90, initial);
        font-family: var(--font-main, sans-serif);
      }
      .formHook__style .formCaptcha__secret {
        display: inline-grid;
        object-fit: fill;
        border: 0;
        border-radius: 4px;
        outline: 1px solid var(--color-gray-30, #c4c8d0);
      }
      .formCaptcha__container .captcha-button {
        display: grid;
        align-items: center;
        justify-content: center;
        color: var(--color-blue-60, #04c);
        border: 0;
        border-radius: 4px;
        line-height: normal;
        padding: 11px;
        user-select: none;
        text-decoration: none;
        font-size: 16px;
        text-transform: unset;
        overflow: hidden;
        transition: padding 0.123s, background-color 0.234s;
      }
      .formCaptcha__container .captcha-button[disabled] {
        opacity: 0.6;
        color: var(--color-gray-90, initial);
        cursor: not-allowed;
        background-color: var(--color-cursor-hover, initial);
      }

      .formCaptcha__container .captcha-button:hover {
        background-color: var(--color-cursor-hover, initial);
      }

      .formCaptcha__container .captcha-button:active {
        background-color: var(--color-cursor-active, initial);
      }

      .formHook__style .captcha-input-field {
        outline: none;
      }

      .formHook__style .preloader {
        z-index: 1;
        display: grid;
        align-items: center;
        justify-content: start;
        height: 60px;
        background-image: unset;
      }
      .captcha-input-field + span.help-block {
        grid-row: 2 / 3;
      }

      @media screen and (max-width: 925.99px) {
        .formHook__style .formCaptcha__container {
          grid: minmax(auto, 48px) / 1fr minmax(auto, 120px) auto;
        }
      }

      @media screen and (max-width: 399.99px) {
        .formHook__style .formCaptcha__container {
          grid: minmax(auto, 48px) / 1fr;
        }
      }

    </style>
    <script>
    
    (() => {
      class DomElement {
        attachClass({ target, addClass }) {
          if (target) {
            const bool = Boolean(addClass && Array.isArray(addClass));
            bool ? target.classList.add(...addClass) : target.classList.add(addClass);
          }
        }

        createHtml({ target, template, property = 'afterbegin' }) {
          if (target && typeof template === 'string') {
            target.insertAdjacentHTML(property, template);
          }
        }

        moveElementFromTo({ from, to, property = 'afterbegin' }) {
          if (from && to) {
            to.insertAdjacentElement(property, from);
          }
        }

        deleteElement({ target }) {
          if (target) {
            if (Array.isArray(target) && target.every(Boolean)) {
              return [...target].map((f) => f.remove());
            }

            if (!Array.isArray(target)) return target.remove();
          }
          return false;
        }
      }
      const HtmlElement = new DomElement();

      const runner = {
        reBuildCapthca() {
          const hook = document.querySelector('#captcha_container');

          HtmlElement.attachClass({
            target: hook.querySelector('.captcha'),
            addClass: 'formCaptcha__box',
          });

          // warn STRING class
          const listCreateHtml = ['formCaptcha__title', 'formCaptcha__container'];
          for (const f of listCreateHtml) {
            HtmlElement.createHtml({
              target: hook.querySelector('.formCaptcha__box'),
              template: `<div class="${f}"></div>`,
              property: 'beforeend',
            });
          }

          // warn PURE class
          const listMoveElement = [
            { from: '.captcha-text', to: '.formCaptcha__title' },
            // eslint-disable-next-line sonarjs/no-duplicate-string
            { from: '.captcha-img img', to: '.formCaptcha__container' },
            { from: '.captcha-input-field', to: '.formCaptcha__container' },
            // eslint-disable-next-line sonarjs/no-duplicate-string
            { from: '.captcha-button', to: '.formCaptcha__container' },
          ];
          for (const f of listMoveElement) {
            HtmlElement.moveElementFromTo({
              from: hook.querySelector(f.from),
              to: hook.querySelector(f.to),
              property: 'beforeend',
            });
          }

          // warn PURE class
          const listDeleteElement = ['.captcha-input', '.captcha-img'];
          for (const f of listDeleteElement) {
            HtmlElement.deleteElement({ target: hook.querySelector(f) });
          }

          hook.querySelector('.captcha-button').replaceChildren();

          HtmlElement.createHtml({
            target: hook.querySelector('.captcha-button'),
            template: `<div class="formCaptcha__icon">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M13.9117 4.06536C14.285 3.84041 14.7709 3.98516 14.9602 4.37771C15.1261 4.72181 15.0028 5.13566 14.6756 5.33284L13.1648 6.24332C14.427 6.46769 15.6015 7.04969 16.5625 7.92742C17.9165 9.1642 18.7463 10.8964 18.8452 12.7846C19.0477 16.6476 16.1459 19.9398 12.364 20.138C8.582 20.3362 5.352 17.3653 5.14955 13.5024C5.12705 13.0731 5.44947 12.7073 5.86969 12.6853C6.28991 12.6633 6.6488 12.9934 6.67129 13.4226C6.82875 16.4272 9.34098 18.7379 12.2825 18.5837C15.224 18.4295 17.481 15.8689 17.3235 12.8643C17.2465 11.3945 16.6021 10.0493 15.548 9.08653C14.7025 8.31424 13.6468 7.83686 12.5188 7.72266L13.4593 9.5745C13.6323 9.91511 13.5176 10.3314 13.1945 10.5353C12.8259 10.7679 12.3372 10.6332 12.1399 10.2446L10.5076 7.03066C10.4084 6.83544 10.4038 6.61534 10.4787 6.42463C10.5162 6.22318 10.6368 6.03897 10.8243 5.92595L13.9117 4.06536Z" fill="currentColor"/>
    </svg>
  </div>`,
            // template: `<img src="/sps/public/assets/themes/default_1680512023/assets/img/svg/repeat.svg" title="icon" alt="Picture" class="formCaptcha__icon"></img>`,
            property: 'beforeend',
          });
          
          HtmlElement.attachClass({
            target: hook.querySelector('.formCaptcha__container img'),
            addClass: 'formCaptcha__secret',
          });
          
        },
      };

      const continueMutation = ({ MutationRecord, observer }) => {
        const mutationElement = [...MutationRecord.addedNodes];

        const result = mutationElement.find((f) => f.classList.contains('captcha'));

        if (result) {
          runner.reBuildCapthca();
          observer.disconnect();
        }
      };

      const run = () => {
        const mo = new MutationObserver((mutationsList, observer) => {
          if (Array.isArray(mutationsList) && mutationsList.some(Boolean)) {
            const MutationRecord = mutationsList.find((f) => [...f.addedNodes].some(Boolean));

            if (MutationRecord && MutationRecord.addedNodes) {
              continueMutation({ MutationRecord, observer });
            }
          }
        });

        try {
          const targetMutate = document.querySelector('#captcha_container');
          const captchaDataAttr = document.querySelector('[data-js="captcha-watcher"]');
          
          if (targetMutate) mo.observe(targetMutate, { attributes: false, subtree: false, childList: true });
          
          if (!targetMutate && captchaDataAttr) {
            captchaDataAttr.classList.add('hide');
          }
        } catch (error) {
          console.log(`[LOG] error`, `<${typeof error}>`, error);
          mo.disconnect();
        }
      };

      document.addEventListener('DOMContentLoaded', () => run());
    })();

    </script>
  
    
    <style>
      
      /* stylelint-disable property-no-vendor-prefix */
      /* stylelint-disable selector-id-pattern */
      /* stylelint-disable selector-class-pattern */

      .text-danger__fixRows {
        display: grid;
        grid-auto-flow: row;
      }

      #reg-content .form-section #errBlock .text-danger {
        display: block;
      }
      #reg-content .form-section #errBlock .text-danger::before {
        display: none;
      }

      .form-group.form-group-space {
        display: grid;
        grid-gap: 8px;
      }
      #fm #codeFm p + p {
        display: none;
      }

    </style>
    
    <script>
    (() => {
      const selector = { ID: { fm: '#reg-content #fm' } };

      const fixTextDanger = () => {
        const invalidTextDanger = document.querySelector('#errBlock .text-danger a[href]');
        // console.log(`[LOG] invalidTextDanger`, `<${typeof invalidTextDanger}>`, invalidTextDanger)
        if (invalidTextDanger) {
          const selector = document.querySelector('#errBlock .text-danger');
          if (selector) selector.classList.add('text-danger__fixRows');
        }
      };

      // INITIALIZATION_CLOCK
      const timerAttachServerClock = (selector) => {
       
       
        const temporary = `
           <template id="timeLeft">{0}</template>
        `.trim();
        
        if (selector && selector.parentElement) selector.parentElement.insertAdjacentHTML('beforeend', temporary);
      };
      
      const timerAttachLabel = (selector) => {
        const temporary = `
            <h4 class="clockTimer__label">Код подтверждения</h4>
         `.trim();
      
       if (selector) selector.insertAdjacentHTML('beforebegin', temporary);
      };
      const timerConvertorSeconds = (targetTimerBundleID) => {
        const selector = document.querySelector(targetTimerBundleID);
        if (selector && selector.textContent) {
          const clockSeconds = Number(selector.textContent.trim() || 999);
          const getStringClock = new Date(new Date().setHours(0, 0, 0, 0) + clockSeconds * 1000);

          const etc = getStringClock
            .toLocaleTimeString('en-UK', {
              hour: '2-digit',
              minute: '2-digit',
              second: '2-digit',
              hour12: false,
            })
            .split(/:| /)
            .map(Number);

          const [hh, mm, ss] = etc;
          return { hh, mm, ss, clock: clockSeconds };
        }
      };
      const timerAttachResultClock = ({ selector }) => {
        const temporary = `
           <p class="clockTimer__result">Отправить ещё раз через <span data-js="clock-timer-interval"></span></p>
         `.trim();
        selector.insertAdjacentHTML('afterend', temporary);
      };

      const timerSingleReplaceClock = ({ target, isos }) => {
        const selector = document.querySelector(target);
        if (selector && isos) {
          const { hh, mm, ss } = isos;

          const minutes = mm > 0 ? `${mm} мин` : '';
          const seconds = ss > 0 ? `${ss} сек` : '';
          selector.textContent = `${minutes} ${seconds}`.trim();
        }
      };

      // INITIALIZATION_CLOCK__END

      const tryBlockingInput = ({ selector }) => {
        selector.addEventListener('keydown', (event) => {
          // console.log('[eventKey]', 'eventKey', event.key);
          const eventKey = event.key;
          const listBlack = ['ArrowDown', 'ArrowUp', '+', '-', 'e', 'E', ','];

          if (listBlack.includes(eventKey)) {
            return event.preventDefault();
          }
        });
        
        selector.addEventListener('wheel' , (event) => event.preventDefault());
        
      };

      const other = {
        attachTimer({ targetID, targetTimerBundleID, elementLabel = true }) {
          const selector = document.querySelector(targetID);
          // console.log(`[LOG] selector`, `<${typeof selector}>`, selector)
          if (selector) {
            timerAttachServerClock(selector);
            if (elementLabel) timerAttachLabel(selector);

            timerAttachResultClock({ selector });
            tryBlockingInput({ selector });

            const timeOutLoop = setInterval(() => {
              const _isos = timerConvertorSeconds(targetTimerBundleID);
              timerSingleReplaceClock({
                target: '[data-js="clock-timer-interval"]',
                isos: _isos,
              });

              if (_isos && _isos.clock <= 1) clearInterval(timeOutLoop);
            }, 100);
          }
        },
      };

      const runner = {
        killFs14() {
          const killFs14 = [...(document.querySelectorAll('.fs14') || [])];

          if (Array.isArray(killFs14) && killFs14.some(Boolean)) {
            killFs14.map((f) => f.classList.remove('fs14'));
          }
        },

        continueMutation({ MutationRecord, observer }) {
          const mutationElement = [...MutationRecord.addedNodes];
          // console.log(`[LOG] mutationElement`, `<${typeof mutationElement}>`, mutationElement)

          let disconnectObserver = false;

          const getForm = mutationElement.find((f) => f.getAttribute('id'));
          // console.log(`[LOG] getForm`, `<${typeof getForm}>`, getForm)
          const secondState = mutationElement.find((f) => f.querySelector('#resendFm'));
          // console.log(`[LOG] secondState`, `<${typeof secondState}>`, secondState)
          const emailForm = mutationElement.find((f) => f.querySelector('#email_code'));
          // console.log(`[LOG] secondState`, `<${typeof secondState}>`, secondState)

          runner.killFs14();

          console.log('[componentRemoverStaticCode]', false);
          fixTextDanger();

          if (getForm) {
            runner.killFs14();
            getForm.parentElement.classList.add('formRecovery__container');

            const formGroup = document.querySelector('.formHook__style #reg-content .form-group');
            if (formGroup) formGroup.classList.add('form-group-space');

            other.attachTimer({ targetID: '#sms_code', targetTimerBundleID: '#timeLeft', elementLabel: false });
          }

          if (emailForm) {
            runner.killFs14();
            other.attachTimer({ targetID: '#email_code', targetTimerBundleID: '#timeLeft', elementLabel: false });
          }

          if (secondState) {
            runner.killFs14();
            disconnectObserver = false;
          }

          if (disconnectObserver) {
            runner.killFs14();
            // console.log(`[${selector.ID.fm}] observer.disconnected`);
            return observer.disconnect();
          }
        },

        goMutationObserver({ target }) {
          const observer = new MutationObserver((mutationsList, observer) => {
            if (Array.isArray(mutationsList) && mutationsList.some(Boolean)) {
              const MutationRecord = mutationsList.find((f) => [...f.addedNodes].some(Boolean));

              if (MutationRecord && MutationRecord.addedNodes) {
                runner.continueMutation({ MutationRecord, observer });
              }
            }
          });

          try {
            const config = {
              attributes: true,
              childList: true,
              subtree: false,
              attributeFilter: ['id'],
              attributeOldValue: true,
            };

            observer.observe(target, config);
          } catch {
            // console.log(`[${selector.ID.fm}] observer.disconnected`);
            observer.disconnect();
          }
        },
      };

      const run = () => {
        const target = document.querySelector('#reg-content #fm');
        if (target) runner.goMutationObserver({ target });
      };

      document.addEventListener('DOMContentLoaded', () => run());
    })();
    </script>
  
    
    
    <style>
      
      /* stylelint-disable property-no-vendor-prefix */
      /* stylelint-disable selector-id-pattern */
      /* stylelint-disable selector-class-pattern */

      .incognitoModal__preview-text {
        display: none;
      }
      .incognitoModal__text {
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        line-height: 24px;
        color: var(--color-gray-90, initial);
        margin-top: 32px;
        display: block;
        text-align: center;
      }
      .incognitoModal__text-link {
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        line-height: normal;
        color: var(--color-blue-60, #04c);
        transition: color 0.123s;
        text-decoration: none;
        cursor: pointer;
      }
      .incognitoModal__text-link:hover {
        color: var(--color-blue-60, #04c);
        text-decoration-line: underline;
        text-underline-position: under;
        text-decoration-color: var(--color-blue-60, #04c);
      }

      .inconitoModal__background {
        position: fixed;
        left: 0;
        top: 0;
        background-color: rgb(0 0 0 / 60%);
        width: 100%;
        height: 100%;
      }
      .inconitoModal__background.disabled {
        display: none;
      }
      .incognitoModal__position {
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        overflow: hidden;
        z-index: 123;
      }
      .incognitoModal__box {
        position: relative;
        border-radius: 8px;
        padding: 40px;
        padding-top: 32px;
        background-color: var(--color-white, #fff);
        box-shadow: 0 16px 32px rgb(0 20 67 / 12%);
        max-width: 724px;
        width: 89vw;
        overflow: hidden;
        overflow-y: auto;
        max-height: 89vh;
      }
      .incognitoModal__close {
        display: grid;
        width: 32px;
        height: 32px;
        border: 0;
        border-radius: 100%;
        grid: 1fr / 1fr;
        position: absolute;
        right: 16px;
        top: 16px;
        cursor: pointer;
        transition: background-color 0.123s;
        z-index: 123;
      }
      .incognitoModal__close:hover {
        background-color: var(--color-gray-10, initial);
      }
      .incognitoModal__close:active {
        background-color: var(--color-gray-30, #c4c8d0);
      }

      img.incognitoModal__close-svg {
        width: 10px;
        height: 10px;
        display: grid;
        align-self: center;
        justify-self: center;
        pointer-events: none;
        user-select: none;
      }
      .incognitoModal__web {
        display: grid;
        grid-auto-flow: row;
        grid-gap: 24px;
      }
      .incognitoModal__header {
        display: grid;
        grid-gap: 1rem;
        justify-content: space-between;
        grid: auto / 1fr 32px;
      }
      .incognitoModal__title {
        display: grid;
        color: var(--color-gray-90, initial);
        font-family: var(--font-main, sans-serif);
        font-weight: 600;
        font-size: 26px;
      }
      .incognitoModal__middle {
        position: relative;
      }
      .incognitoModal__hr {
        width: 100vw;
        height: 1px;
        position: absolute;
        background-color: var(--color-gray-20, initial);
        left: 50%;
        top: 0;
        transform: translate(-50%, 0);
      }
      .incognitoModal__footer {
        display: grid;
        grid-auto-flow: row;
        grid-gap: 1rem;
      }
      .incognitoModal__description {
        display: grid;
        color: var(--color-gray-90, initial);
        font-family: var(--font-main, sans-serif);
        font-weight: 400;
        font-size: 16px;
        grid-gap: 1rem;
      }

      .incognitoModal__button {
        align-items: center;
        background-color: var(--color-blue-60, #04c);
        border-color: #0000;
        border-radius: 4px;
        border: 0;
        color: var(--color-white, #fff);
        display: grid;
        font-family: var(--font-main, sans-serif);
        font-size: 16px;
        font-weight: 400;
        justify-content: center;
        line-height: 24px;
        margin-top: 40px;
        opacity: 1;
        padding: 12px 32px;
        user-select: none;
        transition: background-color 0.123s;
        position: relative;
        overflow: hidden;
      }
      .incognitoModal__button.incognitoModal__button--start {
        justify-self: start;
      }
      .incognitoModal__button:hover {
        background-color: var(--color-blue-70, #04c);
        color: var(--color-white, #fff);
      }
      .incognitoModal__button:active {
        background-color: var(--color-blue-80, initial);
        color: var(--color-white, #fff);
      }
      .incognitoModal__lock-scroll {
        overflow: hidden !important;
      }

      /* MEDIA */
      @media screen and (max-width: 599.99px) {
        .incognitoModal__button.incognitoModal__button--start {
          justify-self: unset;
        }
        .incognitoModal__button {
          margin-top: 32px;
        }
        .incognitoModal__position {
          width: 100%;
          height: 100%;
        }
        .incognitoModal__box {
          padding: 16px;
          width: 100%;
          height: 100%;
          grid: 1fr auto / 1fr;
          display: grid;
          grid-gap: 1rem;
          align-items: start;
          border-radius: unset;
          max-height: unset;
        }
        .incognitoModal__title {
          font-size: 21px;
        }
        .incognitoModal__web {
          grid-gap: 11px;
          display: grid;
          overflow: hidden;
          overflow-y: auto;
          max-height: 110%;
        }
        .incognitoModal__footer {
          display: grid;
          grid-auto-flow: row;
          grid-gap: 1rem;
          max-height: 100%;
        }
      }

    </style>
    <script>
    (() => {
      const executeText = (target) => {
        const selector = document.querySelector(target);
        if (selector) {
          return [...selector.childNodes].map((f) => f.textContent);
        }
      };

      const attachText = ({ target, text = [] }) => {
        const selector = document.querySelector(target);
        if (selector && text && text.length > 0) {
          const [textStart, textMiddle, textEnd] = text;
          const template =
            `<div class="incognitoModal__text">${textStart} <span class="incognitoModal__text-link" data-js="incognito-modal-open">${textMiddle}</span> ${textEnd} </div>`.trim();
          selector.insertAdjacentHTML('afterend', template);
        }
      };

      
      const handlerToggleModal = (event, {target}) => {
        const selector = document.querySelector(target);
        if (selector) selector.classList.toggle('disabled');
        
        const _body = document.querySelector('body');
        const _html = document.querySelector('html');
        if (_html && _body && !selector.classList.contains('disabled')) {
          _html.classList.add('incognitoModal__lock-scroll');
          _body.classList.add('incognitoModal__lock-scroll');
        } else {
          _html.classList.remove('incognitoModal__lock-scroll');
          _body.classList.remove('incognitoModal__lock-scroll');
        }
      }
      
      const run = () => {
        const targetModalMain = '[data-js="incognito-modal-main"]';
        const targetModalClose = '[data-js="incognito-modal-close"]';
        const targetModalOpen = '[data-js="incognito-modal-open"]';
        const grabText = '[data-js="incognito-grabb-text"]';
        const nextChildElement = `${targetModalMain} > div`
        
        const text = executeText(grabText);
        attachText({ target: grabText, text });
        
        const closeButtons = document.querySelector(targetModalMain);
        if (closeButtons) {
          closeButtons.addEventListener('click', (event) => {
            const eventTarget = event.target;
            if (eventTarget.closest(targetModalClose)) {
              return handlerToggleModal(event, {target: targetModalMain});
            }
            
            const A = eventTarget.closest(targetModalMain);
            const B = eventTarget.closest(nextChildElement);
            if (A && !B) return handlerToggleModal(event, {target: targetModalMain});
          })
        }
        const openButton = document.querySelector(targetModalOpen);

        if (openButton) {
          openButton.addEventListener('click', (event) => {
            return handlerToggleModal(event, {target: targetModalMain});
          })
        }
      };

      document.addEventListener('DOMContentLoaded', () => run());
    })();
    </script>
  
    
    
    <style>
      [for="birthDate"] {
        pointer-events: none;
      }
    
    </style>
    <script>
      
      (() => {
        const defaultPikaTime = () => {
          const t = new Date();
          t.setFullYear(t.getFullYear() - 18);
          return t;
        };
        
        
        const initialization = () => {
          const target = '#birthDate';
          const selector = document.querySelector(target);
          const head = document.querySelector('head title');
          if (!selector || !head) return;
          
          const template = `
          <link rel="stylesheet" href="/sps/public/assets/themes/default_1680512023/assets/vendor/pikaday/pikaday.css">
          `.trim();
          head.insertAdjacentHTML('afterend', template);
          
          const loader = requirejs.config({
            paths: {
              Pikaday: '/sps/public/assets/themes/default_1680512023/assets/vendor/pikaday/pikaday',
              _IMask: '/sps/public/assets/themes/default_1680512023/assets/vendor/imask/imask',
            },
          });

          loader(['Pikaday', '_IMask'], (Pikaday, _IMask) => {
            const IMask = _IMask.default

            const yearNow = new Date().getFullYear();
            const yearStart = Number(yearNow - 123);
            const yearEnd = Number(yearNow);
            const localeConf = {
              lang: 'ru-RU',
              option: {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
              },
            };
            // mutated syncCache
            let syncCache = '';
            
            const pikadayConfig = {
              field: selector,
              format: 'DD.MM.YYYY',
              toString(date, format) {
                return date.toLocaleDateString(localeConf.lang, localeConf.option);
              },
              parse(dateString, format) {
                const [D, M, Y] = dateString.split('.');
                const end = new Date(Y, Number(M - 1), D);

                syncCache = end;
                return end;
              },
              onSelect(data, format) {
                const trueDate = data.toLocaleDateString(localeConf.lang, localeConf.option);
                return (syncCache = trueDate);
              },

              maxDate: new Date(),
              minDate: new Date(yearStart, 0, 1),
              firstDay: 1,
              yearRange: [yearStart, yearEnd],
              defaultDate: defaultPikaTime(),
              setDefaultDate: true,
              i18n: {
                previousMonth: 'Предыдущий месяц',
                nextMonth: 'Следующий месяц',
                months: [
                  'Январь',
                  'Февраль',
                  'Март',
                  'Апрель',
                  'Май',
                  'Июнь',
                  'Июль',
                  'Август',
                  'Сентябрь',
                  'Октябрь',
                  'Ноябрь',
                  'Декабрь',
                ],
                weekdays: ['Воскресенье', 'Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Суббота'],
                weekdaysShort: ['вс.', 'пн.', 'вт.', 'ср.', 'чт.', 'пт.', 'сб.'],
              },
            };
            
            const maskOptions = {
              mask: Date,
              overwrite: false,
              autofix: 'pad',
              lazy: true,
              placeholderChar: '_',
              blocks: {
                YYYY: {
                  mask: IMask.MaskedRange,
                  from: yearStart,
                  to: yearEnd,
                  maxLength: 4,
                },
                MM: {
                  mask: IMask.MaskedRange,
                  from: 1,
                  to: 12,
                  maxLength: 2,
                },
                DD: {
                  mask: IMask.MaskedRange,
                  from: 1,
                  to: 31,
                  maxLength: 2,
                },
              },
            };
            

            new Pikaday(pikadayConfig);
            const activeMask = IMask(selector, maskOptions);
            // reset default print value
            activeMask.value = '';
           
            // HANDLERS 
            if (selector) {
              selector.addEventListener('focus', () => {
                return activeMask.updateOptions({ lazy: false });
              });
              selector.addEventListener('blur', () => {
                return activeMask.updateOptions({ lazy: true });
              });
            }

            
          });
        };

        const run = () => {
          initialization();
        };
        document.addEventListener('DOMContentLoaded', () => run());
      })();
    
    </script>
  
    
    <style>
       .deviceHook__style .code__input {
          max-width: 133px;
        }
       .deviceHook__style .code__input:focus {
         border-color: var(--color-blue-30, initial);
         box-shadow: 0 0 0 3px var(--color-blue-30, initial);
       }
       .deviceHook__style .code__form {
          margin-top: 40px;
        }
       .deviceHook__style .code__submit {
          margin-top: 48px;
        }
       .deviceHook__style .code__label {
          margin-top: 24px;
          font-family: var(--font-main, sans-serif);
          font-weight: 600;
          font-size: 16px;
          line-height: normal;
          color: var(--color-gray-90, initial);
          width: max-content;
        }
        .deviceHook__style .code__space {
          margin-top: 40px;
        }
        
        .deviceHook__style .form-input {
          display: grid;
          grid-gap: 8px;
        }
        
        @media screen and (max-width: 870.99px) {
          .deviceHook__style .page-title {
            font-size: 26px;
            line-height: normal;
            margin-bottom: 0;
            text-align: unset;
            overflow: hidden;
          }
        }
        
    </style>
    
    <script>
      (() => {
          const attachHook = (list) => {
            const _bool = [...list].every((f) => document.querySelector(f));
            if (_bool) {
              const selector = document.querySelector('[data-js="append-title-desc"]');
              if (selector) selector.classList.add('deviceHook__style');

              const _image = document.querySelector('.header-image');
              if (_image) _image.remove();

              return true;
            }

            return false;
          };

          const addClass = ({ target, nameClass }) => {
            const selector = document.querySelector(target);
            if (selector) selector.classList.add(nameClass);
          };

          const manageElementsClasses = () => {
            addClass({ target: '#uc', nameClass: 'code__input' });
            addClass({ target: '#save', nameClass: 'code__submit' });
            addClass({ target: '#fm', nameClass: 'code__form' });
          };

          const createLabel = () => {
            const selectorInput = document.querySelector('#uc');

            const temporary = `
            <label for="uc" class="code__label">Код подтверждения</label>
            `.trim();
            if (selectorInput) selectorInput.insertAdjacentHTML('beforebegin', temporary);
          };

          const run = () => {
            const screenAttachDevice = attachHook(['#fm', '#uc']);
            if (screenAttachDevice) {
              manageElementsClasses();
              createLabel();
            }

            const screenSuccess = attachHook(['#page-oauth-device-alice']);
            if (screenSuccess) {
              const selector = document.querySelector('#page-oauth-device-alice');
              if (selector && selector.parentElement) {
                return selector.parentElement.classList.add('code__space');
              }
            }
          };

          document.addEventListener('DOMContentLoaded', () => run());
        })();
    </script>
  
  
    
    
    <script>console.log("[componentStatsGifUrl]", true); </script>
    
    
      <script>
      
       (() => {        
         const globalPageLocation = window ? window.location.pathname : undefined;
         const globalPageInfo = { visit: 'visit', click: 'click' };
         const globalConfig = { globalPageInfo, globalPageLocation };

         const secretCaptcha = '[name="captcha_answer"]';
         // const secretCaptcha = '.formCaptcha__secret';
         const statsCode = Number("2");

         let bufferMessage = '';
         let pageFlagEmail = true;
         const pageFlagSms = true;

         const SDT = {
          extra: {
            SMS: 'Сабмит+кода+из+SMS',
            EMAIL: 'Сабмит+кода+из+Email', 
          },
          mutation: {
            visit: {
              main: 'Открыта+форма+Регистрация',
              sms: 'Открыта+форма+Подтверждения+SMS',
              email: 'Открыта+форма+Подтверждения+Email',
            },
            click: {
              button: {
                main: 'Клик+на+кнопку+Регистрация',
                sms: 'Клик+на+кнопку+Подтверждения+SMS',
                email: 'Клик+на+кнопку+Подтверждения+Email',
                loginLink: 'Клик+на+кнопку+войти+из+Регистрации',
              },
            },
          },
          stats: {
            visit: {
              loginMethodPassword: 'Открыта+форма+входа',
              loginMethodDeepTwo: 'Открыта+форма+входа+2fa',
              loginMethodDeep: 'Открыта+форма+входа+2fa',
              loginMethod: 'Открыта+форма+входа+sms+или+email',
              loginReg: 'Открыта+форма+регистрации',
              recoveryNewPswd: 'Открыта+форма+нового+пароля+для+учетной+записи',
              recoveryMethodsTwo: 'Дополнительный+запрос+кода+из+sms+или+email',
              recoveryMethods: 'Запрос+кода+из+sms+или+email',
              recoveryStart: 'Запрос+выбора+контакта+или+ввода+кода',
              recovery: 'Открыта+форма+восстановления+доступа',
              externalIdps: 'Открыта+форма+Вызов+внешней+системы+входа',
            },
            click: {
              button: {
                loginFm: 'Клик+на+кнопку+войти',
                esia: 'Клик+на+кнопку+ЕСИА',
                sbrf: 'Клик+на+кнопку+Сбер',
                tcs: 'Клик+на+кнопку+Тинькофф+ID',
                x509: 'Клик+на+кнопку+ЭП',
                notMe: 'Клик+на+кнопку+Это+не+я+С+аккаунтом',
                notMe2: 'Клик+на+кнопку+Это+не+я+Без+аккаунта',

                socialYa: 'Клик+на+кнопку+Яндекс',
                socialMail: 'Клик+на+кнопку+Mail+ru',
                socialVK: 'Клик+на+кнопку+ВК',
                socialOK: 'Клик+на+кнопку+Одноклассники',
                socialApple: 'Клик+на+кнопку+apple',
                socialGoogle: 'Клик+на+кнопку+google',
                socialFB: 'Клик+на+кнопку+facebook',
                socialDots: 'Клик+на+кнопку+Показать+еще',
                socialDots2fa: 'Клик+на+кнопку+Показать+еще+2fa',

                webAuthn: 'Клик+на+кнопку+webAuthn',
                sms: 'Клик+на+кнопку+sms',
                qrCode: 'Клик+на+кнопку+qrCode',
                regEnter: 'Клик+на+кнопку+к+Регистрации',
                recoveryEnter: 'Клик+на+кнопку+Восстановить+пароль',

                empty: '',
              },

              buttonEverywhere: {
                oldStyle: 'Клик+на+кнопку+Старый+дизайн',
              },
              buttonDeepTwo: {
                methodTotp: 'Клик+на+кнопку+Подтвердить+при+totp',
                methodSms: 'Клик+на+кнопку+Подтвердить+при+sms',
                methodEmail: 'Клик+на+кнопку+Подтвердить+при+email',
                methodWebAuthn: 'Клик+на+кнопку+Подтвердить+при+WebAuthn',
              },
              buttonDeep: {
                methodOther: 'Клик+на+кнопку+Другие+способы+входа',
                methodEnter: 'Клик+на+кнопку+Подтвердить+номер+телефона',

                methodTotp: 'Клик+на+кнопку+Подтвердить+при+totp',
                methodSms: 'Клик+на+кнопку+Подтвердить+при+sms',
                methodEmail: 'Клик+на+кнопку+Подтвердить+при+email',
                methodWebAuthn: 'Клик+на+кнопку+Подтвердить+при+WebAuthn',
                
                agree: 'Клик+на+кнопку+Доверять',
                disagree: 'Клик+на+кнопку+Не+доверять',
              },

              buttonReg: {
                submit: 'Клик+на+кнопку+Зарегистрироваться',
                loginLink: 'Клик+на+кнопку+Войти',
              },
              buttonRecovery: {
                startBtn: 'Клик+на+кнопку+Восстановить+доступ',
                loginLink: 'Клик+на+кнопку+Войти',
                verifyBtn: 'Сабмит+кода+из+SMS+или+Email+2ФА+рекавери',
                switchMethod: 'Клик+на+кнопку+сменить+способ+подтверждения',
                save: 'Клик+на+кнопку+подтверждения+из+мобильного+приложения',
                pswdBtn: 'Сабмит+нового+пароля',
              
              },
              buttonIdps: {
                regEnter: 'Клик+на+кнопку+Нет+учетной+записи',
                recoveryEnter: 'Клик+на+кнопку+Не+помню+пароль',
                btnBind: 'Клик+на+кнопку+Продолжить',
                toReg: 'Клик+на+кнопку+У+меня+нет+записи',
              },
            },
            replace: {
              agree: "Открыт+экран+запоминания+устройства",
            },
            prefix: {
              baseAutoName: "2fa",
              methods: "Открыта+форма+входа+по",
              methods2: "Открыта+форма+подтверждения+по",
              endRecoveryScreen: "Открыта+форма+нового+пароля+для+учетной+записи",
            },
        
          },
        };


         class GeneratorMosID {
           // STATS_GIF_URL: string;
           // mosId: string;
           // cookie: string;
           // regexpa: RegExp;
           // msg: string;
           // _name: string;

           constructor() {
             this.STATS_GIF_URL = "https://stats.mos.ru/eds.gif?o=";
             this.mosId = '';
             this.cookie = '';
             this.regexpa = new RegExp(/(?:(?:^|.*;\s*)mos_id\s*=\s*([^;]*).*$)|^.*$/);
             this.msg = 'after fetch data, remote server returned another status';
             this._name = this.constructor.name;
           }

           getTimestamp() {
             return Math.round(Date.now() / 1000);
           }
           replaceCookie() {
             if (document.cookie) return document.cookie.replace(this.regexpa, '$1');
             return undefined;
           }
           getMosId() {
             return this.replaceCookie() ? this.replaceCookie() : this.mosId;
           }
           convertDataToSendable({ eventObject = {} } = {}) {
             const config = {
               eventType: 'sudir',
               eventSrc: 'mos.ru',
               eventDst: 'stats',
               mosId: this.getMosId(),
               eventTime: this.getTimestamp(),
               eventObject,
             };

             return encodeURIComponent(JSON.stringify(config));
           }

           throwErr(message = '') {
             if (message && message.length && message.length <= 0) throw new Error("unknown error");
             throw new Error(message);
           }

           async getResponse({ url = '' } = {}) {
             try {
               if (!url) this.throwErr('empty url');

               const data = await fetch(url, { method: 'GET', mode: 'cors' });

               if (data.status !== 200) throw new Error(this.msg);

               return data.status;
             } catch (error) {
               console.warn(`[LOG] error`, `<${typeof error}>`, String(error));
             }
           }

           go({ eventObject = {} } = {}) {
             try {
               const message = `${this._name} <- eventObject is empty`;
               if (!eventObject) this.throwErr(message);

               const dataToSend = this.convertDataToSendable({ eventObject });

               return this.getResponse({ url: `${this.STATS_GIF_URL}${dataToSend}` });
             } catch (error) {
               console.error(error);
               return error;
             }
           }
         }

         // ------------- OPTIONAL -------------

         const executePageName = ({ f, statsPageUrl }) => {
           if (!f) return false;
          
           const _listPage = Object.entries(statsPageUrl);

           if (_listPage && _listPage.length && _listPage.length > 0) {
              const [pageName] = _listPage.find(([_, _value]) => _value === f.eventPage)
              return pageName;
           }
           return [undefined];
         };

         const testSplitText = ({ text, _split = '.' }) => {
           if (text) {
             const result = text.slice(0, 120).split(_split, 3).slice(0, -1).join('. ');

             return result.includes('  ') ? result.replaceAll('  ', ' ') : result;
           }
         };

         const isArrayInArray = (list) => {
           if (!Array.isArray(list) || list.length === 0) return false;

           const secondFilter = list
             .filter((f) => !Number.isNaN(f))
             .filter(Boolean)
             .filter((f) => Array.isArray(f))
             .filter((f) => f.some(Boolean));

           return secondFilter.length > 0 ? true : false;
         };

         const executeTextError = (selector) => {
           const deepParagraph = selector.querySelector('p');
           
           const _boolChild = !deepParagraph && selector && selector.tagName === 'P';
           const child = _boolChild ? selector : deepParagraph;

           if (child && child.textContent && child.textContent.length > 0) {
             const text = child.textContent.trim();
             const firstTest = testSplitText({ text });
             
             const _boolError = firstTest && firstTest.length && firstTest.length > 0;
             const errorLayout =  _boolError ? firstTest : testSplitText({ text, _split: ',' });

             const bool = !(errorLayout && errorLayout.length && errorLayout.length > 0 || 0);
             if (bool) return text.slice(0, 120).split('.', 3).join('. ');

             return errorLayout;
           }
         };
         const autoListVisit = ({ list = [], statsPageUrl }) => {
           if (!isArrayInArray(list)) return;
          
           if (statsPageUrl) {
              return [...list].map(([_key, _value]) => ({ eventPage: statsPageUrl[_key], eventTrigger: _value }));
           }
         };

         const autoListClick = ({ list = [], eventPage = 'unknown' } = {}) => {
           if (!Array.isArray(list)) return;

           return [...list].map((f) => ({ eventPage, eventTrigger: f }));
         };

         // ------------ CONFIG ------------
         const listVisit = ({ statsTrigger, statsPageUrl }) => [
           ...autoListVisit({ list: Object.entries(statsTrigger.visit), statsPageUrl }),
         ];

         const listClick = ({ statsPageUrl, statsTrigger }) => [
           ...autoListClick({
             eventPage: statsPageUrl.loginEverywhere,
             list: [statsTrigger.click.buttonEverywhere.oldStyle],
           }),
           ...autoListClick({
             eventPage: statsPageUrl.loginMethodDeepTwo,
             list: Object.values(statsTrigger.click.buttonDeepTwo),
           }),
           ...autoListClick({ eventPage: statsPageUrl.loginMethodDeep, list: Object.values(statsTrigger.click.buttonDeep) }),
           ...autoListClick({ eventPage: statsPageUrl.loginMethod, list: Object.values(statsTrigger.click.button) }),
           ...autoListClick({ eventPage: statsPageUrl.loginReg, list: Object.values(statsTrigger.click.buttonReg) }),
           ...autoListClick({ eventPage: statsPageUrl.recovery, list: Object.values(statsTrigger.click.buttonRecovery) }),
           ...autoListClick({ eventPage: statsPageUrl.externalIdps, list: Object.values(statsTrigger.click.buttonIdps) }),
         ];

         // ------------ CONFIG_END ------------

         const boolErrorHasText = (listProblemTargets) => {
          //  console.log(`[LOG] listProblemTargets`, `<${typeof listProblemTargets}>`, listProblemTargets)
          if (!listProblemTargets) return false;
          
          return [...listProblemTargets]
               .filter((f) => document.querySelector(f) && document.querySelector(f).offsetParent !== null)
               .map((f) => document.querySelector(f) && document.querySelector(f).textContent.trim())
               .some(Boolean);
         };

         const builderErrorMessage = ({ list, pageName }) => {
           for (const f of list) {
             // console.log(`[warningLOG] f`, `<${typeof f}>`, f)

             const target = document.querySelector(f);
             if (target && target.offsetParent && target.offsetParent === null) return;

             const selector = document.querySelector(f);
             if (selector) {
               const warning = executeTextError(selector);
               if (typeof warning === "undefined") return { info: "warning, parser catch undefined result!" };
               const trackCaptcha = document.querySelector(secretCaptcha);

               return warning
                 ? {
                     log: {
                       dsgn_type: statsCode,
                       user: Object.assign(
                         {
                           warning,
                           pageName: `${globalPageInfo.visit} page_${pageName}`,
                         },
                         trackCaptcha ? { usedCaptcha: true } : {}
                       ),
                     },
                   }
                 : { info: "exception, probable error reaches length limit?!" };
             }
           }
         };

         const totalErrorObject = ({ pageName }) => {
           const listProblemTargets = [
             "#errBlock",
             "#gErrs",
             ".blockquote-danger",
             ".text-danger",
             ".mimic-text-danger",
             //
           ];
           //  console.log(`[LOG] listProblemTargets`, `<${typeof listProblemTargets}>`, listProblemTargets)

           const listHasError = boolErrorHasText(listProblemTargets);
           // console.log(`[LOG] listHasError`, `<${typeof listHasError}>`, listHasError)
           if (listHasError) return builderErrorMessage({ list: listProblemTargets, pageName });
         };

         // ------------- OPTIONAL__END -------------

         // ------------- HANDLER -------------
         const handlerClick = (event, { f, UseMosId, statsPageUrl }) => {
           if (!f) return false;

           const target = event.target;
           const pageName = executePageName({ f, statsPageUrl });


           const button = {
             tag: (target && target.tagName) ? target.tagName.trim() : 'unknownTag',
             id: (target && target.getAttribute('id')) ? `id_${target.getAttribute('id').trim()}` : '',
             txt: (target && target.textContent) ? `text_${target.textContent.trim()}` : '',
           };

            
           
           /**
            * [LOG] usedMethodDeep <string> methods2
            * [LOG] usedMethodType <string> sms
            * trigger: PUSH
            * */
           const selectorPush = document.querySelector('#stats-trigger-pagepush');
           
           const result = {
             log: {
               dsgn_type: statsCode,
               user: Object.assign(
                 {
                   action: selectorPush ? f.eventTrigger.replace('sms', 'Push') : f.eventTrigger,
                   pageName: `${globalPageInfo.visit} page_${pageName}`,
                   trigger: `${globalPageInfo.click} ${button.tag} ${button.id} ${button.txt}`,
                  },
                  document.querySelector(secretCaptcha) ? { usedCaptcha: true } : {}
                  ),
                },
              };
              
          return UseMosId.go({ eventObject: result });
         };

         // ------------- HANDLER__END -------------


         // ------------- MO -------------
         /**
          * CONTINUE_MUTATION CONTINUE_MUTATION CONTINUE_MUTATION
          * TODO - Registration code */
         const continueMutation = ({UseMosId, MutationRecord, currentText }) => {
           if (bufferMessage !== currentText) {
             bufferMessage = currentText;
             // console.log(`🟢[STATS SEND!] currentText`, `<${typeof currentText}>`, currentText);
             const eventObject = UseSingleStats.goWarning({ ...globalConfig, messageWarning: currentText });

             return UseMosId.go({ eventObject });
           } 
           // else {
           //   console.log("🔴[STATS ABORT!]", false); 
           // }
         };

         const triggerOnce = ({ UseMosId, pageRegDictionary }) => {
           pageFlagEmail = false;
           const eventObject = UseSingleStats.goVisit({ ...globalConfig, action: pageRegDictionary.visit.email });

           return UseMosId.go({ eventObject });
         };

         const createMutationObserver = ({ UseMosId, pageRegDictionary }) => {
           const MO = new MutationObserver((mutationsList) => {
             if (Array.isArray(mutationsList) && mutationsList.some(Boolean)) {

               /**
                * try ignore oClock in verify pages
                * */
               const MutationRecordIgnored = mutationsList
                      .filter((f) => f.target.id !== 'timeLeft')
                      .filter((f) => {
                        return f.target && f.target.getAttributeNames() 
                          ? !f.target.getAttributeNames().includes("data-js")
                          : undefined;
                       });
               
              //  console.log(`[LOG] mutationsList`, `<${typeof mutationsList}>`, mutationsList)
              //  console.log(`[LOG] MutationRecordIgnored`, `<${typeof MutationRecordIgnored}>`, MutationRecordIgnored)
               
               if (MutationRecordIgnored && MutationRecordIgnored.length > 0) {
                 const MutationRecord = MutationRecordIgnored;

                 const MutationRecordBoolean = MutationRecord.filter((f) => [...f.addedNodes].some(Boolean));
                 const MutationElement = MutationRecordBoolean.map(({ target, addedNodes }) => ({ target, addedNodes }));

                 const MutationRecordSecret = MutationElement
                        .filter((f) => f.target.nodeName !== "#text")
                        .find((f) => {
                            return f.target.querySelector('#page-registration-email-tracker');
                         });

                 if (pageFlagEmail && Boolean(MutationRecordSecret)) triggerOnce({ UseMosId, pageRegDictionary });

                 // console.log(`[LOG] MutationRecord`, `<${typeof MutationRecord}>`, MutationRecord)
                 const trackErrors = MutationRecord
                        .filter((f) => f.target.tagName === 'SPAN')
                        .filter((f) => {
                            return f.target.id.includes('parsley') 
                            || f.target.className.includes('parsley');
                         }); 



               const [preListMutations] = MutationRecord.filter((f) => f.target.className.includes("has-error"));
               // console.log(`[LOG] preListMutations`, `<${typeof preListMutations}>`, preListMutations)
                 if (preListMutations) {
                   const list = [...preListMutations.target.children];

                   const _find = (f) => {
                     return f.className === "help-block filled" 
                      && f.tagName === "SPAN" 
                      && f.id.length === 0;
                   };

                   const result = list.find(f => _find(f));
                   
                   const optionalError = result && result.textContent ? result.textContent : '';
                   // console.log(`[LOG] optionalError`, `<${typeof optionalError}>`, optionalError)
                   if (optionalError) {
                     return continueMutation({UseMosId, MutationRecord, currentText: optionalError });
                   }
                 }

               const [catchedError] = trackErrors.map(f => f.target);
                 if (catchedError && catchedError.textContent) {
                   const currentText = catchedError.textContent;

                   if (currentText) {
                     return continueMutation({UseMosId, MutationRecord, currentText });
                   }
                 }
               }
             }
           });

           try {
             const targetMutate = document.querySelector('[data-js="append-title-desc"]');

             if (targetMutate)
               MO.observe(targetMutate, {
                 attributes: false,
                 subtree: true,
                 childList: true,
                 characterData: false,
               });
           } catch (error) {
             console.log(`[LOG] error`, `<${typeof error}>`, error);
             MO.disconnect();
           }
         };



         // ------------- MO__END -------------

         class GeneratorSingleStats {
           // clearPageLocation: string;
           // targetInformation: Record<string, string>;
           // pageInfo: Record<string, string>;
           // pageLocation: string;
           // action: string;
           // version: number;
           // target?: HTMLDivElement;
           // secretCaptcha: string;
           // messageWarning: string;

           constructor() {
             this.target = undefined;
             this.targetInformation = {};
             this.pageInfo = {};
             this.pageLocation = '';
             this.action = '';
             this.version = statsCode;
             this.clearPageLocation = '';
             this.secretCaptcha = '[name="captcha_answer"]';
             this.messageWarning = "unknown";
           }

           getInformation() {
             this.targetInformation = {
               tag: (this.target && this.target.tagName) ? this.target.tagName.trim() : 'unknownTag',
               id: (this.target && this.target.getAttribute('id')) ? `id_${this.target.getAttribute('id').trim()}` : '',
               txt: (this.target && this.target.textContent) ? `text_${this.target.textContent.trim().replaceAll(' ', '_')}` : '',
             };
           }

           convertPageLocation() {
             const _name = String(this.pageLocation);

             if (_name) {
               const _url = _name.trim().split('/').filter(Boolean).slice(1);

               const convertMe = (list) => {
                 return list.reduce((accumulator, f, dex) => {
                   if (!f || !accumulator) return (accumulator = '');
                   
                   accumulator += `${f[0].toUpperCase()}${f.slice(1)}`;
                   
                   return accumulator;
                 });
               };
               this.clearPageLocation = _url && _url.length > 0 ? convertMe(_url) : '';
             }
           }

           queryCaptcha() {
             return document.querySelector(this.secretCaptcha) 
              ? { usedCaptcha: true } 
              : {};
           }

           assignObject(enterConfig) {
             return {
               log: {
                 dsgn_type: this.version,
                 user: Object.assign(enterConfig, this.queryCaptcha()),
               },
             };
           }

           buildFormLogClick() {
             return this.assignObject({
               action: this.action,
               pageName: `${this.pageInfo.visit} page_${this.clearPageLocation}`,
               trigger: `${this.pageInfo.click} ${this.targetInformation.tag} ${this.targetInformation.id} ${this.targetInformation.txt}`,
             });
           }

           buildFormLogVisit() {
             return this.assignObject({
               action: this.action,
               pageName: `${this.pageInfo.visit} page_${this.clearPageLocation}`,
             });
           }

           buildFormLogWarning() {
             return this.assignObject({
               warning: this.messageWarning,
               pageName: `${this.pageInfo.visit} page_${this.clearPageLocation}`,
             });
           }


           layerRunner({ target, action, messageWarning, globalPageInfo, globalPageLocation }) {
             this.messageWarning = messageWarning ? messageWarning : '';
             this.target = target;
             this.action = action ? action : '';
             this.pageInfo = globalPageInfo;
             this.pageLocation = globalPageLocation;

             this.convertPageLocation();
             this.getInformation();
           }

           goClick({ target, action, globalPageInfo, globalPageLocation }) {
             this.layerRunner({ target, action, globalPageInfo, globalPageLocation });

             return this.buildFormLogClick();
           }

           goVisit({ target, action, globalPageInfo, globalPageLocation }) {
             this.layerRunner({ target, action, globalPageInfo, globalPageLocation });

             return this.buildFormLogVisit();
           }
           goWarning({ target, messageWarning, globalPageInfo, globalPageLocation }) {
             this.layerRunner({ target, messageWarning, globalPageInfo, globalPageLocation });

             return this.buildFormLogWarning();
           }
         };

         const UseSingleStats = new GeneratorSingleStats();
         const isMyPage = (arr = []) => arr.every(f => document.querySelector(f));

         // VISIT
         const pageControlVisit = ({ UseMosId, pageRegDictionary }) => {
           if (isMyPage(["BUTTON", "#regBtn"])) {
             const eventObject = UseSingleStats.goVisit({ 
               ...globalConfig, action: pageRegDictionary.visit.main,
             });

             return UseMosId.go({ eventObject });
           }


           const smsTracker = document.querySelector('#page-registration-sms-tracker');
           if (smsTracker && isMyPage(["BUTTON", "#confirm"])) {
             const eventObject = UseSingleStats.goVisit({ 
               ...globalConfig, action: pageRegDictionary.visit.sms,
             });

             return UseMosId.go({ eventObject });
           }
         };

         // CLICK_PATTERN
         const pageControlClickPattern = (
            { UseMosId, pageRegDictionary },
            { target, targetExtra, targetTag, targetID, targetDictionary, }
          ) => {
            // DEBUG 
          //  console.log(`[LOG] target`, `<${typeof target}>`, target)
          //  console.log(`[LOG] targetExtra`, `<${typeof targetExtra}>`, targetExtra)
          //  console.log(`[LOG] targetTag`, `<${typeof targetTag}>`, targetTag)
          //  console.log(`[LOG] targetID`, `<${typeof targetID}>`, targetID)
          //  console.log(`[LOG] targetDictionary`, `<${typeof targetDictionary}>`, targetDictionary)

           const executeProperty = ({ mainObj, targetString }) => {
             if (mainObj && targetString) {
               return String(targetString)
                .split(".")
                .reduce((acc, g) => acc[g], mainObj);
             }
           };

           const runStats = (listBoolean) => {
            //  console.log(`[LOG] listBoolean`, `<${typeof listBoolean}>`, listBoolean)
             if (listBoolean.length > 0 && listBoolean.every(Boolean)) {

               const sharedConfig = { 
                 target,
                 action: executeProperty({
                   mainObj: pageRegDictionary,
                   targetString: targetDictionary,
                 }),
                 ...globalConfig,
               };

               const eventObject = UseSingleStats.goClick(sharedConfig);
              //  console.log(`[LOG] sharedConfig`, `<${typeof sharedConfig}>`, sharedConfig)

               return UseMosId.go({ eventObject });
             }
           };

           const A = () => {
             const selectorExtra = document.querySelector(targetExtra);
             if (selectorExtra) {
               const listBoolean = [
                 selectorExtra,
                 target,
                 target.tagName === targetTag,
                 target.id === targetID,
               ];

               return runStats(listBoolean);
             }

           };

           const B = () => {
             const listBoolean = [
               target,
               target.tagName === targetTag,
               target.id === targetID,
              ];

             return runStats(listBoolean);
           };


           return Boolean(targetExtra) ? A() : B();
         };

         // CLICK
         const pageControlClick = ({ UseMosId, pageRegDictionary }) => {
          
           const pageControlLoop = (event) => {
            const target = event.target;
            
             /**
              * leave page button: "Войти"
              * to find it, search: selector.id = "login-link-href";
              * */

              const listControlClickDefault = {
                targetTag: "BUTTON",
                targetID: "confirm",
                targetExtra: "",
                targetDictionary: "",
              };
              
             const listControlClick = [
               {
                 targetID: "regBtn",
                 targetDictionary: "click.button.main",
               },
               {
                 targetTag: "A",
                 targetID: "login-link-href",
                 targetDictionary: "click.button.loginLink",
               },
               {
                 targetID: "confirm",
                 targetExtra: "#page-registration-sms-tracker",
                 targetDictionary: "click.button.sms",
               },
               {
                 targetID: "confirm",
                 targetExtra: "#page-registration-email-tracker",
                 targetDictionary: "click.button.email",
               },
             ];
             
             const nextStep = ({item, target, UseMosId, pageRegDictionary }) => {
                const preConf = { UseMosId, pageRegDictionary };
                const afterConf = Object.assign({ target }, item);

                return pageControlClickPattern(preConf, afterConf);
             }
             
             for (const f of listControlClick) {
                const item = {...listControlClickDefault, ...f};
                
                if (f.targetExtra && document.querySelector(f.targetExtra)) {
                   return nextStep({item, target, UseMosId, pageRegDictionary });
                } 
                
                if (!f.targetExtra && target.id === f.targetID) {
                  return nextStep({item, target, UseMosId, pageRegDictionary });
                }
                
              // return false;
             }
           };

           const selector = document.querySelector('#reg-content');
           if (selector) {
             selector.addEventListener('click', (event) => pageControlLoop(event));
           }
         };

         const attachHandlers = ({ UseMosId, pageRegDictionary }) => {
           /**
            * Page :: Registration
            * */
           console.log("[errorTracker]", true); 
           pageControlClick({ UseMosId, pageRegDictionary });
           pageControlVisit({ UseMosId, pageRegDictionary });
         };


         const endRecoveryScreenTracker = ({prefix, usedMethodDeep}) => {           
           const listEndScreen = ["#repeatPswd", "#pswd"];
           const _boolEndScreen = listEndScreen.every(f => document.querySelector(f));

           if (usedMethodDeep && usedMethodDeep === "methods2" && _boolEndScreen) {
             return `${prefix.endRecoveryScreen}`;
           }

           return false;
         }; 

         /* CONTINUE_MUTATION*/          
         const generateAutoActionName = ({ name }) => {
           const url = globalPageLocation;
           const accessPool = ['methods', 'methods2'];
           const hasUrl = accessPool.some((f) => String(url).includes(`${f}/`));


           const blackList = ['password'];
           const prefix = {
             baseAutoName: SDT.stats.prefix.baseAutoName,
             methods: SDT.stats.prefix.methods,
             methods2: SDT.stats.prefix.methods2,
             endRecoveryScreen: SDT.stats.prefix.endRecoveryScreen,
             _push: "Push",
           };

           if (hasUrl) {
             const testArray = url.split('/').filter(Boolean);
             if (!testArray) return name;

             const usedMethodDeep = testArray[2]; // <- глубина метода
             const usedMethodType = testArray[3]; // <- тип метода
             const usedMethodLaste = testArray.at(-1); // <- последний елемент массива

             if (!usedMethodType || !usedMethodDeep) return name;
             if (blackList.includes(usedMethodType)) return name;

             // <- попытка определить последний экран и прервать операцию
             const forceEndRecoveryScreen = endRecoveryScreenTracker({prefix, usedMethodDeep});
             if (forceEndRecoveryScreen) return forceEndRecoveryScreen;

             const nameMethod = accessPool.some((f) => usedMethodDeep === String(f));
             const _bool = Boolean(testArray && nameMethod);
             
             /**
              * Mutate result!
              * HACK split sms page, to both SMS and PUSH
              * */
             let result = _bool ? usedMethodType : prefix.baseAutoName; 

             /**
              * [LOG] usedMethodDeep <string> methods2
              * [LOG] usedMethodType <string> sms
              * trigger: PUSH
              * */
             const selectorPush = document.querySelector('#stats-trigger-pagepush');
             if (selectorPush) {
               result = prefix._push;
             }
             
             /**
              * [LOG] usedMethodDeep <string> methods
              * [LOG] usedMethodType <string> sms
              * [LOG] usedMethodLaste <string> resend
              * trigger: SMS
              * */
             if (usedMethodType === 'sms' && usedMethodLaste === 'resend') {
               result = usedMethodType;
             }
             /**             END            */
             
             return `${prefix[usedMethodDeep]}+${result}`;
           }
           return name;
         };


         const semiLayerRules = ({ text }) => {
           const listEvery = (list) => {
             if (Array.isArray(list) && list && list.length > 0) {
               return list.every((f) => document.querySelector(f));
             }
           };

           /**
            * RULE1
            * page agree rules on url : login/method/sms
            * */

           if (listEvery(['#agree', '#disagree'])) {
             return SDT.stats.replace.agree;
           }

           return text;
         };

         const semiLayerTextReplacement = ({ name }) => {
           const getText = generateAutoActionName({ name });

           return semiLayerRules({ text: getText });
         };

         const runner = {
           visitGenerator({ UseMosId, statsTrigger, statsPageUrl }) {
             const list = listVisit({ statsPageUrl, statsTrigger }).filter((f) => {
               return String(globalPageLocation).includes(f.eventPage);
             });
            //  console.log(`[LOG] list`, `<${typeof list}>`, list)

             if (Array.isArray(list) && list.length === 0) return false;

             const [listVisitClean] = list.map((f) => {
               if (!f) return false;

               const pageName = executePageName({ f, statsPageUrl });
               const trackCaptcha = document.querySelector(secretCaptcha);
               return {
                 log: {
                   dsgn_type: statsCode,
                   user: Object.assign(
                     {
                       action: semiLayerTextReplacement({ name: f.eventTrigger }),
                       pageName: `${globalPageInfo.visit} page_${pageName}`,
                     },
                     trackCaptcha ? { usedCaptcha: true } : {}
                   ),
                 },
               };
             });

             UseMosId.go({ eventObject: listVisitClean });
           },

           clickGenerator({ UseMosId, dictionary, statsPageUrl, statsTrigger }) {
             const list = listClick({ statsPageUrl, statsTrigger }).filter((f) => {
               return String(globalPageLocation).includes(f.eventPage);
             });

             if (Array.isArray(list) && list.length === 0) return false;

             for (const f of list) {
               if (!f || !dictionary[f.eventTrigger]) return false;
               const target = document.querySelector(dictionary[f.eventTrigger]);

               /**
                * logic information see in handlerClick();
                * */
               if (target) target.addEventListener('click', (event) => {
                 return handlerClick(event, { f, UseMosId, statsPageUrl });
               });
             }
           },
           
           errorGenerator({ UseMosId, statsPageUrl, statsTrigger }) {
             const list = listVisit({ statsPageUrl, statsTrigger }).filter((f) => {
               return String(globalPageLocation).includes(f.eventPage);
             });
             //  console.log(`[errorGeneratorLOG] list`, `<${typeof list}>`, list)
             if (Array.isArray(list) && list.length === 0) return false;

             const [listVisitClean] = list.map((f) => {
               if (!f) return false;

               const pageName = executePageName({ f, statsPageUrl });
               //  console.log(`[totalErrorObjectLOG] pageName`, `<${typeof pageName}>`, pageName)
               return totalErrorObject({ pageName });
             });

             if (listVisitClean) UseMosId.go({ eventObject: listVisitClean });
           },

           createMutation({ UseMosId, statsTrigger, statsPageUrl }) {
             const pageRegDictionary = {
               visit: {
                 main: SDT.mutation.visit.main,
                 sms: SDT.mutation.visit.sms,
                 email: SDT.mutation.visit.email,
               },
               click: {
                 button: {
                   main: SDT.mutation.click.button.main,
                   sms: SDT.mutation.click.button.sms,
                   email: SDT.mutation.click.button.email,
                   loginLink: SDT.mutation.click.button.loginLink,
                 },
               },
             };

             // createMonitoring();
             createMutationObserver({ UseMosId, pageRegDictionary });
             setTimeout(() => attachHandlers({ UseMosId, pageRegDictionary }), Number(1000 / 3));
           },
         };

         /**
          * ---------------------------------------------
          * wrapperInitialization
          * preloader list
          */
         const wrapperInitialization = () => {
           const hasEmailTracker = Boolean(document.querySelector('#page-recovery-email-tracker'));

           const extraDictionary = {
             SMS: SDT.extra.SMS,
             EMAIL: SDT.extra.EMAIL,
           };

           const statsPagesName = {
             loginEverywhere: "loginEverywhere",
             loginMethodPassword: "loginMethodPassword",
             loginMethodDeepTwo: "loginMethodDeepTwo",
             loginMethodDeep: "loginMethodDeep",
             loginMethod: "loginMethod",
             recoveryNewPswd: "recoveryNewPswd",
             recoveryMethodsTwo: "recoveryMethodsTwo",
             recoveryMethods: "recoveryMethods",
             recoveryStart: "recoveryStart",
             recovery: "recovery",
             externalIdps: "externalIdps",
           };

           const statsPageUrl = {
             [statsPagesName.loginEverywhere]: "/login",
             [statsPagesName.loginMethodPassword]: "/login/methods/password",
             [statsPagesName.loginMethodDeepTwo]: "/login/methods2/",
             [statsPagesName.loginMethodDeep]: "/login/methods/",
             [statsPagesName.loginMethod]: "/login/methods",
             [statsPagesName.recoveryNewPswd]: "/recovery/pswd",
             [statsPagesName.recoveryMethodsTwo]: "/recovery/methods2/",
             [statsPagesName.recoveryMethods]: "/recovery/methods",
             [statsPagesName.recoveryStart]: "/recovery/start",
             [statsPagesName.recovery]: "/recovery",
             [statsPagesName.externalIdps]: "/login/externalIdps",
           };

           const statsTrigger = {
             visit: {
               [statsPagesName.loginMethodPassword]: SDT.stats.visit.loginMethodPassword,
               [statsPagesName.loginMethodDeepTwo]: SDT.stats.visit.loginMethodDeepTwo,
               [statsPagesName.loginMethodDeep]: SDT.stats.visit.loginMethodDeep,
               [statsPagesName.loginMethod]: SDT.stats.visit.loginMethod,
               [statsPagesName.recoveryNewPswd]: SDT.stats.visit.recoveryNewPswd,
               [statsPagesName.recoveryMethodsTwo]: SDT.stats.visit.recoveryMethodsTwo,
               [statsPagesName.recoveryMethods]: SDT.stats.visit.recoveryMethods,
               [statsPagesName.recoveryStart]: SDT.stats.visit.recoveryStart,
               [statsPagesName.recovery]: SDT.stats.visit.recovery,
               [statsPagesName.externalIdps]: SDT.stats.visit.externalIdps,
             },
             click: {
               button: {
                 loginFm: SDT.stats.click.button.loginFm,
                 esia: SDT.stats.click.button.esia,
                 sbrf: SDT.stats.click.button.sbrf,
                 tcs: SDT.stats.click.button.tcs,
                 x509: SDT.stats.click.button.x509,
                 notMe: SDT.stats.click.button.notMe,
                 notMe2: SDT.stats.click.button.notMe2,

                 socialYa: SDT.stats.click.button.socialYa,
                 socialMail: SDT.stats.click.button.socialMail,
                 socialVK: SDT.stats.click.button.socialVK,
                 socialOK: SDT.stats.click.button.socialOK,
                 socialApple: SDT.stats.click.button.socialApple,
                 socialGoogle: SDT.stats.click.button.socialGoogle,
                 socialFB: SDT.stats.click.button.socialFB,
                 socialDots: SDT.stats.click.button.socialDots,
                 socialDots2fa: SDT.stats.click.button.socialDots2fa,

                 webAuthn: SDT.stats.click.button.webAuthn,
                 sms: SDT.stats.click.button.sms,
                 qrCode: SDT.stats.click.button.qrCode,
                 regEnter: SDT.stats.click.button.regEnter,
                 recoveryEnter: SDT.stats.click.button.recoveryEnter,

                 empty: SDT.stats.click.button.empty,
               },

               buttonEverywhere: {
                 oldStyle: SDT.stats.click.buttonEverywhere.oldStyle,
               },
               buttonDeepTwo: {
                 methodTotp: SDT.stats.click.buttonDeepTwo.methodTotp,
                 methodSms: SDT.stats.click.buttonDeepTwo.methodSms,
                 methodEmail: SDT.stats.click.buttonDeepTwo.methodEmail,
                 methodWebAuthn: SDT.stats.click.buttonDeepTwo.methodWebAuthn,
               },
               buttonDeep: {
                 methodOther: SDT.stats.click.buttonDeep.methodOther,
                 methodEnter: SDT.stats.click.buttonDeep.methodEnter,

                 methodTotp: SDT.stats.click.buttonDeep.methodTotp,
                 methodSms: SDT.stats.click.buttonDeep.methodSms,
                 methodEmail: SDT.stats.click.buttonDeep.methodEmail,
                 methodWebAuthn: SDT.stats.click.buttonDeep.methodWebAuthn,

                 agree: SDT.stats.click.buttonDeep.agree,
                 disagree: SDT.stats.click.buttonDeep.disagree,
               },

               buttonReg: {
                 submit: SDT.stats.click.buttonReg.submit,
                 loginLink: SDT.stats.click.buttonReg.loginLink,
               },
               buttonRecovery: {
                 cfmBtn: hasEmailTracker ? extraDictionary.EMAIL : extraDictionary.SMS,
                 startBtn: SDT.stats.click.buttonRecovery.startBtn,
                 loginLink: SDT.stats.click.buttonRecovery.loginLink,
                 verifyBtn: SDT.stats.click.buttonRecovery.verifyBtn,
                 switchMethod: SDT.stats.click.buttonRecovery.switchMethod,
                 save: SDT.stats.click.buttonRecovery.save,
                 pswdBtn: SDT.stats.click.buttonRecovery.pswdBtn,
               },
               buttonIdps: {
                 regEnter: SDT.stats.click.buttonIdps.regEnter,
                 recoveryEnter: SDT.stats.click.buttonIdps.recoveryEnter,
                 btnBind: SDT.stats.click.buttonIdps.btnBind,
                 toReg: SDT.stats.click.buttonIdps.toReg,
               },
             },
           };

           const dictionaryIdps = {
             [statsTrigger.click.buttonIdps.regEnter]: '#regEnter',
             [statsTrigger.click.buttonIdps.recoveryEnter]: '#recoveryEnter',
             [statsTrigger.click.buttonIdps.btnBind]: '#bind',
             [statsTrigger.click.buttonIdps.toReg]: '#toReg',
           };

           const dictionaryRecovery = {
             [statsTrigger.click.buttonRecovery.loginLink]: '#login-link',
             [statsTrigger.click.buttonRecovery.startBtn]: '#startBtn',
             [statsTrigger.click.buttonRecovery.cfmBtn]: '#cfmBtn',
             [statsTrigger.click.buttonRecovery.verifyBtn]: '#verifyBtn',
             [statsTrigger.click.buttonRecovery.switchMethod]: '.recoveryOptional__button',
             [statsTrigger.click.buttonRecovery.save]: '#save',
             [statsTrigger.click.buttonRecovery.pswdBtn]: '#pswdBtn',
           };

           const dictionaryMain = {
             [statsTrigger.click.button.loginFm]: '#pswdMethod-c #loginFm #bind',
             [statsTrigger.click.button.regEnter]: '#regEnter a[href]',
             [statsTrigger.click.button.recoveryEnter]: '#recoveryEnter a[href]',

             [statsTrigger.click.button.esia]: '[data-method^="externalIdps:esia"]',
             [statsTrigger.click.button.sbrf]: '[data-method^="externalIdps:sbrf"]',
             [statsTrigger.click.button.tcs]: '[data-method^="externalIdps:tcs"]',
             [statsTrigger.click.button.x509]: '[data-method="x509"]',
             [statsTrigger.click.button.notMe]: '#other-user button',
             [statsTrigger.click.button.notMe2]: '#loginDv button',

             [statsTrigger.click.button.socialYa]: '[data-method^="externalIdps:yandex"]',
             [statsTrigger.click.button.socialMail]: '[data-method^="externalIdps:mail"]',
             [statsTrigger.click.button.socialVK]: '[data-method^="externalIdps:vk"]',
             [statsTrigger.click.button.socialOK]: '[data-method^="externalIdps:ok"]',
             [statsTrigger.click.button.socialApple]: '[data-method^="externalIdps:apple"]',
             [statsTrigger.click.button.socialGoogle]: '[data-method^="externalIdps:google"]',
             [statsTrigger.click.button.socialFB]: '[data-method^="externalIdps:facebook"]',
             [statsTrigger.click.button.socialDots]: '[data-js="dots-toggle"]',
             [statsTrigger.click.button.socialDots2fa]: '[data-js="twofa-toggle-dots"]',

             [statsTrigger.click.button.webAuthn]: '[data-method="webAuthn"]',
             [statsTrigger.click.button.sms]: '[data-method="sms"]',
             [statsTrigger.click.button.qrCode]: '[data-method="qrCode"]',
           };

           const dictionaryDeepTwo = {
             [statsTrigger.click.buttonDeepTwo.methodTotp]: '#htotpFm #save',
             [statsTrigger.click.buttonDeepTwo.methodSms]: 'form[action*="/sms"] #verifyBtn',
             [statsTrigger.click.buttonDeepTwo.methodEmail]: 'form[action*="/email"] #verifyBtn',
             [statsTrigger.click.buttonDeepTwo.methodWebAuthn]: '#webAuthnMethod-c #goBtn',
           };
           const dictionaryDeep = {
             [statsTrigger.click.buttonDeep.methodOther]: '#showOtherMethodsBtn',
             [statsTrigger.click.buttonDeep.methodEnter]: '#loginFm .form-login__submit:not(#bind)',

             [statsTrigger.click.buttonDeep.methodTotp]: '#htotpFm #save',
             [statsTrigger.click.buttonDeep.methodSms]: 'form[action*="/sms"] #verifyBtn',
             [statsTrigger.click.buttonDeep.methodEmail]: 'form[action*="/email"] #verifyBtn',
             [statsTrigger.click.buttonDeep.methodWebAuthn]: '#webAuthnMethod-c #goBtn',

             [statsTrigger.click.buttonDeep.agree]: '#agree',
             [statsTrigger.click.buttonDeep.disagree]: '#disagree',
           };

           const dictionary = {
             ...dictionaryMain,
             ...dictionaryIdps,
             ...dictionaryRecovery,
             ...dictionaryDeepTwo,
             ...dictionaryDeep,

             [statsTrigger.click.buttonReg.submit]: '[data-js="agreement-toggle-submit-buttont"]',
             [statsTrigger.click.buttonReg.loginLink]: '#login-link',

             [statsTrigger.click.buttonEverywhere.oldStyle]: '#back-to-old-style',
             [statsTrigger.click.button.empty]: '',

             //
           };

           const UseMosId = new GeneratorMosID();

           // ------------ end_constructor ------------


           /**
            * MO to page Registration
            * codeDisabled - test
            * */
           const codeDisabled = false;
           if (globalPageLocation.includes("/reg") && !codeDisabled) {
             // console.log("[DEBUG]", "test");
             return runner.createMutation({ UseMosId, statsTrigger, statsPageUrl });
           }

           // visit Pages
           runner.visitGenerator({ UseMosId, statsTrigger, statsPageUrl });

           // click Buttons
           runner.clickGenerator({ UseMosId, statsPageUrl, statsTrigger, dictionary });

           // trigger Errors
           setTimeout(() => runner.errorGenerator({ UseMosId, statsPageUrl, statsTrigger }), Number(1000 / 4));


         };

         const run = () => setTimeout(() => wrapperInitialization(), 100);
         document.addEventListener("DOMContentLoaded", () => setTimeout(() => run(), 1000));
       })();
       
      </script>
      
  
    
    <script>console.log("[componentStatsPixel]", true); </script>
    
    
      <script>
        let msk_stat = 'M1';

        function statsMosRuCounter() {
          const element = document.querySelector('#statsmosru');
          if (!element) return true;
          const div = document.createElement('div');
          if (element.parentNode) element.parentNode.insertBefore(div, element);
          return true;
        }

        const optional = `https://stats.mos.ru/handler/handler.js?time=${Date.now()}`;

        const _SCRIPT = document.createElement('SCRIPT');
        _SCRIPT.setAttribute('src', optional);
        document.head.insertAdjacentElement('beforeend', _SCRIPT);
        // console.log("[SCALA]", "injected pixel"); 
      </script><script src="https://stats.mos.ru/handler/handler.js?time=1680522771152"></script>
    
  
    
    
    
    
   
          

    <script type="text/javascript">
        musMsgs=(function(u){var ms={'login.mus.inline.choose.other':'\u042D\u0442\u043E \u043D\u0435 \u044F','login.mus.inline.choose.user':'\u0417\u0430\u043F\u043E\u043C\u043D\u0435\u043D\u043D\u044B\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438'};return function(k){if(typeof k == "object"){for(var i=0;i<k.length&&ms[k[i]]!==u;i++);var m=ms[k[i]]||k[0]}else{m=((ms[k]!==u)?ms[k]:k)}for(i=1;i<arguments.length;i++){m=m.replace('{'+(i-1)+'}',arguments[i])}return m}})()
    </script>   
    
    <script data-main="/sps/login/assets/javascripts/passwordMethod.js" src="/sps/assets/blitz-common/ilib/requirejs/require.min.js"></script>
    
    <script type="text/javascript">
       var bfpDelayedFor = 0;
        msgs=(function(u){var ms={'error.failed_to_load_pOfw':'\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C \u043D\u0430 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0443 \u043B\u043E\u0433\u0438\u043D \u0438 \u043F\u0430\u0440\u043E\u043B\u044C. \u0412\u043E\u0437\u043C\u043E\u0436\u043D\u043E \u0437\u0430\u043F\u0440\u043E\u0441 \u0437\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u043D\u044B\u043C \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043D\u0438\u0435\u043C \u0438\u043B\u0438 \u0438\u043D\u044B\u043C \u043A\u043B\u0438\u0435\u043D\u0442\u0441\u043A\u0438\u043C \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u043D\u044B\u043C \u043E\u0431\u0435\u0441\u043F\u0435\u0447\u0435\u043D\u0438\u0435\u043C. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043E\u0442\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u043D\u044B\u0435 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043D\u0438\u044F \u0438\u043B\u0438 \u0432\u043D\u0435\u0441\u0442\u0438 \u0441\u0430\u0439\u0442 \u0432 \u0431\u0435\u043B\u044B\u0439 \u0441\u043F\u0438\u0441\u043E\u043A \u0438 \u043F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C \u0437\u0430\u043F\u0440\u043E\u0441','error.no_crypto_subtle':'\u041E\u0448\u0438\u0431\u043A\u0430 \u0432\u0445\u043E\u0434\u0430. \u041D\u0435 \u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E \u0440\u0430\u0441c\u0447\u0438\u0442\u0430\u0442\u044C \u043A\u043E\u0434 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0438. \u041E\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044C \u043A \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u0443.','login.methods.password.btn.wait':'\u041E\u0436\u0438\u0434\u0430\u0439\u0442\u0435','error.collision_not_found':'\u041E\u0448\u0438\u0431\u043A\u0430 \u0432\u0445\u043E\u0434\u0430. \u041A\u043E\u0434 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0438 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D. \u041E\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044C \u043A \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u0443.','login.methods.password.btn.login':'\u0412\u043E\u0439\u0442\u0438'};return function(k){if(typeof k == "object"){for(var i=0;i<k.length&&ms[k[i]]!==u;i++);var m=ms[k[i]]||k[0]}else{m=((ms[k]!==u)?ms[k]:k)}for(i=1;i<arguments.length;i++){m=m.replace('{'+(i-1)+'}',arguments[i])}return m}})()
    </script>
 

 
          
      <script>console.log("[webviewTrigger]", true); </script>
      
      
        <script>
          (() => {         
            const pageWebView = {
              title: 'Ошибка входа',
              text: 'Невозможно выполнить вход в систему из-за правил безопасности. Используйте один из рекомендованных браузеров, например, Google Chrome или Safari',
              url: 'https://www.mos.ru/pgu/ru/feedback/index.php',
              link: 'Обратиться в техподдержку',
            };

            const showWarningBanner = () => {
              const selector = document.querySelector('[data-js="append-title-desc"]');

              const template = `
                <div data-js="system-warrning-banner-0x01">
                  <h1 class="system-header__h1">${pageWebView.title}</h1>
                  <p class="system-link__title system-link__title--space">${pageWebView.text}</p>
                  <a class="system-link__href" href=${pageWebView.url}>${pageWebView.link}</a>
                </div>
              `.trim();

              selector?.insertAdjacentHTML('beforebegin', template);
            };



            const isWebView = () => {
              if (typeof window === undefined) return false;

              const _bool = [window, window.navigator].every(Boolean);
              if (!_bool) return false;

              const navigator = window.navigator;
              const standalone = navigator.standalone || undefined;

              const userAgent = navigator.userAgent.toLowerCase();

              const safari = /safari/.test(userAgent);
              const ios = /iphone|ipod|ipad/.test(userAgent);

              return ios ? Boolean(!standalone && !safari) : userAgent.includes('wv');
            };


            const isElementVisible = (element) => {
              const selector = document.querySelector(element);
              return Boolean(selector.offsetParent || selector.offsetWidth || selector.offsetHeight);
            };

            const removeFormContainer = () => {
              const selector = document.querySelector('[data-js="append-title-desc"]');
              const warningBanner = '[data-js="system-warrning-banner-0x01"]';

              if (selector) {
                selector.classList.add('system-content__disabled');

                // setInterval
                const refreshIntervalId = setInterval(() => {
                  if (isElementVisible(warningBanner)) {
                    clearInterval(refreshIntervalId);
                    selector.remove();
                  }
                }, 1000);

              }
            };

            const reflectWebView = () => {
              const result = isWebView();
              if (result) {
                showWarningBanner();
                removeFormContainer();
              }
            };

            const run = () => {
              reflectWebView();
            };

            document.addEventListener('DOMContentLoaded', () => run());
          })();


        </script>

      
    
        <script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="passwordMethod" src="/sps/login/assets/javascripts/passwordMethod.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="page" src="/sps/assets/blitz-common/javascripts/page.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="jquery" src="/sps/assets/blitz-common/theme/vendor/jquery/jquery-1.11.1.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="mus" src="/sps/login/assets/javascripts/mus.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="fMethods" src="/sps/login/assets/javascripts/fMethods.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="jquery-ui" src="/sps/assets/blitz-common/theme/vendor/jquery/jquery_ui/jquery-ui.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="fingerprint2" src="/sps/assets/blitz-common/ilib/fingerprint2/fingerprint2-1.7.0.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="methodsSwitcher" src="/sps/login/assets/javascripts/methodsSwitcher.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="requirejs-domready" src="/sps/assets/blitz-common/ilib/domReady/domReady.js"></script><script src="//stats.mos.ru/ss2.min.js" type="text/javascript"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="plugin-select2" src="/sps/assets/blitz-common/theme/vendor/plugins/select2/select2.min.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="mustache" src="/sps/assets/blitz-common/ilib/mustache/mustache.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="theme-utility" src="/sps/assets/blitz-common/theme/assets/js/utility/utility.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="theme-main" src="/sps/assets/blitz-common/theme/assets/js/main.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="parsley" src="/sps/assets/blitz-common/ilib/parsley/parsley.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="parsley-lang/ru" src="/sps/assets/blitz-common/ilib/parsley/i18n/ru.js"></script></head>
        <body class="system__body preloaderScreen__lock sb-l-o sb-r-c" style="min-height: 0px;">
          <div class="system__layout">
            
    <header class="system__header system__column-row">
      <section class="system-header__space safari_only ">
        <div class="system-header__container">
          <div class="system-header__logo">
            <a href="https://www.mos.ru/"><div class="system-header__pic">
    <svg width="100%" height="100%" viewBox="0 0 56 72" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M51.2746 4.09249H4.07365V54.3027C4.07365 55.4686 5.01824 56.4173 6.18017 56.4173H26.5292L26.5521 63.5961C32.193 57.3898 37.2406 56.4173 43.0888 56.4173H49.1681C50.33 56.4173 51.2746 55.4686 51.2746 54.3027V4.09249ZM0 54.3026C0 57.7255 2.77232 60.5107 6.18017 60.5107H23.1259V72L26.8676 68.037C32.205 62.4803 36.4501 60.5107 43.0888 60.5107H49.1681C52.576 60.5107 55.3483 57.7255 55.3483 54.3026V0H0V54.3026Z" fill="#CC2222"></path>
    </svg>
  </div>
            
              
            </a>
          </div>
          <h1 class="system-header__h1">Доступ к информационным ресурсам города Москвы</h1>
          <p class="system-header__desc">МЭШ</p>
        </div>
      </section>
    </header>
  
            
    <main class="system__main">
      <section class="system-main__box system-main__space system-main__background preloaderScreen__lock">
       
     
    <section class="preloaderScreen preloaderScreen__start" data-js="preloader-screen-parent">
      <div class="preloaderScreen__box">
        <div class="preloaderScreen__logo">
    <span class="raf-animation-spinner" aria-hidden="true" focusable="false" role="presentation" style="transform: rotate(299.6deg);"></span>
  </div>
        <div class="preloaderScreen__container">
          <div class="preloaderScreen__progress" data-js="preloader-screen-gear" style="transform: translateX(-1%);"></div>
        </div>
      </div>
    </section>
   
    
        <div class="system-main__form js-title-desc formHook__style formHook__idLoginFm" data-js="append-title-desc" style="display: none;">  
    















<script type="text/javascript">
    var loginFormRoutes = {}; (function(_root){
var _nS = function(c,f,b){var e=c.split(f||"."),g=b||_root,d,a;for(d=0,a=e.length;d<a;d++){g=g[e[d]]=g[e[d]]||{}}return g}
var _qS = function(items){var qs = ''; for(var i=0;i<items.length;i++) {if(items[i]) qs += (qs ? '&' : '') + items[i]}; return qs ? ('?' + qs) : ''}
var _s = function(p,s){return p+((s===true||(s&&s.secure))?'s':'')+':\/\/'}
var _wA = function(r){return {ajax:function(c){c=c||{};c.url=r.url;c.type=r.method;return jQuery.ajax(c)}, method:r.method,type:r.method,url:r.url,absoluteURL: function(s){return _s('http',s)+'login-tech.mos.ru'+r.url},webSocketURL: function(s){return _s('ws',s)+'login-tech.mos.ru'+r.url}}}
_nS('controllers.login.ExtIdpsMethodController'); _root['controllers']['login']['ExtIdpsMethodController']['execute'] = 
        function(typ0,name1,isPopup2) {
          return _wA({method:"GET", url:"\/sps\/login\/" + "externalIdps\/execute\/" + encodeURIComponent((function(k,v) {return v})("typ", typ0)) + "\/" + encodeURIComponent((function(k,v) {return v})("name", name1)) + _qS([(function(k,v){return k+'='+(!!v)})("isPopup", isPopup2)])})
        }
      ;
_nS('controllers.login.FirstFactor'); _root['controllers']['login']['FirstFactor']['changeMethod'] = 
        function(method0,bo1) {
          return _wA({method:"GET", url:"\/sps\/login\/" + "methods\/" + encodeURIComponent((function(k,v) {return v})("method", method0)) + _qS([(function(k,v){return v!=null?(function(k,v) {return encodeURIComponent(k)+'='+encodeURIComponent(v)})(k,v):''})("bo", bo1)])})
        }
      ;
_nS('controllers.login.SecondFactor'); _root['controllers']['login']['SecondFactor']['changeMethod'] = 
        function(method0,bo1) {
          return _wA({method:"GET", url:"\/sps\/login\/" + "methods2\/" + encodeURIComponent((function(k,v) {return v})("method", method0)) + _qS([(function(k,v){return v!=null?(function(k,v) {return encodeURIComponent(k)+'='+encodeURIComponent(v)})(k,v):''})("bo", bo1)])})
        }
      ;
})(loginFormRoutes)
</script>


      <div class="top">
        <h1 class="page-title">
            Вход
        </h1>
        
          <div id="regEnter" class="bc-reg-url">
            <a href="/sps/login/reg">Зарегистрироваться</a>
          </div>
        
      </div>
      
    

    <div class="mForm">
        
    <div id="pswdMethod-c" class="">
        <div class="lock-ib show">
        </div>

        <div id="gErrs">
            
        </div>

        

            
                <form id="loginFm" role="form" vld-validate="" class="form-vertical bc-form-passwordMethod" action="/sps/login/methods/password?bo=%2Fsps%2Foauth%2Fae%3Fresponse_type%3Dcode%26access_type%3Doffline%26client_id%3Dschool-test.mos.ru%26scope%3Dopenid%2Bprofile%2Bbirthday%2Bcontacts%2Bsnils%2Bblitz_user_rights%2Bblitz_change_password%26redirect_uri%3Dhttps%253A%252F%252Fschool-test.mos.ru%252Fv3%252Fauth%252Fsudir%252Fcallback" method="POST" onkeydown="if (event.keyCode == 13) {event.preventDefault(); $('#bind').click(); false;}">
            

            
                
                    <input type="hidden" id="pow" name="proofOfWork" value="1:3:230403145224:e30781d0-3628-4e94-a741-7f69a658e20c::kRUeywlnttKp88JsjrdYNA==:">
                
            

            <input type="hidden" name="isDelayed" value="false">

            <div id="other-user"></div>
            
              <div id="loginDv" class="auth-login">
                
    
        <div class="form-group form-login__label">
            <label for="login" class="control-label">
                Телефон, электронная почта или СНИЛС
            </label>
            <div class="form-input">
                <input id="login" name="login" type="text" tabindex="2" class="form-control" value="" placeholder="Телефон, электронная почта или СНИЛС" data-parsley-required="true" data-parsley-maxlength="64" data-parsley-trim-value="true" data-parsley-required-message="Введите логин" maxlength="100">
                
            </div>
        </div>
    

              </div>
            

            
                <div class="form-group form-login__label">
                    <label for="password" class="control-label">
                        Пароль
                    </label>
                    <div class="form-input posr">
                        
                        <input id="password" name="password" type="password" tabindex="3" class="form-control" value="" placeholder="Введите пароль" data-parsley-required="true" data-parsley-required-message="Введите пароль" maxlength="100">
                        
                    </div>
                </div>
            

            <div class="form-group form-login__recovery-space">
                <div class="form-group__recovery" data-js="form-toggle-password"><div class="form-toggle__checkbox-parent" data-js="form-toggle-password-parent">
                    <label class="form-toggle__checkbox form-toggle__label" data-js="form-toggle-password" id="id-form-toggle-label-187">Показать пароль
                      <input class="form-toggle__input" type="checkbox" name="checkbox-toggle" for="id-form-toggle-label-187">
                      <span class="form-toggle__checkmark"></span>
                    </label>
                  </div>
                    
                        <div id="recoveryEnter" class="bc-recovery-url">
                            <a href="/sps/recovery">Восстановить пароль</a>
                        </div>
                    
                </div>
            </div>
            

            <button id="bind" type="button" tabindex="5" class="form-login__submit" disabled="disabled">
                
                    Войти
                
            </button>

            </form>
        
    </div>


    </div>
    
	  
        
      
      <div class="methods-wrapper-disable">
        <div class="methods-sep">
            <span>или</span>
        </div>
        <div class="methods-header">Войти через</div>
        <div id="methods-switcher" class="methods-switcher formFooter__box"><div class="main formFooter__main" data-js="form-footer-box-toggle">
                <div class="formFooter__box">
                  <div class="group formFooter__column formFooter__column--list formFooter__column--other" data-js="group-button-header" data-js-counter="4"><a href="javascript:void(0)" data-method="externalIdps:tcs:tcs_1" class="favorite btn-meth meth-ext has-icon icons-count-3 meth-tcs item formFooter__button" role="button" title="Тинькофф ID"><div class="adaptive-group">
                  <img src="/sps/public/assets/themes/default_1680512023/assets/img/svg/icon-brand--tinkoff-black.svg" name="tinkoff" alt="tinkoff" title="tinkoff" class="icon-replacer"><img src="/sps/public/assets/themes/default_1680512023/assets/img/svg/icon-brand--tinkoff.svg" name="tinkoff--alt" alt="tinkoff--alt" title="tinkoff--alt" class="icon-replacer adaptive">
                  <span>Тинькофф</span>
                </div></a><a href="javascript:void(0)" data-method="externalIdps:sbrf:sbrf_1" class="favorite btn-meth meth-ext has-logo logo-count-3 meth-sbrf item formFooter__button" role="button"><div class="adaptive-group">
                  <img src="/sps/public/assets/themes/default_1680512023/assets/img/svg/small__sber.svg" name="sber" alt="sber" title="sber">
                  <span>Сбер ID</span>
                </div></a><a href="javascript:void(0)" data-method="externalIdps:esia:esia_1" class="favorite btn-meth meth-ext has-logo logo-count-3 meth-esia item formFooter__button" role="button"><div class="adaptive-group">
                  <img src="/sps/public/assets/themes/default_1680512023/assets/img/svg/small__gos.svg" name="gos" alt="gos" title="gos">
                  
                </div></a>
                      <div class="item formFooter__button formFooter__toggle" data-js="dots-toggle">
                      <img class="ignore-click" src="/sps/public/assets/themes/default_1680512023/assets/img/svg/dots.svg" alt="Picture">
                  </div>
                  </div>
                  <div class="group formFooter__row" data-js="group-button-footer"><a href="javascript:void(0)" data-method="x509" class="favorite2 btn-meth meth-int logo-count-1 meth-count-1 meth-x509 item formFooter__button formFooter__button--decoration" role="button" title="Электронная подпись">
          Электронная подпись
      </a></div>
                </div>
                <div class="formFooter__teleport" data-js="teleport-toggle">
                  <div class="group formFooter__social"><a href="javascript:void(0)" data-method="qrCode" class="other btn-meth meth-int logo-count-6 meth-count-6 meth-qrCode item formFooter__button formFooter__icon" role="button" title="QR-код"><img src="/sps/public/assets/themes/default_1680512023/assets/img/svg/qrcode.svg" name="qrcode" alt="qrcode" title="qrcode"></a><a href="javascript:void(0)" data-method="webAuthn" class="other btn-meth meth-int logo-count-6 meth-count-6 meth-webAuthn item formFooter__button formFooter__icon" role="button" title="Ключ безопасности"><img src="/sps/public/assets/themes/default_1680512023/assets/img/svg/key.svg" name="webAuthn" alt="webAuthn" title="webAuthn"></a><a href="javascript:void(0)" data-method="externalIdps:vk:vk_1" class="other btn-meth meth-ext has-icon icons-count-6 meth-vk item formFooter__button formFooter__icon" role="button" title="VK"><img src="/sps/public/assets/themes/default_1680512023/assets/img/svg/vk.svg" name="vk" alt="vk" title="vk"></a><a href="javascript:void(0)" data-method="externalIdps:yandex:yandex_1" class="other btn-meth meth-ext has-icon icons-count-6 meth-yandex item formFooter__button formFooter__icon" role="button" title="Яндекс"><img src="/sps/public/assets/themes/default_1680512023/assets/img/svg/yandex.svg" name="yandex" alt="yandex" title="yandex"></a><a href="javascript:void(0)" data-method="externalIdps:mail:mail_1" class="other btn-meth meth-ext has-icon icons-count-6 meth-mail item formFooter__button formFooter__icon" role="button" title="Mail ID"><img src="/sps/public/assets/themes/default_1680512023/assets/img/svg/mailru.svg" name="mailru" alt="mailru" title="mailru"></a><a href="javascript:void(0)" data-method="externalIdps:ok:ok_1" class="other btn-meth meth-ext has-icon icons-count-6 meth-ok item formFooter__button formFooter__icon" role="button" title="Одноклассники"><img src="/sps/public/assets/themes/default_1680512023/assets/img/svg/ok.svg" name="ok" alt="ok" title="ok"></a></div>
                </div>
              </div>
          
            
                
        
            
      
    
        
    
            
                
        
            
      
    
        
    
            
                
        
            
      
    
        
    
            
            
            
         
        </div>
      </div>
      
    
	  
    
    


      
       <div class="incognitoModal">
         <div class="incognitoModal__preview-text" data-js="incognito-grabb-text">
           Рекомендуем использовать <a class="incognito-btn" href="#open-modal">режим инкогнито</a> для входа с чужого устройства
         </div><div class="incognitoModal__text">
           Рекомендуем использовать  <span class="incognitoModal__text-link" data-js="incognito-modal-open">режим инкогнито</span>  для входа с чужого устройства
          </div>

         <div class="inconitoModal__background disabled" data-js="incognito-modal-main">
           <div class="incognitoModal__position">
             <div class="incognitoModal__box">
               <div class="incognitoModal__close" data-js="incognito-modal-close">
                 <img class="incognitoModal__close-svg" src="/sps/public/assets/themes/default_1680512023/assets/img/svg/close-me-modal.svg" alt="Close modal window">
               </div>
               <div class="incognitoModal__group incognitoModal__web">
                 <div class="incognitoModal__header">
                   <h2 class="incognitoModal__title">Входите с чужого устройства?</h2>
                 </div>
                 <div class="incognitoModal__middle"><span class="incognitoModal__hr"></span></div>
                 <div class="incognitoModal__footer">
                   <div class="incognitoModal__description"><p>Если вы не хотите, чтобы информация о входе сохранилась в вашем браузере, откройте его в режиме инкогнито</p><p>Обычно для этого нужно выполнить шаги:</p><ol><li>В вашем браузере в правом верхнем углу экрана нажмите на значок «Настройка» или «Меню»</li><li>В появившемся списке выберите «Новое окно в режиме инкогнито» или «Новое приватное окно»</li><li>Откроется новое окно с пометкой «Режим инкогнито» или «Приватное окно»</li></ol><p>После окончания работы с сайтом закройте браузер</p><p>Способ включения режима инкогнито зависит от вашего браузера и операционной системы</p></div>
                 </div>
               </div>
               <button class="incognitoModal__button incognitoModal__button--start" data-js="incognito-modal-close">
                 Закрыть
               </button>
             </div>
           </div>
         </div>
       </div>
      
    




  </div>
      </section>
    </main>
  
            
    <footer class="system__footer system__column-row">
      <section class="system-footer__space">
        <div class="system-link__box">
          
          
          <div class="system-link system-link__alt-group">
            <div class="item system-link__group">
              <p class="system-link__title">Инструкция для входа в личный кабинет:</p>
              <div class="system-link__list">
                <a class="system-link__href" href="https://www.mos.ru/otvet-tehnologii/kak-polzovatsya-lichnym-kabinetom-na-mos-ru/" target="_blank">Для физических лиц
                </a>
                <a class="system-link__href" href="https://www.mos.ru/otvet-tehnologii/kak-zaregistrirovat-kabinet-organizacii-na-mos-ru/">Для юридических лиц и ИП</a>
                <a class="system-link__href" href="https://www.mos.ru/otvet-tehnologii/kak-voyti-v-kabinet-organizacii-na-mos-ru-doverennym-licam/">Для доверенных лиц организаций</a>
              </div>
            </div>
            <div class="item">
              <p class="system-link__copyright">© Департамент информационных технологий города Москвы</p>
            </div>
          </div>
        </div>
      </section>
    </footer>
  
          </div>
          <div class="system__scripts"><script class="system__js-daspp-runner" src="/js/daspp.obf.js"></script>
            
     
    <script>
      const globalCaptchaID = '[name="captcha_answer"]';
      const globalCaptchContainer = '#captcha_container';

      const attachMetaBridge = () => {
        const META = document.createElement('META');
        META.name = 'watch-user-state';
        META.content = '0';
        document.head.insertAdjacentElement('afterbegin', META);
      };

      const globalPreloaderProgressSpinner = () => {
        let captchaResultGlobal = false;
        let captchaResultGlobalCounter = 99;
        let anomalusPreloaderBug = false;

        class GlobalProgressBar {
          // progressBar: string;
          // preloaderParent: string;
          // lockName: string;
          // counter: number;
          // enable: boolean;
          // selectorScreenGear?: HTMLElement | null;
          // selectorScreenParent?: HTMLElement | null;
          // intervalID?: ReturnType<typeof setInterval>;
          // selectorInput: string;
          // listLocked: string[];
          // targetExtraLock: string;

          constructor() {
            this.progressBar = '[data-js="preloader-screen-gear"]';
            this.preloaderParent = '[data-js="preloader-screen-parent"]';
            this.lockName = 'preloaderScreen__lock';
            this.selectorInput = '#login';

            this.counter = 0;
            this.enable = true;

            this.selectorScreenGear = undefined;
            this.selectorScreenParent = undefined;
            this.intervalID = undefined;
            this.listLocked = ['html', 'body', '.system-main__box'];
            this.targetExtraLock = '[data-js="append-title-desc"]';
          }

          calcTranslate() {
            return String(100 - Number(this.counter));
          }
          renderProgress() {
            if (!this.selectorScreenGear) return false;
            this.selectorScreenGear.style.transform = `translateX(-${this.calcTranslate()}%)`;
          }

          extraLockElement({ target, property: { _key = '', _value = '' } }) {
            const extraLock = document.querySelector(target);
            if (extraLock) extraLock.style[_key] = _value;
          }

          addPreloaderLock() {
            const _contains = document.body.classList.contains('preloaderScreen__lock');
            const bodyNotLocked = !(_contains || false);

            if (this.selectorScreenParent && bodyNotLocked) {
              this.extraLockElement({
                target: this.targetExtraLock,
                property: { _key: 'display', _value: 'none' },
              });

              for (const f of this.listLocked) {
                document.querySelector(f).classList.add(this.lockName);
              }
            }
          }

          removePreloader() {
            if (this.selectorScreenParent) {
              this.selectorScreenParent.remove();

              for (const f of this.listLocked) {
                document.querySelector(f).classList.remove(this.lockName);
              }

              this.extraLockElement({
                target: this.targetExtraLock,
                property: { _key: 'display' },
              });
              
            } else {
              console.warn('[SCALA]', 'i cant remove preloader, sorry!');
            }
          }

          lastStep() {
            setTimeout(() => this.removePreloader(), 250);
            captchaResultGlobal = true;

            this.safariInputCaretFixer(false);
            this.enable = false;
          }

          captchaTrap() {
            const captcha = document.querySelector(globalCaptchContainer);
            if (!captcha) return true;

            const captchaBox = captcha.querySelector(globalCaptchaID);
            captchaResultGlobal = [captcha, captchaBox].every(Boolean);
            captchaResultGlobal ? true : false;
            return captchaResultGlobal;
          }

          validateStep() {
            if (this.counter >= 99) {
              this.captchaTrap() ? this.lastStep() : this.captchaTrap();
            }
          }

          safariInputCaretFixer(stage = true) {
            const input = document.querySelector(this.selectorInput);

            if (input) stage 
              ? input.removeAttribute('autofocus') 
              : input.setAttribute('autofocus', '');
          }

          baseStep() {
            this.selectorScreenGear = document.querySelector(this.progressBar);
            this.selectorScreenParent = document.querySelector(this.preloaderParent);

            this.addPreloaderLock();
            this.safariInputCaretFixer();
            this.validateStep();
            this.counter += 33;
            this.renderProgress();
          }

          forcePlusCounter() {
            this.counter += 33;
          }

          forceDisablePreloader() {
            this.counter = 100;
          }
          unFreeze() {
            console.warn("[force] manual stop preloader!"); 
            this.counter = 100;
            this.lastStep();
          }

          run() {
            if (this.enable) this.baseStep();
          }
        }

        const SetupGlobalProgressBar = new GlobalProgressBar();

        // INTERVAL
        const intervalRunner = () => {
          SetupGlobalProgressBar.forcePlusCounter();

          const ruleCounter = [{name: "readyState"}];

          const _metaUserState = document.querySelector('meta[name=watch-user-state]');
          const _captchaState = document.querySelector(globalCaptchContainer);
          const _otherUserState = document.querySelector('#other-user');

          const pushToArray = (_state = { name: undefined, state: undefined }) => {
            // console.log(`[LOG] _state`, `<${typeof _state}>`, _state)

            const _bool =  !ruleCounter.some(({name}) => name === _state.name);
            return _bool ? ruleCounter.push(_state) : "skip";
          };

          const objectRules = {
            readyState: () => document.readyState === 'complete',
            otherUser: () => _metaUserState.getAttribute('content') !== '0',
            cap4ka: () => {
              /*                  HACK                      */
              if (captchaResultGlobalCounter <= 1) {
                console.warn("[force] captcha aborted!");
                anomalusPreloaderBug = true;
                return true;
              }
              /*                  HACK__END                 */

              const captchaContainer = document.querySelector(globalCaptchContainer);
              const captchaBox = captchaContainer && captchaContainer.querySelector(globalCaptchaID);

              captchaResultGlobal = [captchaContainer, captchaBox].every(Boolean);
              return captchaResultGlobal;
            },
          };

          // ------ START_INTERVAL------ START_INTERVAL ------ START_INTERVAL ------
          const intervalID = setInterval(() => {
            if (_captchaState) pushToArray({name: 'cap4ka'});
            if (_otherUserState) pushToArray({name: 'otherUser'});

            const listResult = ruleCounter.map(({name}) => ({
                name, 
                state: objectRules[name](),
              })
            );
            // console.log(`[LOG] listResult`, `<${typeof listResult}>`, listResult)

            if (listResult.length > 0 && listResult.every(({state}) => state)) {
              captchaResultGlobalCounter = 0;
            }

            //  !remove one tick
            captchaResultGlobalCounter -= 1;
            if (captchaResultGlobalCounter <= 0) {
              SetupGlobalProgressBar.run();
              clearInterval(intervalID);
              
              // if cap4ka crashed, force stop preloader!!!
              if (anomalusPreloaderBug) {
                return SetupGlobalProgressBar.unFreeze();
              }
              
            }
          }, 123);
        };

        // GO
        attachMetaBridge();

        SetupGlobalProgressBar.run();
        intervalRunner();
        window.addEventListener('DOMContentLoaded', () => SetupGlobalProgressBar.run());
      };

      (() => globalPreloaderProgressSpinner())();

    </script>
   
     
            
    <script>
      (() => {
        const runner = {
          continueMutation({ MutationRecord }) {
            const targetFindPattern = 'passwordCaptcha.css';
            const mutationElement = [...MutationRecord.addedNodes];

            const result = mutationElement
              .filter((f) => f ? f.tagName === 'LINK' : undefined)
              .find((f) => f ? f.href.includes(targetFindPattern) : undefined);

            if (result) result.remove();
          },
        };

        const run = () => {
          const mo = new MutationObserver((mutationsList) => {
            if (Array.isArray(mutationsList) && mutationsList.some(Boolean)) {
              const MutationRecord = mutationsList.find((f) => [...f.addedNodes].some(Boolean));

              if (MutationRecord && MutationRecord.addedNodes) {
                runner.continueMutation({ MutationRecord });
              }
            }
          });

          try {
            const targetMutate = document.querySelector('head');

            if (targetMutate) mo.observe(targetMutate, { attributes: false, subtree: false, childList: true });
          } catch (error) {
            console.log(`[LOG] error`, `<${typeof error}>`, error);
            mo.disconnect();
          }
        };

        document.addEventListener('DOMContentLoaded', () => run());
      })();
    </script>
  
          </div>
        
      
   
    
  


<div><div style="behavior:url(#default#clientCaps)" id="oClientCaps"></div></div><span style="font-size: 72px; position: absolute; top: -1000px; left: -1000px; font-family: Champignon, serif;">mmmmmmmmmmlli</span></body></html>